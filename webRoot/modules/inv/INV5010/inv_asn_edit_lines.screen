<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: wanghaitao  
    $Date: 2015-02-11 下午04:38:31  
    $Revision: 1.0  
    $Purpose: 送货单创建，送货单行维护页面
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:init-procedure>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;INV_ASN_ISROSH&apos; " fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="find_rosh2"/>
        <a:model-query defaultWhereClause="v.config_classify_code = &apos;ASN&apos; AND v.config_item_code = &apos;ASN_12&apos;" fetchAll="true" model="public.get_fnd_config_center_coop_bg_item_value" rootPath="bg_item_asn_12"/>
        <a:model-query fetchAll="true" model="public.currency_list" rootPath="inv5010_currency_source"/>
    </a:init-procedure>
    <a:view>
        <a:link id="inv5010_asn_edit_lines_delete_link" model="inv.INV5010.inv_asn_edit_lines" modelaction="delete"/>
        <a:link id="inv5010_asn_edit_lines_submit_link" model="inv.INV5010.inv_asn_edit_lines" modelaction="execute"/>
        <a:link id="inv5010_asn_edit_lines_save_link" url="${/request/@context_path}/modules/inv/INV5010/inv_asn_edit_save.svc"/>
        <a:link id="inv5010_asn_edit_lines_attachment_file_upload_link" url="${/request/@context_path}/attachment_file_upload.screen"/>
        <a:link id="inv5010_asn_operation_record_link" url="${/request/@context_path}/modules/inv/PUBLIC/inv_asn_operation_record.screen"/>
        <script><![CDATA[
            function inv5010_asnEditLinesBackToQuery() {
                $('inv5010_asn_edit_lines_link_window').close();
            }
            
            function inv5010_asnEditLinesSave(action) {
                var header_ds = $('inv5010_asn_edit_header_ds');
                if (!header_ds.validate()) {
                    return false;
                }
                var header_record = header_ds.getCurrentRecord();
                // var atms_flag = header_record.get('atms_flag');
                // var atm_counts = header_record.get('atm_counts');
                // if (atm_counts == 0 && atms_flag != 0) {
                // Aurora.showMessage('${l:PROMPT}', '请上传附件！');
                // return false;
                // }
                var datas = {
                    asn_header_id: '${/parameter/@asn_header_id}',
                    asn_type_code: header_record.get('asn_type_code'),
                    ship_date: header_record.get('ship_date'),
                    expected_date: header_record.get('expected_date'),
                    header_desc: header_record.get('header_desc'),
                    bill_of_lading: header_record.get('bill_of_lading'),
                    approved_date: header_record.get('approved_date'),
                    erp_last_update_date: header_record.get('erp_last_update_date'),
                    comments: header_record.get('comments'),
                    logistics_company: header_record.get('logistics_company'),
                    dispatching_staff: header_record.get('dispatching_staff'),
                    contact_information: header_record.get('contact_information'),
                    logistics_cost: header_record.get('logistics_cost'),
                    express_number: header_record.get('express_number')
                };
            
                var lines_ds = $('inv5010_asn_edit_lines_ds');
                if (!lines_ds.validate()) {
                    return false;
                }
                var lines_records = lines_ds.getAll();
                var lines_data = [];
                for (var i = 0;i < lines_records.length;i++) {
                    // Modify by Hunter 2658 at 2018-02-07 T1922 T2017
                    // 去掉生产日期的校验
                    // if (lines_records[i].get('production_date')> new Date()) {
                    // Aurora.showMessage('${l:PROMPT}', '${l:PROMPT.PRODUCTION_DATE_INPUT_ERROR}');
                    // return;
                    // }
                    lines_data.push(lines_records[i].data);
                }
                datas['lines_data'] = lines_data;
                $('inv5010_asnEditLinesSave_btn').disable();
                Aurora.Masker.mask($('inv5010_asn_edit_lines_link_window').wrap, '${l:LOADING}');
                $('inv5010_asn_edit_declares_ds').submit();
                $('inv5010_asn_edit_invoices_ds').submit();
                $('inv5010_asn_edit_encasements_ds').submit();
                $('inv5010_asn_edit_contracts_ds').submit();
            
                Aurora.request({
                    url: $('inv5010_asn_edit_lines_save_link').getUrl(),
                    para: datas,
                    success: function() {
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        $('inv5010_asnEditLinesSave_btn').enable();
                        $('inv5010_asn_edit_lines_ds').query();
                        if (!Aurora.isEmpty(action) && action == 'SUBMIT') {
                            inv5010_asnEditLinesSubmitAction();
                        }
                    },
                    failure: function() {
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        $('inv5010_asnEditLinesSave_btn').enable();
                    },
                    error: function() {
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        $('inv5010_asnEditLinesSave_btn').enable();
                    },
                    scope: this
                });
            }
            
            function inv5010_asnEditLinesDelete() {
                //提交AjAX请求
                Aurora.showConfirm('${l:PROMPT}', '${l:INV5010.SURE_TO DELETE}', function() {
                    $('inv5010_asnEditLinesDelete_btn').disable();
                    Aurora.Masker.mask($('inv5010_asn_edit_lines_link_window').wrap, '${l:LOADING}');
                    Aurora.request({
                        url: $('inv5010_asn_edit_lines_delete_link').getUrl(),
                        para: {
                            asn_header_id: '${/parameter/@asn_header_id}'
                        },
                        success: function() {
                            $('inv5010_asnEditLinesDelete_btn').enable();
                            Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                            inv5010_asnEditLinesBackToQuery();
                        },
                        failure: function() {
                            $('inv5010_asnEditLinesDelete_btn').enable();
                            Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        },
                        error: function() {
                            $('inv5010_asnEditLinesDelete_btn').enable();
                            Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        },
                        scope: this
                    });
                });
            }
            
            function inv5010_asnEditLinesSubmit() {
                debugger;
                var header_ds = $('inv5010_asn_edit_header_ds');
                var header_record = header_ds.getCurrentRecord();
                var atms_flag = header_record.get('atms_flag');
                var atm_counts = header_record.get('atm_counts');
                if (atm_counts == 0 && atms_flag != 0) {
                    Aurora.showMessage('${l:PROMPT}', '请上传附件！');
                    return false;
                }
                //提交AjAX请求
                Aurora.showConfirm('${l:PROMPT}', '${l:INV5010.SURE_TO SUBMIT}', function() {
                    inv5010_asnEditLinesSave('SUBMIT');
                });
            }
            
            function inv5010_asnEditLinesSubmitAction() {
                $('inv5010_asnEditLinesSubmit_btn').disable();
                Aurora.Masker.mask($('inv5010_asn_edit_lines_link_window').wrap, '${l:LOADING}');
                Aurora.request({
                    url: $('inv5010_asn_edit_lines_submit_link').getUrl(),
                    para: {
                        asn_header_id: '${/parameter/@asn_header_id}'
                    },
                    success: function() {
                        $('inv5010_asnEditLinesSubmit_btn').enable();
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                        inv5010_asnEditLinesBackToQuery();
                    },
                    failure: function() {
                        $('inv5010_asnEditLinesSubmit_btn').enable();
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                    },
                    error: function() {
                        $('inv5010_asnEditLinesSubmit_btn').enable();
                        Aurora.Masker.unmask($('inv5010_asn_edit_lines_link_window').wrap);
                    },
                    scope: this
                });
            }
            
            function inv5010_asnEditHeaderDsValidator(record, name, value) {
                var current_date = Aurora.formatDate(new Date());
                value = Aurora.formatDate(value);
            
                //获取“发货日期可选当日之后”配置项的值
                var asn_12_item_value = '${/model/bg_item_asn_12/record/@bg_config_item_value}';
            
                //送货日期
                if (name == 'ship_date') {
                    //add by Hunter.wang at 20171124
                    //没有配置此配置项，则校验发货日期与当前日期
                    if (Aurora.isEmpty(asn_12_item_value) || asn_12_item_value == "N") {
                        if (value > current_date) {
                            return '${l:INV5010.DELIVERY_DATE_CAN_NOT_LATER_THAN_SYSDATE}';
                        }
                    }
                }
            
                //预计到货日期
                if (name == 'expected_date') {
                    if (value < Aurora.formatDate(record.get('ship_date'))) {
                        return '${l:INV5010_EXPECT_DATE_COMPRE_ERROR}';
                    }
                }
                return true;
            }
            
            function inv5010_asnEditLineDsValidator(record, name, value) {
                var ship_quantity_max = record.get('ship_quantity_max');
                var package_min_amount = record.get('package_min_amount');
                if (name == 'packet_quantity') {
                    if (value == 0) {
                        return '单包装数不能为0！';
                    }
                }
                if (name == 'ship_quantity') {
                    if (value == 0) {
                        return '${l:INV5010.SHIPMENT_QUANTITY_CAN_NOT_BE_ZERO}';
                    } else {
                        if (value > ship_quantity_max) {
                            return '${l:INV5010.SHIP_NOW_CAN_NOT_GREATER_THAN_AVAILABLE}';
                        }
                        // if (value < package_min_amount) {
                        // return '本次发运数量不能小于最小包装量';
                        // }
                    }
                }
                return true;
            }
            
            //比较两个日期的大小
            
            function inv5010_compareDate(start, end) {
                if (typeof(start) == 'string') {
                    start = new Date(start.replace(/-/g, '/'));
                }
                if (typeof(end) == 'string') {
                    end = new Date(end.replace(/-/g, '/'));
                }
                if (start > end) {
                    return false;
                }
                return true;
            }
            //生产日期校验
            var warn_flag = 'N';
            
            function inv5010_product_dateValidator(record, name, value) {
                debugger;
                //批次号不能为汉字
                var reg = new RegExp("[\\u4E00-\\u9FFF]+", "g");
                if (name == 'lots_num') {
                    if (reg.test(value)) {
                        return '请勿输入汉字！';
                    } else {
                        return true;
                    }
                }
                if (name == 'production_date') {
                    var delivery_lead_days = record.get('delivery_lead_days');
                    var end = new Date(value);
                    end.setDate(end.getDate() + delivery_lead_days);
                    if ( !! end) {
                        // if (!Ext.isEmpty(end)) {
                        var sysdate = new Date();
                        if (warn_flag == 'N' && !inv5010_compareDate(sysdate, end)) {
                            Aurora.showMessage('${l:PROMPT}', '应尽早送货，避免货物存储过期，谢谢！');
                            warn_flag = 'Y';
                        }
                    }
                    return true;
                }
            }
            //获取两个数的倍数,返回倍数
            
            function getIntegerTimes(arg1, arg2) {
            
                var t1 = 0,
                    t2 = 0,
                    r1, r2;
                try {
                    t1 = arg1.toString().split(".")[1].length
                } catch (e) {}
                try {
                    t2 = arg2.toString().split(".")[1].length
                } catch (e) {}
                with(Math) {
                    r1 = Number(arg1.toString().replace(".", ""));
                    r2 = Number(arg2.toString().replace(".", ""));
                    return (r1 / r2) * pow(10, t2 - t1);
                }
            }
            //判断是否为正整数,返回true或false
            
            function isPositiveIntegerTimes(arg) {
                var num = arg.toString();
                if (!(/(^[1-9]\d*$)/.test(num))) {
                    return false;
                } else {
                    return true;
                }
            }
            
            function inv5010_asnEditUpdate(ds, record, name, value) {
                if (name == 'production_date') {
                    warn_flag = 'N';
                }
                var packet_quantity = record.get('packet_quantity');
                if (name == 'packet_quantity' || (name == 'ship_quantity' && typeof(packet_quantity) != 'undefined')) {
                    var ship_quantity = record.get('ship_quantity');
                    var packet_quantity = record.get('packet_quantity');
                    var box_amount = getIntegerTimes(ship_quantity, packet_quantity);
                    var mantissa_quantity = ship_quantity % packet_quantity;
                    if (isPositiveIntegerTimes(box_amount)) {
                        box_amount = box_amount;
                    } else {
                        box_amount = parseInt(box_amount) + 1;
                    }
                    record.set('box_amount', box_amount);
                    record.set('mantissa_quantity', mantissa_quantity);
                }
            }
            
            function inv5010_asnEditLinesAttachment() {
                var asn_header_id = '${/parameter/@asn_header_id}';
                if (asn_header_id) {
                    new Aurora.Window({
                        id: 'inv5010_asn_edit_header_attachment_file_upload_link_window',
                        title: '${l:HAP_UPLOAD_TITLE}',
                        url: $('inv5010_asn_edit_lines_attachment_file_upload_link').getUrl() + '?pkvalue=' + asn_header_id + '&table_name=INV_ASN_HEADERS',
                        width: 500,
                        height: 500
                    });
                }
            }
            
            function inv5010_asnEditLinesDsGridRenderer(value, record, name) {
                if (name == 'line_attachment') {
                    if (!Aurora.isEmpty(record.get('asn_line_id'))) {
                        return '<a href="javascript:inv5010_edit_line_attachment_upload_function(' + record.get('asn_line_id') + ')">${l:INV5010.UPLOAD_ATTACHMENT}</a>';
                    }
                }
            }
            
            function inv5010_edit_line_attachment_upload_function(asn_line_id) {
                new Aurora.Window({
                    id: 'inv5010_asn_edit_lines_attachment_file_upload_link_window',
                    title: '${l:HAP_UPLOAD_TITLE}',
                    url: $('inv5010_asn_edit_lines_attachment_file_upload_link').getUrl() + '?pkvalue=' + asn_line_id + '&table_name=INV_ASN_LINES',
                    width: 500,
                    height: 500
                });
            }
            
            function inv5010_operation_records_render(value, record, name) {
                var asn_header_id = record.get('asn_header_id');
                var asn_line_id = record.get('asn_line_id');
                if (Aurora.isEmpty(record.get('asn_line_id'))) {
                    asn_line_id = -1;
                }
                return '<a href="javascript:inv5010_go_operation_records(' + asn_header_id + ',' + asn_line_id + ');">${l:PROMPT.OPERATION_RECORD}</a>';
            }
            
            function inv5010_go_operation_records(asn_header_id, asn_line_id) {
                new Aurora.Window({
                    id: 'inv_asn_operation_record_window',
                    title: '${l:PROMPT.OPERATION_RECORD}',
                    url: $('inv5010_asn_operation_record_link').getUrl() + '?asn_header_id=' + asn_header_id + '&asn_line_id=' + asn_line_id,
                    height: 450,
                    width: 600
                });
            }
            
            function inv5010_asnEditLinesRecord() {
                var record = $('inv5010_asn_edit_header_ds').getCurrentRecord();
                var asn_header_id = record.get('asn_header_id');
                inv5010_go_operation_records(asn_header_id, -1);
            }
            
            function inv5010_create_add(dataSet, record, index) {
            
                // 生成行号
                records = dataSet.getAll();
                var line_num = 0;
                if (records.length > 1) {
                    for (var t = 0;t < records.length;t++) {
                        if (line_num < records[t].get('line_num')) {
                            line_num = records[t].get('line_num');
                        }
                    }
                }
                record.set('line_num', line_num + 1);
            
            }
            
            function inv5010_asn_edit_encasements_ds_grid_editFcn(record, name) {
                debugger;
                var line_record = $('inv5010_asn_edit_lines_ds').getAt(0);
                var is_printing_ink = line_record.get('is_printing_ink');
                if (name == 'main_agent_kg') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_encasements_ds_grid_numberField';
                    } else {
                        return '';
                    }
                }
                if (name == 'hardener_kg') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_encasements_ds_grid_numberField';
                    } else {
                        return '';
                    }
                }
                if (name == 'main_agent_tank') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_encasements_ds_grid_numberField';
                    } else {
                        return '';
                    }
                }
                if (name == 'hardener_tank') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_encasements_ds_grid_numberField';
                    } else {
                        return '';
                    }
                }
            }
            
            function inv5010_AsnEditDeclaresGridEditorFunction(record, name) {
                debugger;
                var line_record = $('inv5010_asn_edit_lines_ds').getAt(0);
                var is_printing_ink = line_record.get('is_printing_ink');
                if (name == 'shape') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'texture') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'state') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'overall_thickness') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'copper_thickness') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'length') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'width') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'brand') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'mark') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'plies') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'kind') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'substrate_material') {
                    if (is_printing_ink == 'Y') {
                        return '';
                    } else {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    }
                }
                if (name == 'package') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    } else {
                        return '';
                    }
                }
                if (name == 'color') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    } else {
                        return '';
                    }
                }
                if (name == 'comment_place') {
                    if (is_printing_ink == 'Y') {
                        return 'inv5010_asn_edit_declares_ds_grid_textField';
                    } else {
                        return '';
                    }
                }
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="find_rosh_ds2">
                <a:datas dataSource="find_rosh2"/>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_type_list_ds" autoQuery="true" fetchAll="true" model="public.asn_type_lov" queryUrl="${/request/@context_path}/autocrud/public.asn_type_lov/query?asn_create=asn_create"/>
            <a:dataSet id="inv5010_asn_edit_header_ds" autoPageSize="true" autoQuery="true" model="inv.INV5010.inv_asn_edit_header" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_header/query?asn_header_id=${/parameter/@asn_header_id}" selectable="true">
                <a:fields>
                    <a:field name="asn_header_id" readOnly="true"/>
                    <a:field name="asn_number" readOnly="true"/>
                    <a:field name="company_name" readOnly="true"/>
                    <a:field name="vendor_name" readOnly="true"/>
                    <a:field name="ship_to_organization_name" readOnly="true"/>
                    <a:field name="location_name" readOnly="true"/>
                    <a:field name="ship_date" required="true" requiredMessage="${l:INV_ASN_HEADERS_TEMP.SHIP_DATE_NOT_NULL}"/>
                    <a:field name="expected_date" required="true" requiredMessage="${l:INV_ASN_HEADERS_TEMP.EXPECTED_DATE_NOT_NULL}"/>
                    <a:field name="vendor_site_name" readOnly="true"/>
                    <a:field name="data_source" readOnly="true"/>
                    <a:field name="comments"/>
                    <a:field name="asn_type_name" displayField="asn_type_name" options="inv5010_asn_edit_type_list_ds" returnField="asn_type_code" valueField="asn_type_code"/>
                    <a:field name="logistics_company" autoComplete="false" fetchRemote="false" lovHeight="500" lovService="public.fnd_flex_value_v_lov?flex_value_set_code=INV_ASN_LOGISTICS_COMPANY" lovWidth="500" title="INV_ASN_HEADERS_TEMP.LOGISTICS_COMPANY">
                        <a:mapping>
                            <a:map from="flex_value" to="logistics_company_code"/>
                            <a:map from="flex_desc" to="logistics_company"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_lines_ds" autoQuery="true" fetchAll="true" model="inv.INV5010.inv_asn_edit_lines" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_lines/query?asn_header_id=${/parameter/@asn_header_id}" selectable="false">
                <a:fields>
                    <a:field name="asn_line_id"/>
                    <a:field name="ship_quantity" required="true" requiredMessage="INV5010.SHIPMENT_QUANTITY_CAN_NOT_BE_BULL_OR_ZERO" validator="inv5010_asnEditLineDsValidator"/>
                    <a:field name="production_date" required="true" requiredMessage="生产日期不能为空" validator="inv5010_product_dateValidator"/>
                    <a:field name="comments"/>
                    <a:field name="serial_num" requiredMessage="INV5010.SERIAL_NUM_CAN_NOT_NULL"/>
                    <a:field name="lots_num" required="true" requiredMessage="INV5010.BATCH_NUM_CAN_NOT_NULL" validator="inv5010_product_dateValidator"/>
                    <a:field name="lots_validity_date" requiredMessage="INV5010.DATE_OF_EXPIRY_CAN_NOT_NULL"/>
                    <a:field name="packet_weight" requiredMessage="单重不能为空"/>
                    <a:field name="packet_quantity" required="true" requiredMessage="单包装数不能为空" validator="inv5010_asnEditLineDsValidator"/>
                    <a:field name="isrosh" displayField="flex_desc" lovWidth="120" options="find_rosh_ds2" required="true" requiredMessage="ROSH要求不能为空" returnField="isrosh" valueField="flex_value">
                        <a:mapping>
                            <a:map from="flex_value" to="isrosh"/>
                        </a:mapping>
                    </a:field>
                    <!-- <a:field name="isrosh" required="true" requiredMessage="是否ROSH不能为空"/>
                    <a:field name="isrosh_desc" displayField="code_value_name" options="yes_or_no_ds" required="true" requiredMessage="是否ROSH不能为空" returnField="isrosh" valueField="code_value"/> -->
                </a:fields>
                <a:events>
                    <a:event name="update" handler="inv5010_asnEditUpdate"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_declares_ds" autoQuery="true" fetchAll="true" model="inv.INV5010.inv_asn_edit_declares" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_declares/query?asn_header_id=${/parameter/@asn_header_id}" selectable="true">
                <a:fields>
                    <a:field name="asn_header_id" defaultValue="${/parameter/@asn_header_id}"/>
                </a:fields>
                <a:events>
                    <a:event name="add" handler="inv5010_create_add"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="inv5010_currency_ds" autoCreate="true" loadData="true">
                <a:datas dataSource="/model/inv5010_currency_source"/>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_invoices_ds" autoQuery="true" fetchAll="true" model="inv.INV5010.inv_asn_edit_invoices" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_invoices/query?asn_header_id=${/parameter/@asn_header_id}" selectable="true">
                <a:fields>
                    <a:field name="asn_header_id" defaultValue="${/parameter/@asn_header_id}"/>
                    <a:field name="uom_desc" autoComplete="true" autoCompleteField="code_name" lovGridHeight="350" lovHeight="500" lovService="inv.INV5010.inv5010_uom_codes_lov" lovWidth="500" title="FND_UOM_CODES.UOM">
                        <a:mapping>
                            <a:map from="uom_code" to="uom_code"/>
                            <a:map from="uom_desc" to="uom_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="currency_desc"/>
                    <a:field name="currency_code" displayField="currency_code" options="inv5010_currency_ds" required="false" returnField="currency_desc" valueField="currency_name"/>
                </a:fields>
                <a:events>
                    <a:event name="add" handler="inv5010_create_add"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_encasements_ds" autoQuery="true" fetchAll="true" model="inv.INV5010.inv_asn_edit_encasements" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_encasements/query?asn_header_id=${/parameter/@asn_header_id}" selectable="true">
                <a:fields>
                    <a:field name="asn_header_id" defaultValue="${/parameter/@asn_header_id}"/>
                </a:fields>
                <a:events>
                    <a:event name="add" handler="inv5010_create_add"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="inv5010_asn_edit_contracts_ds" autoQuery="true" fetchAll="true" model="inv.INV5010.inv_asn_edit_contracts" queryUrl="${/request/@context_path}/autocrud/inv.INV5010.inv_asn_edit_contracts/query?asn_header_id=${/parameter/@asn_header_id}" selectable="true">
                <a:fields>
                    <a:field name="asn_header_id" defaultValue="${/parameter/@asn_header_id}"/>
                    <a:field name="currency_code" displayField="currency_code" options="inv5010_currency_ds" required="false" returnField="currency_desc" valueField="currency_name"/>
                    <a:field name="unit_desc" autoComplete="true" autoCompleteField="code_name" lovGridHeight="350" lovHeight="500" lovService="inv.INV5010.inv5010_uom_codes_lov" lovWidth="500" title="FND_UOM_CODES.UOM">
                        <a:mapping>
                            <a:map from="uom_code" to="unit"/>
                            <a:map from="uom_desc" to="unit_desc"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
                <a:events>
                    <a:event name="add" handler="inv5010_create_add"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:toolbarButton id="inv5010_asnEditLinesSave_btn" click="inv5010_asnEditLinesSave" style="margin-left:20px;" text="HAP_SAVE" width="100"/>
                <a:toolbarButton id="inv5010_asnEditLinesSubmit_btn" click="inv5010_asnEditLinesSubmit" style="margin-left:20px;" text="PROMPT.SUBMIT" width="100"/>
                <a:toolbarButton id="inv5010_asnEditLinesDelete_btn" click="inv5010_asnEditLinesDelete" style="margin-left:20px;" text="PROMPT.DELETE" width="100"/>
                <a:gridButton bind="inv5010_asn_edit_lines_ds_grid" className="item-rbtn-blue button-excel" type="excel" width="100"/>
                <a:toolbarButton click="inv5010_asnEditLinesAttachment" style="margin-left:20px;" text="PROMPT.ATTACHMENT" width="100"/>
                <a:toolbarButton click="inv5010_asnEditLinesBackToQuery" style="margin-left:20px;" text="HAP_BACK" width="100"/>
                <a:toolbarButton id="inv5010_asnEditLinesRecord_btn" click="inv5010_asnEditLinesRecord" style="margin-left:20px;" text="操作记录" width="100"/>
            </a:screenTopToolbar>
            <a:form marginWidth="70">
                <a:hBox labelWidth="90">
                    <a:label name="asn_number" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS.ASN_NUMBER" width="230"/>
                    <a:label name="vendor_name" bindTarget="inv5010_asn_edit_header_ds" prompt="PUR_VENDORS.VENDOR" width="230"/>
                    <a:label name="vendor_site_name" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS.SHIPMENT_LOCATION" width="300"/>
                    <a:datePicker name="ship_date" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS.SHIP_DATE" width="120"/>
                </a:hBox>
                <a:hBox labelWidth="90">
                    <a:label name="company_name" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS_TEMP.COMPANY_ID" width="230"/>
                    <a:label name="ship_to_organization_name" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS_TEMP.SHIP_TO_ORGANIZATION_ID" width="230"/>
                    <a:label name="location_name" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS_TEMP.LOCATION_ID" width="300"/>
                    <a:datePicker name="expected_date" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS_TEMP.EXPECTED_DATE" width="120"/>
                </a:hBox>
                <a:hBox labelWidth="90">
                    <a:comboBox name="asn_type_name" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS.ASN_TYPE" width="230"/>
                    <a:label name="actual_receiver_name" bindTarget="inv5010_asn_edit_header_ds" prompt="PUR_LINES_ALL.ACTUAL_RECEIVER_NAME" width="300"/>
                </a:hBox>
                <a:hBox labelWidth="90">
                    <a:textField name="comments" bindTarget="inv5010_asn_edit_header_ds" prompt="INV_ASN_HEADERS.HEADER_DESC" width="900"/>
                </a:hBox>
            </a:form>
            <a:tabPanel marginHeight="330" marginWidth="70">
                <a:tabs>
                    <a:tab prompt="物料信息" width="130">
                        <a:grid id="inv5010_asn_edit_lines_ds_grid" autoAppend="false" bindTarget="inv5010_asn_edit_lines_ds" marginHeight="370" marginWidth="85" navBar="false" style="margin:5px;">
                            <a:columns>
                                <a:column name="asn_line_num" align="center" lock="true" prompt="INV_ASN_LINES_TEMP.LINE_NUM" width="30"/>
                                <a:column name="display_po_number" align="center" lock="true" prompt="INV_ASN_LINES_TEMP.SEGMENT1" width="80"/>
                                <a:column name="po_line_num" align="center" lock="true" prompt="INV_ASN_HEADERS.LINE_NUM" width="40"/>
                                <a:column name="require_item_code" align="left" lock="true" prompt="INV_ASN_LINES_TEMP.ITEM_CODE" sortable="true" width="60"/>
                                <a:column name="require_item_name" align="left" lock="true" prompt="INV_ASN_LINES_TEMP.ITEM_NAME" sortable="true" width="100"/>
                                <a:column name="ship_quantity_max" align="right" prompt="PUR_LINE_LOCATIONS_ALL.QUANTITY_ENABLE_SHIPPED" renderer="Aurora.formatNumber" width="40"/>
                                <a:column name="ship_quantity" align="right" editor="inv5010_asn_edit_lines_ds_grid_numberField" prompt="PUR_LINE_LOCATIONS_ALL.SHIPPED_QUANTITY" width="50"/>
                                <a:column name="package_min_amount" align="right" prompt="最小包装量" width="50"/>
                                <a:column name="lots_num" align="center" editor="inv5010_asn_edit_lines_ds_grid_textField" prompt="INV_ASN_LINES_TEMP.LOTS_NUM" width="50"/>
                                <!-- 生产日期 -->
                                <a:column name="production_date" editor="inv5010_asn_edit_lines_ds_grid_datePicker" prompt="INV_ASN_LINES_TEMP.PRODUCTION_DATE" renderer="Aurora.formatDate" width="50"/>
                                <a:column name="isrosh" editor="inv5010_asn_edit_lines_ds_cbx" prompt="ROSH要求" width="40"/>
                                <!--  保质期 -->
                                <a:column name="quality_guarantee_date" prompt="INV_ASN_LINES_TEMP.QUALITY_GUARANTEE_DATE" width="40"/>
                                <a:column name="delivery_lead_days" align="right" prompt="送货提前期" width="50"/>
                                <a:column name="packet_weight" align="right" editor="inv5010_asn_edit_lines_ds_grid_numberField" prompt="单重" width="50"/>
                                <a:column name="uom_name" align="center" prompt="INV_ASN_LINES_TEMP.UNIT_MEAS_LOOKUP_CODE" width="40"/>
                                <a:column name="packet_quantity" align="left" editor="inv5010_asn_edit_lines_ds_grid_numberField" prompt="INV_ASN_LINES_TEMP.PACKET_QUANTITY" width="40"/>
                                <!-- 件数 -->
                                <a:column name="box_amount" prompt="INV_ASN_LINES_TEMP.BOX_AMOUNT" width="30"/>
                                <!-- 尾数 -->
                                <a:column name="mantissa_quantity" prompt="DZINV1010.MANTISSA_QUANTITY" width="30"/>
                                <a:column name="lots_validity_date" align="center" editor="inv5010_asn_edit_lines_ds_grid_datePicker" prompt="INV_ASN_LINES_TEMP.LOTS_VALIDITY_DATE" renderer="Aurora.formatDate" width="50"/>
                                <!-- <a:column name="serial_num" align="center" editor="inv5010_asn_edit_lines_ds_grid_textField" prompt="INV_ASN_LINES_TEMP.SERIAL_NUM" width="50"/> -->
                                <!-- <a:column name="invoice_num" align="center" editor="inv5010_asn_edit_lines_ds_grid_textField" prompt="INV_ASN_LINES_TEMP.INVOICE_NUM" width="50"/> -->
                                <!--  <a:column name="environmental_batch" align="left" editor="inv5010_asn_edit_lines_ds_grid_textField" prompt="INV_ASN_LINES_TEMP.ENVIRONMENTAL_BATCH" width="40"/>
                                <a:column name="box_weight" align="left" editor="inv5010_asn_edit_lines_ds_grid_numberField" prompt="INV_ASN_LINES_TEMP.BOX_WEIGHT" width="40"/> -->
                                <a:column name="comments" align="left" editor="inv5010_asn_edit_lines_ds_grid_textField" prompt="INV_ASN_LINES_TEMP.VENDOR_COMMENTS" width="100"/>
                                <a:column name="display_release_num" align="center" prompt="INV_ASN_LINES_TEMP.RELEASE_NUM" width="40"/>
                                <a:column name="shipment_num" align="center" prompt="INV_ASN_LINES_TEMP.SHIPMENT_NUM" width="40"/>
                                <a:column name="revision_num" align="center" prompt="INV_ASN_LINES_TEMP.REVISION_NUM" width="40"/>
                                <a:column name="del_plan_number" align="left" prompt="INV8010.DELIVERY_PLAN_NUMBER" sortable="true" width="60"/>
                                <a:column name="del_plan_line_num" align="left" prompt="送货计划行号" sortable="true" width="30"/>
                                <a:column name="need_del_quantity" align="left" prompt="要求送货数量" sortable="true" width="40"/>
                                <a:column name="need_arrive_date" align="left" prompt="要求送货日期" sortable="true" width="50"/>
                                <a:column name="send_address" align="left" prompt="送货地址" sortable="true" width="50"/>
                                <a:column name="need_by_date" align="center" prompt="INV_ASN_LINES_TEMP.NEED_BY_DATE" width="50"/>
                                <!-- <a:column name="request_arrival_date" align="center" prompt="INV_ASN_LINES_TEMP.PROMISED_DATE" renderer="Aurora.formatDate" width="80"/> -->
                                <!-- <a:column name="promised_date" align="center" prompt="INV_ASN_LINES_TEMP.PROMISED_DATE" width="50"/> -->
                                <!-- <a:column name="contacts_info" align="center" prompt="PUR_LINES_ALL.CONTACTS_INFO" width="80"/> -->
                                <!-- <a:column name="ean_code" align="left" prompt="PUR_LINES_ALL.EAN_CODE" sortable="true" width="80"/> -->
                                <!-- <a:column name="supply_item_code" align="left" prompt="INV_ASN_LINES_TEMP.VENDOR_ITEM_CODE" sortable="true" width="60"/> -->
                                <!-- <a:column name="supply_item_name" align="left" prompt="INV_ASN_LINES_TEMP.VENDOR_ITEM_NAME" sortable="true" width="100"/> -->
                                <a:column name="line_attachment" align="center" prompt="PROMPT.ATTACHMENT" renderer="inv5010_asnEditLinesDsGridRenderer" width="60"/>
                                <a:column name="operation_record" align="center" prompt="PROMPT.OPERATION_RECORD" renderer="inv5010_operation_records_render" width="50"/>
                            </a:columns>
                            <a:editors>
                                <a:comboBox id="inv5010_asn_edit_lines_ds_cbx"/>
                                <a:textField id="inv5010_asn_edit_lines_ds_grid_textField"/>
                                <a:datePicker id="inv5010_asn_edit_lines_ds_grid_datePicker"/>
                                <a:numberField id="inv5010_asn_edit_lines_ds_grid_numberField" allowDecimals="true" allowFormat="true" allowNegative="false" decimalPrecision="4"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="PROMPT.LOGISTICS_INFO" width="130">
                        <a:vBox labelWidth="90" style="margin:5px;">
                            <a:hBox>
                                <a:lov name="logistics_company" bindTarget="inv5010_asn_edit_header_ds" maxLength="200" prompt="INV_ASN_HEADERS_TEMP.LOGISTICS_COMPANY" width="230"/>
                            </a:hBox>
                            <a:hBox>
                                <a:textField name="dispatching_staff" bindTarget="inv5010_asn_edit_header_ds" maxLength="200" prompt="INV_ASN_HEADERS_TEMP.DELIVERY_STAFF" width="230"/>
                            </a:hBox>
                            <a:hBox>
                                <a:textField name="contact_information" bindTarget="inv5010_asn_edit_header_ds" maxLength="200" prompt="FND1000.CONTACT_INFO" width="230"/>
                            </a:hBox>
                            <a:hBox>
                                <a:textField name="logistics_cost" bindTarget="inv5010_asn_edit_header_ds" maxLength="200" prompt="INV_ASN_HEADERS_TEMP.LOGISTICS_COST" width="230"/>
                            </a:hBox>
                            <a:hBox>
                                <a:textField name="express_number" bindTarget="inv5010_asn_edit_header_ds" maxLength="200" prompt="INV_ASN_HEADERS_TEMP.EXPRESS_NUMBER" width="230"/>
                            </a:hBox>
                        </a:vBox>
                    </a:tab>
                    <a:tab prompt="申报要素" width="130">
                        <a:grid id="inv5010_asn_edit_declares_ds_grid" autoAppend="false" bindTarget="inv5010_asn_edit_declares_ds" marginHeight="370" marginWidth="85" navBar="false" style="margin:5px;">
                            <a:toolBar>
                                <a:button type="add"/>
                                <a:button type="delete"/>
                                <a:button type="save"/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="line_num" align="right" prompt="序号" sortable="true" width="30"/>
                                <a:column name="order_details" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="订购明细" sortable="true" width="100"/>
                                <a:column name="item_code" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="商品编码" sortable="true" width="100"/>
                                <a:column name="brand_type" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="品牌类型" sortable="true" width="80"/>
                                <a:column name="export_benefits" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="出口享惠情况" sortable="true" width="80"/>
                                <a:column name="trade_name" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="品名" sortable="true" width="80"/>
                                <a:column name="shape" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="形状" sortable="true" width="80"/>
                                <a:column name="texture" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="材质" sortable="true" width="80"/>
                                <a:column name="state" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="状态" sortable="true" width="80"/>
                                <a:column name="component_content" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="成分含量" sortable="true" width="80"/>
                                <a:column name="overall_thickness" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="整体厚度（MM）" sortable="true" width="80"/>
                                <a:column name="copper_thickness" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="铜箔厚度（填写单面铜厚um*2）" sortable="true" width="80"/>
                                <a:column name="length" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="长度（MM）" sortable="true" width="80"/>
                                <a:column name="width" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="宽度（MM）" sortable="true" width="80"/>
                                <a:column name="purpose" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="用途" sortable="true" width="80"/>
                                <a:column name="brand" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="品牌" sortable="true" width="80"/>
                                <a:column name="mark" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="牌号" sortable="true" width="80"/>
                                <a:column name="kind" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="种类" sortable="true" width="80"/>
                                <a:column name="plies" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="覆铜板的铜箔层数" sortable="true" width="80"/>
                                <a:column name="substrate_material" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="基材材质" sortable="true" width="80"/>
                                <a:column name="manufacturer" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="生产厂商" sortable="true" width="80"/>
                                <a:column name="dielectric_constant" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="覆铜板需申报介电常数" sortable="true" width="80"/>
                                <a:column name="single_or_double" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="覆铜板报单面还是双面" sortable="true" width="80"/>
                                <a:column name="material_of_substrate" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="覆铜板基板材质" sortable="true" width="80"/>
                                <a:column name="package" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="包装" width="80"/>
                                <a:column name="color" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="颜色" width="80"/>
                                <a:column name="comment_place" align="left" editorFunction="inv5010_AsnEditDeclaresGridEditorFunction" prompt="备注：产地" width="80"/>
                                <a:column name="declaration_type" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="报关型号" sortable="true" width="80"/>
                                <a:column name="vendor_site" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="供应商地点" sortable="true" width="80"/>
                                <a:column name="working_voltage" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="工作电压" sortable="true" width="80"/>
                                <a:column name="lot_no" align="left" editor="inv5010_asn_edit_declares_ds_grid_textField" prompt="LOT NO" sortable="true" width="80"/>
                            </a:columns>
                            <a:editors>
                                <a:textField id="inv5010_asn_edit_declares_ds_grid_textField"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="发票" width="130">
                        <a:grid id="inv5010_asn_edit_invoices_ds_grid" autoAppend="false" bindTarget="inv5010_asn_edit_invoices_ds" marginHeight="370" marginWidth="85" navBar="false" style="margin:5px;">
                            <a:toolBar>
                                <a:button type="add"/>
                                <a:button type="delete"/>
                                <a:button type="save"/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="line_num" align="right" prompt="序号" sortable="true" width="30"/>
                                <a:column name="item_code" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="物料编码" sortable="true" width="100"/>
                                <a:column name="trade_name" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="品名" sortable="true" width="100"/>
                                <a:column name="spec" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="规格" sortable="true" width="100"/>
                                <a:column name="quantity" align="right" editor="inv5010_asn_edit_invoices_ds_grid_numberField" prompt="数量" sortable="true" width="40"/>
                                <a:column name="unit_price" align="right" editor="inv5010_asn_edit_invoices_ds_grid_numberField" prompt="单价" sortable="true" width="40"/>
                                <a:column name="line_amount" align="right" editor="inv5010_asn_edit_invoices_ds_grid_numberField" prompt="总价" sortable="true" width="40"/>
                                <a:column name="currency_code" align="right" editor="inv5010_asn_edit_invoices_ds_grid_comboBox" prompt="币种" sortable="true" width="40"/>
                                <a:column name="delivery_num" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="出货单号" sortable="true" width="100"/>
                                <a:column name="delivery_date" align="center" editor="inv5010_asn_edit_invoices_ds_grid_datePicker" prompt="出货日期" renderer="Aurora.formatDate" sortable="true" width="100"/>
                                <a:column name="net_weight" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="重量（KG）" sortable="true" width="100"/>
                                <a:column name="uom_desc" align="left" editor="inv5010_asn_edit_invoices_ds_grid_lv" prompt="单位" sortable="true" width="100"/>
                                <a:column name="brand_name" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="品牌" sortable="true" width="100"/>
                                <a:column name="origin_country" align="left" editor="inv5010_asn_edit_invoices_ds_grid_textField" prompt="原产地" sortable="true" width="100"/>
                            </a:columns>
                            <a:editors>
                                <a:lov id="inv5010_asn_edit_invoices_ds_grid_lv"/>
                                <a:textField id="inv5010_asn_edit_invoices_ds_grid_textField"/>
                                <a:comboBox id="inv5010_asn_edit_invoices_ds_grid_comboBox"/>
                                <a:datePicker id="inv5010_asn_edit_invoices_ds_grid_datePicker"/>
                                <a:numberField id="inv5010_asn_edit_invoices_ds_grid_numberField" allowDecimals="true" allowFormat="true" allowNegative="false" decimalPrecision="4"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="装箱单" width="130">
                        <a:grid id="inv5010_asn_edit_encasements_ds_grid" autoAppend="false" bindTarget="inv5010_asn_edit_encasements_ds" marginHeight="370" marginWidth="85" navBar="false" style="margin:5px;">
                            <a:toolBar>
                                <a:button type="add"/>
                                <a:button type="delete"/>
                                <a:button type="save"/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="line_num" align="right" prompt="序号" sortable="true" width="30"/>
                                <a:column name="item_code" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="物料编码" sortable="true" width="100"/>
                                <a:column name="trade_name" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="品名 规格" sortable="true" width="100"/>
                                <!-- <a:column name="mark_case_no" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="标志及箱号" sortable="true" width="100"/> -->
                                <a:column name="wooden_num" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="卡托数" sortable="true" width="80"/>
                                <a:column name="numbers" align="left" editor="inv5010_asn_edit_encasements_ds_grid_numberField" prompt="件数/箱" sortable="true" width="80"/>
                                <a:column name="brand_name" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="品牌" sortable="true" width="80"/>
                                <a:column name="producing_area" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="产地" sortable="true" width="80"/>
                                <a:column name="batch_number" align="left" editor="inv5010_asn_edit_encasements_ds_grid_numberField" prompt="批次号" sortable="true" width="80"/>
                                <a:column name="packaging_type" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="包装种类" sortable="true" width="80"/>
                                <a:column name="quantity" align="right" editor="inv5010_asn_edit_encasements_ds_grid_numberField" prompt="数量" sortable="true" width="40"/>
                                <a:column name="unit" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="单位" sortable="true" width="80"/>
                                <a:column name="net_weight" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="净重(KG)" sortable="true" width="80"/>
                                <a:column name="rough_weight" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="毛重(KG)" sortable="true" width="80"/>
                                <a:column name="po_num" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="订单号" sortable="true" width="80"/>
                                <a:column name="contract_num" align="left" editor="inv5010_asn_edit_encasements_ds_grid_textField" prompt="合同号" sortable="true" width="80"/>
                                <a:column name="main_agent_kg" align="left" editorFunction="inv5010_asn_edit_encasements_ds_grid_editFcn" prompt="主剂(KG/罐)" sortable="true" width="80"/>
                                <a:column name="hardener_kg" align="left" editorFunction="inv5010_asn_edit_encasements_ds_grid_editFcn" prompt="硬化剂(KG/罐)" sortable="true" width="80"/>
                                <a:column name="main_agent_tank" align="left" editorFunction="inv5010_asn_edit_encasements_ds_grid_editFcn" prompt="主剂(罐/箱)" sortable="true" width="80"/>
                                <a:column name="hardener_tank" align="left" editorFunction="inv5010_asn_edit_encasements_ds_grid_editFcn" prompt="硬化剂(罐/箱)" sortable="true" width="80"/>
                            </a:columns>
                            <a:editors>
                                <a:textField id="inv5010_asn_edit_encasements_ds_grid_textField"/>
                                <a:numberField id="inv5010_asn_edit_encasements_ds_grid_numberField" allowDecimals="true" allowFormat="true" allowNegative="false" decimalPrecision="4"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="合同" width="130">
                        <a:grid id="inv5010_asn_edit_contracts_ds_grid" autoAppend="false" bindTarget="inv5010_asn_edit_contracts_ds" marginHeight="370" marginWidth="85" navBar="false" style="margin:5px;">
                            <a:toolBar>
                                <a:button type="add"/>
                                <a:button type="delete"/>
                                <a:button type="save"/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="line_num" align="right" lock="true" prompt="序号" sortable="true" width="30"/>
                                <a:column name="product_name" align="right" editor="inv5010_asn_edit_contracts_ds_grid_tf" lock="true" prompt="品名" sortable="true" width="80"/>
                                <a:column name="model_type" align="left" editor="inv5010_asn_edit_contracts_ds_grid_tf" lock="true" prompt="规格型号" sortable="true" width="100"/>
                                <a:column name="quantity" align="left" editor="inv5010_asn_edit_contracts_ds_grid_nf" lock="true" prompt="数量" sortable="true" width="80"/>
                                <a:column name="unit_price" align="left" editor="inv5010_asn_edit_contracts_ds_grid_nf" lock="true" prompt="单价" sortable="true" width="80"/>
                                <!-- <a:column name="unit_desc" align="left" editor="inv5010_asn_edit_contracts_ds_grid_lv" prompt="单位" sortable="true" width="80"/> -->
                                <a:column name="total_price" align="left" editor="inv5010_asn_edit_contracts_ds_grid_nf" prompt="总价" sortable="true" width="80"/>
                                <a:column name="currency_code" align="left" editor="inv5010_asn_edit_contracts_ds_grid_cbb" prompt="币种" sortable="true" width="80"/>
                                <a:column name="brand_name" align="left" editor="inv5010_asn_edit_contracts_ds_grid_tf" prompt="品牌" sortable="true" width="80"/>
                                <a:column name="producing_area" align="left" editor="inv5010_asn_edit_contracts_ds_grid_tf" prompt="原产地" sortable="true" width="80"/>
                                <a:column name="delivery_port" align="right" editor="inv5010_asn_edit_contracts_ds_grid_tf" prompt="交货口岸" sortable="true" width="80"/>
                                <a:column name="delivery_place" align="left" editor="inv5010_asn_edit_contracts_ds_grid_tf" prompt="交货地点" sortable="true" width="80"/>
                                <a:column name="delivery_term" align="left" editor="inv5010_asn_edit_contracts_ds_grid_nf" prompt="交货期限" sortable="true" width="80"/>
                                <a:column name="payment_method" align="left" editor="inv5010_asn_edit_contracts_ds_grid_tf" prompt="付款方式" sortable="true" width="80"/>
                            </a:columns>
                            <a:editors>
                                <a:lov id="inv5010_asn_edit_contracts_ds_grid_lv"/>
                                <a:comboBox id="inv5010_asn_edit_contracts_ds_grid_cbb"/>
                                <a:textField id="inv5010_asn_edit_contracts_ds_grid_tf"/>
                                <a:numberField id="inv5010_asn_edit_contracts_ds_grid_nf" allowDecimals="true" allowFormat="true" allowNegative="false" decimalPrecision="4"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                </a:tabs>
            </a:tabPanel>
        </a:screenBody>
    </a:view>
</a:screen>
