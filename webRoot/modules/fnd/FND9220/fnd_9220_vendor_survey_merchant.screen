<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: weiqinglong
    $Date: 2015-3-11 上午9:43:23  
    $Revision: 1.0  
    $Purpose: 企业信息补录下的供应商调查表——贸易商
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:init-procedure>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_INDUSTRY_RANKS&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_industry_rank"/>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_PACKING_METHOLD&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_packing_methold"/>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_CERTIFICATION&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_certification"/>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_DEVICE_TYPE&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_device_type"/>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_CUSTOMER_SATISFACTION&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_satisfaction"/>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;FND_COOPERATION_FREQUENCY&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_merchant_cooperation_frequency"/>
    </a:init-procedure>
    <a:view package="aurora.ui.std" template="default">
        <a:link id="fnd9220_vendorSurveymerchantUpload_link" url="${/request/@context_path}/uploadFile.screen"/>
        <a:link id="fnd9220_attachment_file_upload_link1" url="${/request/@context_path}/uploadFile.screen"/>
        <div/>
        <script><![CDATA[
            //关闭
            
            function fnd9220_vendorSurveyMerchant_cancelFun() {
                $('fnd9220_vendor_survey_merchant_window').close();
            }
            
            function fnd9220_onVendorSurveyBasicInfoDs_loadFun(dataSet) {
                if (dataSet.getAll().length == 0) {
                    dataSet.create();
                }
            }
            
            function fnd9220_onVendorSurveyMerchantBusinessDs_loadFun(dataSet) {
                if (dataSet.getAll().length == 0) {
                    dataSet.create();
                }
            }
            
            function fnd9220_onVendorSurveyBasicInfoDs_submitsuccessFun() {
                Aurora.showMessage('${l:PROMPT}', '保存成功！', null);
                $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                $('fnd9220_vendorSurveyBasicInfo').query();
            }
            
            function fnd9220_onVendorSurveyBasicInfoDs_submitfailedFun() {
                $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
            }
            
            function fnd9220_onVendorSurveyMerchantBusinessDs_submitsuccessFun() {
                $('fnd9220_vendorSurveyMerchantBusiness_ds').query();
            }
            
            function fnd9220_onVendorSurveyMerchantBranchDs_submitsuccessFun() {
                $('fnd9220_vendorSurveyMerchantBranch_ds').query();
            }
            
            function fnd9220_onvendorSurveyMerchantAuthenticateDs_submitsuccessFun() {
                $('fnd9220_vendorSurveyMerchantAuthenticate_ds').query();
            }
            
            function fnd9220_onVendorSurveyMerchantProCapacityDs_submitsuccessFun() {
                $('fnd9220_vendorSurveyMerchantProCapacity_ds').query();
            }
            
            function fnd9220_onvendorSurveyMerchantCustomerDs_submitsuccessFun() {
                $('fnd9220_vendorSurveyMerchantCustomer_ds').query();
            }
            
            
            //地点tab事件
            
            function fnd9220_branchCellClick_fun(grid, row, name, record) {
                //国家、地区、城市级联更新
                if (Ext.isEmpty(record.get('country_name')) || record.get('country_name') == undefined) {
                    record.set('country_code', '');
                    record.getField("province_name").setLovService('');
                    record.getField("city_name").setLovService('');
            
                    record.getField('province_name').setReadOnly(true);
                    record.getField('city_name').setReadOnly(true);
                } else {
                    var temp_string = record.get('country_code');
                    record.getField("city_name").setLovService('');
                    record.getField("province_name").setLovService('public.fnd_region_province_lov');
                    record.getField("province_name").setLovPara('country_code', temp_string);
            
                    record.getField('province_name').setReadOnly(false);
                }
                if (Ext.isEmpty(record.get('province_name')) || record.get('province_name') == undefined) {
                    record.set('province_id', '');
                    record.getField("city_name").setLovService('');
            
                    record.getField('city_name').setReadOnly(true);
                } else {
                    record.getField("city_name").setLovService('public.fnd_region_city_lov');
                    record.getField("city_name").setLovPara('province_id', record.get('province_id'));
                    record.getField('city_name').setReadOnly(false);
                }
            
            }
            //保存
            
            function fnd9220_vendorSurveyMerchant_saveFun() {
                
                $('fnd9220_vendorSurveyMerchant_saveBtu').disable();
                $('fnd9220_vendorSurveyMerchant_cancelBtu').disable();
                
                if (!$('fnd9220_vendorSurveyMerchantBusiness_ds').validate()) {
                    $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                    $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                    $('fnd_9220_vendor_survey_merchant_tabpanel_id').selectTab(0);
                    return;
                }
                if (!$('fnd9220_vendorSurveyMerchantBranch_ds').validate()) {
                    $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                    $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                    $('fnd_9220_vendor_survey_merchant_tabpanel_id').selectTab(1);
                    return;
                }
                if (!$('fnd9220_vendorSurveyMerchantAuthenticate_ds').validate()) {
                    $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                    $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                    $('fnd_9220_vendor_survey_merchant_tabpanel_id').selectTab(2);
                    return;
                }
                if (!$('fnd9220_vendorSurveyMerchantProCapacity_ds').validate()) {
                    $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                    $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                    $('fnd_9220_vendor_survey_merchant_tabpanel_id').selectTab(3);
                    return;
                }
                if (!$('fnd9220_vendorSurveyMerchantCustomer_ds').validate()) {
                    $('fnd9220_vendorSurveyMerchant_saveBtu').enable();
                    $('fnd9220_vendorSurveyMerchant_cancelBtu').enable();
                    $('fnd_9220_vendor_survey_merchant_tabpanel_id').selectTab(4);
                    return;
                }
                $('fnd9220_vendorSurveyBasicInfo').submit();
            }
            
            //附件上传和下载
            
            function fnd9220_vendorSurveyMerchant_rendererFun(value, record, name) {
                var supplier_id = record.get('supplier_id');
                return '<a style="color:blue" href="javascript:fnd9220_vendorSurveyMerchant_uploadFun(' + supplier_id + ')">上传附件</a>';
            }
            
            function fnd9220_vendorSurveyMerchant_uploadFun(id) {
                new Aurora.Window({
                    id: 'fnd9220_attachment_file_upload_link1_window',
                    title: '${l:HAP_UPLOAD_TITLE}',
                    url: $('fnd9220_attachment_file_upload_link1').getUrl() + '?header_id=${/parameter/@supplier_id}&table_name=FND_VENDOR_SURVEY_BASIC_INFO_ME',
                    width: 610,
                    height: 500
                }).on('close', function() { //关闭附件上传页面，执行的方法，刷新附件信息grid
                    //$('fnd9220_companySupplierAttachments_ds').query();
                });
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="fnd9220_merchantIndustryRank_ds">
                <a:datas dataSource="fnd9220_merchant_industry_rank"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_merchant_packing_methold_ds">
                <a:datas dataSource="fnd9220_merchant_packing_methold"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_merchantCertification_ds">
                <a:datas dataSource="fnd9220_merchant_certification"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_merchantDeviceType_ds">
                <a:datas dataSource="fnd9220_merchant_device_type"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_merchantSatisfaction_ds">
                <a:datas dataSource="fnd9220_merchant_satisfaction"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_merchantCooperation_frequency_ds">
                <a:datas dataSource="fnd9220_merchant_cooperation_frequency"/>
            </a:dataSet>
            <!-- INFORMATION HEAD -->
            <a:dataSet id="fnd9220_vendorSurveyHeadInfo" autoQuery="true" model="fnd.FND9220.fnd_9220_vendor_survey_head_info" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_head_info/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT">
                <a:fields>
                    <a:field name="survey_type_name" defaultValue="贸易商"/>
                    <a:field name="company_code" prompt="FND_COMPANY.COMPANY_CODE" readOnly="true"/>
                    <a:field name="company_full_name" prompt="FND_COMPANIES.FULL_NAME" readOnly="true"/>
                    <a:field name="company_short_name" prompt="FND_COMPANIES.SHORT_NAME" readOnly="true"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="fnd9220_vendorSurveyBasicInfo" autoQuery="true" model="fnd.FND9220.fnd_9220_vendor_survey_basic_info" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_basic_info/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT" submitUrl="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_vendor_survey_save.svc">
                <a:fields>
                    <a:field name="basic_info_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="survey_type_name" defaultValue="贸易商"/>
                    <a:field name="tax_type_codes_bg_id"/>
                    <a:field name="tax_type_name" lovHeight="500" lovService="fnd.FND9220.fnd_9220_tax_type_codes_bg_lov" lovWidth="500" prompt="税率" title="税率">
                        <a:mapping>
                            <a:map from="tax_type_codes_bg_id" to="tax_type_codes_bg_id"/>
                            <a:map from="tax_type_name" to="tax_type_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="payment_method_id"/>
                    <a:field name="payment_method_name" lovHeight="500" lovService="fnd.FND9220.fnd_9220_payment_methods_lov" lovWidth="500" prompt="付款方式" title="付款方式">
                        <a:mapping>
                            <a:map from="payment_method_id" to="payment_method_id"/>
                            <a:map from="description" to="payment_method_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="payment_term_id"/>
                    <a:field name="payment_terms" lovHeight="500" lovService="fnd.FND9220.fnd_9220_payment_terms_lov" lovWidth="500" prompt="付款条款" title="付款条款">
                        <a:mapping>
                            <a:map from="payment_term_id" to="payment_term_id"/>
                            <a:map from="description" to="payment_terms"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="chairman_board"/>
                    <a:field name="general_manager"/>
                    <a:field name="listed_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="listed_place"/>
                    <a:field name="listed_date"/>
                    <a:field name="staff_count"/>
                    <a:field name="management_staff_count"/>
                    <a:field name="technical_staff_count"/>
                    <a:field name="production_staff_count"/>
                    <a:field name="rd_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="rd_staff_count"/>
                    <a:field name="building_area"/>
                    <a:field name="industry_ranks"/>
                    <a:field name="industry_ranks_desc" displayField="flex_desc" options="fnd9220_merchantIndustryRank_ds" returnField="industry_ranks" valueField="flex_value"/>
                    <a:field name="others"/>
                    <a:field name="international_top5"/>
                    <a:field name="domestic_top5"/>
                    <a:field name="iso9001_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="iso9001_date"/>
                    <a:field name="iso9002_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="iso9002_date"/>
                    <a:field name="iso14001_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="iso14001_date"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="fnd9220_onVendorSurveyBasicInfoDs_loadFun"/>
                    <a:event name="submitsuccess" handler="fnd9220_onVendorSurveyBasicInfoDs_submitsuccessFun"/>
                    <a:event name="submitfailed" handler="fnd9220_onVendorSurveyBasicInfoDs_submitfailedFun"/>
                </a:events>
            </a:dataSet>
            <!-- BUSINESS -->
            <a:dataSet id="fnd9220_vendorSurveyMerchantBusiness_ds" autoQuery="true" bindName="business" bindTarget="fnd9220_vendorSurveyBasicInfo" model="fnd.FND9220.fnd_9220_vendor_survey_business" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_business/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT">
                <a:fields>
                    <a:field name="business_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="inspection_agency"/>
                    <a:field name="inspection_staffcount"/>
                    <a:field name="incoming_inspection_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="ex_factory_inspection_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="production_inspection_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="qulity_keypoint_control_desc"/>
                    <a:field name="working_days_per_week"/>
                    <a:field name="working_shifts_per_day"/>
                    <a:field name="working_hours_per_day"/>
                    <a:field name="current_production_load"/>
                    <a:field name="maximum_production_load"/>
                    <a:field name="off_season"/>
                    <a:field name="busy_season"/>
                    <a:field name="authorized_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="packing_methold"/>
                    <a:field name="packing_methold_desc" displayField="flex_desc" options="fnd9220_merchant_packing_methold_ds" returnField="packing_methold" valueField="flex_value"/>
                    <a:field name="main_distribution_channel"/>
                    <a:field name="land_transport_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="sea_transport_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="air_transport_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="descriptions"/>
                    <a:field name="warranty_date"/>
                    <a:field name="warranty_party"/>
                    <a:field name="field_maintenance_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="service_network_count"/>
                    <a:field name="service_network_address"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="fnd9220_onVendorSurveyMerchantBusinessDs_loadFun"/>
                    <a:event name="submitSuccess" handler="fnd9220_onVendorSurveyMerchantBusinessDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd9220_vendorSurveyMerchantBranch_ds" autoQuery="true" bindName="branch" bindTarget="fnd9220_vendorSurveyBasicInfo" model="fnd.FND9220.fnd_9220_vendor_survey_branch" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_branch/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT" selectable="true">
                <a:fields>
                    <a:field name="branch_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="country_code"/>
                    <a:field name="country_name" lovHeight="500" lovService="public.fnd_country_lov" lovWidth="500" required="true" requiredMessage="${l:FND_COM_SUP_ADDRESSES.COUNTRY_CODE}${l:PROMPT.INPUT}" title="FND_COM_SUP_ADDRESSES.COUNTRY_CODE_CHOOSE">
                        <a:mapping>
                            <a:map from="country_code" to="country_code"/>
                            <a:map from="country_name" to="country_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="province_id"/>
                    <a:field name="province_name" lovHeight="500" lovWidth="500" readOnly="true" title="FND_COM_SUP_ADDRESSES.PROVINCE_CHOOSE">
                        <a:mapping>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_name" to="province_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="city_id"/>
                    <a:field name="city_name" lovHeight="500" lovWidth="500" readOnly="true" title="FND_COM_SUP_ADDRESSES.CITY_CHOOSE">
                        <a:mapping>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_name" to="city_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="charge_person"/>
                    <a:field name="telephone"/>
                    <a:field name="fax"/>
                    <a:field name="email"/>
                    <a:field name="description"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onVendorSurveyMerchantBranchDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- AUTHENTICATE -->
            <a:dataSet id="fnd9220_vendorSurveyMerchantAuthenticate_ds" autoQuery="true" bindName="authenticate" bindTarget="fnd9220_vendorSurveyBasicInfo" model="fnd.FND9220.fnd_9220_vendor_survey_authenticate" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_authenticate/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT" selectable="true">
                <a:fields>
                    <a:field name="authenticate_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="authenticate_type_code"/>
                    <a:field name="authenticate_type_desc" displayField="flex_desc" options="fnd9220_merchantCertification_ds" required="true" returnField="authenticate_type_code" valueField="flex_value"/>
                    <a:field name="authenticate_description" required="true"/>
                    <a:field name="authenticate_number"/>
                    <a:field name="authenticate_date"/>
                    <a:field name="certification_org"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onvendorSurveyMerchantAuthenticateDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- PRODUCT_CAPACITY -->
            <a:dataSet id="fnd9220_vendorSurveyMerchantProCapacity_ds" autoQuery="true" bindName="product_capacity" bindTarget="fnd9220_vendorSurveyBasicInfo" model="fnd.FND9220.fnd_9220_vendor_survey_pro_capacity" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_pro_capacity/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT" selectable="true">
                <a:fields>
                    <a:field name="product_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="product_name" required="true"/>
                    <a:field name="product_brand"/>
                    <a:field name="main_craftwork"/>
                    <a:field name="annual_yield"/>
                    <a:field name="product_conformity_rate"/>
                    <a:field name="annual_turnover"/>
                    <a:field name="typical_customers"/>
                    <a:field name="customer_satisfaction_per"/>
                    <a:field name="customer_satisfaction_per_desc" displayField="flex_desc" options="fnd9220_merchantSatisfaction_ds" returnField="customer_satisfaction_per" valueField="flex_value"/>
                    <a:field name="manufacturer"/>
                    <a:field name="business_nature"/>
                    <a:field name="agency_level"/>
                    <a:field name="agency_region"/>
                    <a:field name="description"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onVendorSurveyMerchantProCapacityDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- CUSTOMER -->
            <a:dataSet id="fnd9220_vendorSurveyMerchantCustomer_ds" autoQuery="true" bindName="customer" bindTarget="fnd9220_vendorSurveyBasicInfo" model="fnd.FND9220.fnd_9220_vendor_survey_customer" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_vendor_survey_customer/query?supplier_id=${/parameter/@supplier_id}&amp;survey_type_code=20_MERCHANT" selectable="true">
                <a:fields>
                    <a:field name="customer_id"/>
                    <a:field name="supplier_id" defaultValue="${/parameter/@supplier_id}"/>
                    <a:field name="survey_type_code" defaultValue="20_MERCHANT"/>
                    <a:field name="customer_name" required="true"/>
                    <a:field name="cooperation_frequency_code"/>
                    <a:field name="cooperation_frequency_desc" displayField="flex_desc" options="fnd9220_merchantCooperation_frequency_ds" returnField="cooperation_frequency_code" valueField="flex_value"/>
                    <a:field name="belong_regions"/>
                    <a:field name="sales_volume"/>
                    <a:field name="sales"/>
                    <a:field name="description"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onvendorSurveyMerchantCustomerDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:toolbarButton id="fnd9220_vendorSurveyMerchant_saveBtu" click="fnd9220_vendorSurveyMerchant_saveFun" style="margin-left:20px;" text="HAP_SAVE" width="100"/>
                <a:toolbarButton id="fnd9220_vendorSurveyMerchant_cancelBtu" click="fnd9220_vendorSurveyMerchant_cancelFun" text="PROMPT.CLOSE" width="100"/>
            </a:screenTopToolbar>
            <a:hBox>
                <a:vBox>
                    <a:vBox>
                        <a:hBox labelWidth="120">
                            <a:textField name="company_full_name" bindTarget="fnd9220_vendorSurveyHeadInfo" width="427"/>
                        </a:hBox>
                        <a:hBox labelWidth="120">
                            <a:textField name="company_code" bindTarget="fnd9220_vendorSurveyHeadInfo"/>
                            <a:textField name="company_short_name" bindTarget="fnd9220_vendorSurveyHeadInfo"/>
                            <a:textField name="survey_type_name" bindTarget="fnd9220_vendorSurveyHeadInfo" prompt="调查表类型" readOnly="true"/>
                        </a:hBox>
                        <a:hBox labelWidth="120">
                            <a:lov name="tax_type_name" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="税率"/>
                            <a:lov name="payment_method_name" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="付款方式"/>
                            <a:lov name="payment_terms" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="付款条款"/>
                        </a:hBox>
                    </a:vBox>
                    <a:tabPanel id="fnd_9220_vendor_survey_merchant_tabpanel_id" marginWidth="300">
                        <a:tabs>
                            <a:tab prompt="FND9220.BASIC_INFORMATION" selected="true" width="100">
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="经营状况">
                                    <a:hBox labelWidth="120">
                                        <a:textField name="chairman_board" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="董事长" readOnly="false"/>
                                        <a:textField name="general_manager" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="总经理" readOnly="false"/>
                                        <a:label name="organization" id="fnd9220_vendorSurveyMerchant_uploadBtu" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="公司组织架构" renderer="fnd9220_vendorSurveyMerchant_rendererFun"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="listed_flag" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="是否上市" width="153"/>
                                        <a:textField name="listed_place" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="上市地点" readOnly="false"/>
                                        <a:datePicker name="listed_date" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="上市时间" readOnly="false" renderer="Aurora.formatDate"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="公司规模">
                                    <a:hBox labelWidth="120">
                                        <a:numberField name="staff_count" allowDecimals="false" allowNegative="false" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="员工数量" readOnly="false"/>
                                        <a:numberField name="management_staff_count" allowDecimals="false" allowNegative="false" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="管理人员数量" readOnly="false"/>
                                        <a:textField name="building_area" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="建筑面积" readOnly="false"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="代理/经销情况">
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="authorized_flag" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="是否有授权" width="153"/>
                                        <a:comboBox name="packing_methold_desc" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="包装方式"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:textArea name="main_distribution_channel" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="主要分销渠道" width="427"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="货运方式 ">
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="air_transport_flag" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="空运" width="153"/>
                                        <a:checkBox name="sea_transport_flag" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="海运" width="153"/>
                                        <a:checkBox name="land_transport_flag" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="陆运" width="153"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:textField name="descriptions" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="备注"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="售后服务">
                                    <a:hBox labelWidth="120">
                                        <a:textField name="warranty_date" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="保修期" readOnly="false"/>
                                        <a:checkBox name="field_maintenance_flag" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="可否现场维修" width="153"/>
                                        <a:numberField name="service_network_count" allowDecimals="false" allowNegative="false" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" prompt="售后服务网点数" readOnly="false"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:textArea name="service_network_address" bindTarget="fnd9220_vendorSurveyMerchantBusiness_ds" emptyText="请输入服务网点地址，不超过500个汉字。" prompt="服务网点地址" width="427"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="整体实力">
                                    <a:hBox labelWidth="120">
                                        <a:comboBox name="industry_ranks_desc" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="行业排名" readOnly="false"/>
                                        <a:textField name="others" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="其它" readOnly="false"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:textArea name="international_top5" bindTarget="fnd9220_vendorSurveyBasicInfo" emptyText="请输入国内际行前五名，不超过100字。" prompt="国际同行前五" width="427"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:textArea name="domestic_top5" bindTarget="fnd9220_vendorSurveyBasicInfo" emptyText="请输入国内同行前五名，不超过100字。" prompt="国内同行前五" readOnly="false" width="427"/>
                                    </a:hBox>
                                </a:fieldSet>
                            </a:tab>
                            <a:tab prompt="分支机构" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_vendorSurveyMerchantBranch_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="country_name" align="center" editor="fnd9220_MerchantBranch_lov" prompt="国家" width="120"/>
                                        <a:column name="province_name" align="center" editor="fnd9220_MerchantBranch_lov" prompt="地区" width="120"/>
                                        <a:column name="city_name" align="center" editor="fnd9220_MerchantBranch_lov" prompt="城市" width="120"/>
                                        <a:column name="charge_person" align="left" editor="fnd9220_MerchantBranch_tf" prompt="负责人" width="120"/>
                                        <a:column name="telephone" align="left" editor="fnd9220_MerchantBranch_tf" prompt="联系电话" width="120"/>
                                        <a:column name="fax" align="left" editor="fnd9220_MerchantBranch_tf" prompt="传真" width="120"/>
                                        <a:column name="email" align="left" editor="fnd9220_MerchantBranch_tf" prompt="邮箱" width="120"/>
                                        <a:column name="description" align="left" editor="fnd9220_MerchantBranch_tf" prompt="备注" width="120"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="fnd9220_MerchantBranch_lov"/>
                                        <a:textField id="fnd9220_MerchantBranch_tf"/>
                                    </a:editors>
                                    <a:events>
                                        <a:event name="cellclick" handler="fnd9220_branchCellClick_fun"/>
                                    </a:events>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="管理体系信息" width="100">
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="基本认证">
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="iso9001_flag" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="ISO9001认证" width="153"/>
                                        <a:datePicker name="iso9001_date" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="认证时间" renderer="Aurora.formatDate"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="iso9002_flag" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="ISO9002认证" width="153"/>
                                        <a:datePicker name="iso9002_date" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="认证时间" renderer="Aurora.formatDate"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="120">
                                        <a:checkBox name="iso14001_flag" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="ISO14001认证" width="153"/>
                                        <a:datePicker name="iso14001_date" bindTarget="fnd9220_vendorSurveyBasicInfo" prompt="认证时间" renderer="Aurora.formatDate"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:grid autoAppend="false" bindTarget="fnd9220_vendorSurveyMerchantAuthenticate_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="authenticate_type_desc" align="center" editor="fnd9220_MerchantAuthenticate_cbb" prompt="认证类型" width="90"/>
                                        <a:column name="authenticate_description" align="left" editor="fnd9220_MerchantAuthenticate_tf" prompt="认证描述" width="150"/>
                                        <a:column name="authenticate_number" align="left" editor="fnd9220_MerchantAuthenticate_tf" prompt="认证编号" width="90"/>
                                        <a:column name="authenticate_date" align="center" editor="fnd9220_MerchantAuthenticate_dp" prompt="认证时间" renderer="Aurora.formatDate" width="100"/>
                                        <a:column name="certification_org" align="left" editor="fnd9220_MerchantAuthenticate_tf" prompt="认证机构" width="150"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:comboBox id="fnd9220_MerchantAuthenticate_cbb"/>
                                        <a:textField id="fnd9220_MerchantAuthenticate_tf"/>
                                        <a:datePicker id="fnd9220_MerchantAuthenticate_dp"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="产品能力信息" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_vendorSurveyMerchantProCapacity_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="product_name" align="left" editor="fnd9220_MerchantProCapacity_tf" prompt="产品名称/型号" width="150"/>
                                        <a:column name="product_brand" align="left" editor="fnd9220_MerchantProCapacity_tf" prompt="产品品牌" width="120"/>
                                        <a:column name="manufacturer" align="left" editor="fnd9220_MerchantProCapacity_tf" prompt="生产厂家" width="150"/>
                                        <a:column name="business_nature" align="center" editor="fnd9220_MerchantProCapacity_tf" prompt="经营性质" width="120"/>
                                        <a:column name="agency_level" align="left" editor="fnd9220_MerchantProCapacity_tf" prompt="代理层级" width="90"/>
                                        <a:column name="agency_region" align="center" editor="fnd9220_MerchantProCapacity_tf" prompt="代理区域" width="150"/>
                                        <a:column name="description" align="center" editor="fnd9220_MerchantProCapacity_tf" prompt="备注" width="120"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:textField id="fnd9220_MerchantProCapacity_tf"/>
                                        <a:numberField id="fnd9220_MerchantProCapacity_nf"/>
                                        <a:comboBox id="fnd9220_MerchantProCapacity_cbb"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="顾客情况" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_vendorSurveyMerchantCustomer_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="customer_name" align="left" editor="fnd9220_MerchantCustomer_tf" prompt="客户名称" width="150"/>
                                        <a:column name="cooperation_frequency_desc" align="center" editor="fnd9220_MerchantCustomer_cbb" prompt="合作频率" width="90"/>
                                        <a:column name="belong_regions" align="left" editor="fnd9220_MerchantCustomer_tf" prompt="所属区域" width="120"/>
                                        <a:column name="sales" align="right" editor="fnd9220_MerchantCustomer_tf" prompt="销售数量" width="90"/>
                                        <a:column name="sales_volume" align="right" editor="fnd9220_MerchantCustomer_nf" prompt="销售额(万元)" width="120"/>
                                        <a:column name="description" align="left" editor="fnd9220_MerchantCustomer_tf" prompt="备注" width="120"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:textField id="fnd9220_MerchantCustomer_tf"/>
                                        <a:comboBox id="fnd9220_MerchantCustomer_cbb"/>
                                        <a:numberField id="fnd9220_MerchantCustomer_nf"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                        </a:tabs>
                    </a:tabPanel>
                </a:vBox>
            </a:hBox>
        </a:screenBody>
    </a:view>
</a:screen>
