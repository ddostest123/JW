<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: Dru
    $Date: 2014-8-29 上午9:43:23  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure>
        <a:model-query defaultWhereClause="flex_value_set_code = &apos;PUR_QUESTIONARY_ATM_TYPE_CODE&apos;" fetchAll="true" model="public.fnd_flex_value_v_lov" rootPath="fnd9220_attachment_type"/>
    </a:init-procedure>
    <a:view package="aurora.ui.std" template="default">
        <a:link id="fnd9220_companySupplierSave_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_company_supplier_save.svc"/>
        <a:link id="fnd9220_companySupplierContactSave_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_company_supplier_contact_save.svc"/>
        <a:link id="fnd9220_vendorSurvey_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_vendor_survey.screen"/>
        <a:link id="fnd9220_companySupplierUpload_link" url="${/request/@context_path}/uploadFile.screen"/>
        <a:link id="fnd9220_attachment_file_upload_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd9220_uploadFile.screen"/>
        <a:link id="fnd9220_attachment_file_download_link" url="${/request/@context_path}/atm_download.svc"/>
        <a:link id="fnd9220_companySupplierAccountSave_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_company_supplier_account_save.svc"/>
        <a:link id="fnd9220_companySupplierFinances_update_link" model="fnd.FND9220.fnd_9220_com_sup_finances" modelaction="execute"/>
        <style><![CDATA[
             .register-upLoad .up_card{
                width: 196px;
                height:20px;
                margin: 0 0px 0px 0;
             }
             .register-upLoad .up_card .icon-png{
                background-position: -64px -30px;
             }
             .register-upLoad .up_card .icon-jpg {
                background-position: 0 -26px;
             }
             .register-upLoad .up_card .icon{
                margin: 0px 0 0 4px;
                width: 22px;
                height: 18px;
             }
             .register-upLoad .up_card .j{
                width: 145px;
                height: 16px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: #666;
                position: absolute;
                left: 25px;
                top: 3px;
             }
             .register-upLoad .up_card .l{
                top: 3px;
             }
             .register-upLoad .up_card .k{
                display: none;
             }
             body .container .content-div .itemupf > span{
                background-color: #65cea7;
                float: right;
                margin: 6px 0 0 5px;
                border-radius: 4px;
                color:#fff;
             }
             .upload_icon{
                position: absolute;
                color: #fff;
                left: -56px;
                top: 9px;
                font-size: 12px;
                font-family: Microsoft Yahei;
                cursor: pointer;
              }
              .register-upLoad.itemupf > span{
                background-color: #65cea7;
                float: right;
                margin: 0px 0 0 5px;
                border-radius: 4px;
                color:#fff;
              }
              .register-upLoad.itemupf > div{
                float: left;
                min-width: 100px;
                min-height: 30px;
              }
              /* ie下upload样式 */
              body .rregisted-ie-upload{
                border: 1px solid silver;
                display: block;
                height: 26px;
                width: 200px;
                float: left;
                border-radius: 5px;
              }
              body .rregisted-ie-upload > div{
                margin:3px 2px;
               }
              body .rregisted-ieupload-span{
                display: block;
                float: right;
                border: 1px solid #ccc;
                margin-top: 1px;
                margin-left: 2px;
                border-radius: 3px; 
              }
        ]]></style>
        <script><![CDATA[
            var fnd9220_tree_div = [];
            var fnd9220_cur_tree_node_id;
            //关闭
            
            function fnd9220_companySupplier_cancelFun() {
                $('fnd9220_company_supplier_entering_window').close();
            }
            //日期校验
            
            function fnd9220_compareDate(start, end) {
            
                if (typeof(start) == 'string') {
                    start = new Date(start.replace(/-/g, "/"));
                }
            
                if (typeof(end) == 'string') {
                    end = new Date(end.replace(/-/g, "/"));
                }
            
                if (start > end) {
                    return false;
                }
                return true;
            }
            
            function fnd9220_operatingLicenseValidate_fun(record, name, value) {
                if (name == 'operating_license_end_date') {
                    var end = record.get('operating_license_end_date');
                    var sysdate = new Date();
                    sysdate.toLocaleDateString();
                    if ( !! end) {
                        if (!fnd9220_compareDate(sysdate, end)) {
                            return '${l:FND9220.OPERATING_LICENSE_END_DATE_ERROR}';
                        }
                    }
                    return true;
                }
            }
            
            function fnd9220_onCompanySupplierContactsDs_submitsuccessFun() {
                $('fnd9220_companySupplierContacts_ds').query();
            }
            
            function fnd9220_onCompanySupplierAccountsDs_submitsuccessFun() {
                $('fnd9220_companySupplierAccounts_ds').query();
            }
            
            function fnd9220_onCompanySupplierFinancesDs_submitsuccessFun() {
                $('fnd9220_companySupplierFinances_ds').query();
            }
            
            function fnd9220_onCompanySupplierAddressesDs_submitsuccessFun() {
                $('fnd9220_companySupplierAddresses_ds').query();
            }
            
            function fnd9220_onDeliveryAddressesDs_submitsuccessFun() {
                $('fnd9220_deliveryAddresses_ds').query();
            }
            
            function fnd9220_onCompanySupplierAttachmentsDs_submitsuccessFun() {
                $('fnd9220_companySupplierAttachments_ds').query();
            }
            
            //收货地点tab事件
            //
            
            function fnd9220_deliveryAddressCellClick_fun(grid, row, name, record) {
                debugger;
                var address_type = record.get('address_type');
                if (name == 'province_name') {
                    if (Ext.isEmpty(record.get('country_name')) || record.get('country_name') == undefined) {
                        record.set('country_code', '');
                        record.getField("province_name").setLovService('');
                        record.getField("city_name").setLovService('');
                        record.getField("county_name").setLovService('');
                        record.getField('province_name').setReadOnly(true);
                        record.getField('city_name').setReadOnly(true);
                        record.getField('county_name').setReadOnly(true);
                    } else {
                        var temp_string = record.get('country_code');
                        record.getField("province_name").setLovService('');
                        //获取史泰博地址
                        if (address_type == 'OMS') {
                            record.getField("province_name").setLovService('');
                            record.getField("province_name").setLovService('public.fnd_oms_address_lov');
                            record.getField("province_name").setLovPara('data_source_parent_id', '0');
            
                            record.getField("province_name").setMapping([{
                                from: 'data_source_id',
                                to: 'province_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'province_name'
                            }]);
                        } //获取固安捷地址
                        else if (address_type == 'GAJ') {
                            record.getField("province_name").setLovService('');
                            record.getField("province_name").setLovService('public.fnd_gaj_address_lov');
                            record.getField("province_name").setLovPara('data_source_parent_id', '0');
            
                            record.getField("province_name").setMapping([{
                                from: 'data_source_id',
                                to: 'province_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'province_name'
                            }]);
                        } //获取西域地址
                        else if (address_type == 'XY') {
                            record.getField("province_name").setLovService('');
                            record.getField("province_name").setLovService('public.fnd_xy_address_lov');
                            record.getField("province_name").setLovPara('data_source_parent_id', '1');
            
                            record.getField("province_name").setMapping([{
                                from: 'data_source_id',
                                to: 'province_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'province_name'
                            }]);
                        } else {
                            record.getField("province_name").setLovService('public.fnd_region_province_lov');
                            record.getField("province_name").setLovPara('country_code', temp_string);
                            record.getField("province_name").setMapping([{
                                from: 'province_id',
                                to: 'province_id'
                            }, {
                                from: 'province_name',
                                to: 'province_name'
                            }]);
                        }
                        record.getField('province_name').setReadOnly(false);
                    }
                } else if (name == 'city_name') {
                    debugger;
                    if (Ext.isEmpty(record.get('province_name')) || record.get('province_name') == undefined || address_type == undefined || address_type == '' || address_type == null) {
                        record.set('province_id', '');
                        record.getField("city_name").setLovService('');
                        record.getField('city_name').setReadOnly(true);
                    } else {
                        //获取苏宁地址
                        if (address_type == 'OMS') {
                            record.getField("city_name").setLovService('');
                            record.getField("city_name").setLovService('public.fnd_oms_address_lov');
                            record.getField("city_name").setLovPara('data_source_parent_id', record.get('province_id'));
                            record.getField("city_name").setMapping([{
                                from: 'data_source_id',
                                to: 'city_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'city_name'
                            }]);
                        } //获取固安捷地址
                        else if (address_type == 'GAJ') {
                            record.getField("city_name").setLovService('');
                            record.getField("city_name").setLovService('public.fnd_gaj_address_lov');
                            record.getField("city_name").setLovPara('data_source_parent_id', record.get('province_id'));
                            record.getField("city_name").setMapping([{
                                from: 'data_source_id',
                                to: 'city_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'city_name'
                            }]);
                        } //获取西域地址
                        else if (address_type == 'XY') {
                            record.getField("city_name").setLovService('');
                            record.getField("city_name").setLovService('public.fnd_xy_address_lov');
                            record.getField("city_name").setLovPara('data_source_parent_id', record.get('province_id'));
                            record.getField("city_name").setMapping([{
                                from: 'data_source_id',
                                to: 'city_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'city_name'
                            }]);
                        } else {
                            record.getField("city_name").setLovService('public.fnd_region_city_lov');
                            record.getField("city_name").setLovPara('province_id', record.get('province_id'));
                            record.getField("city_name").setMapping([{
                                from: 'city_id',
                                to: 'city_id'
                            }, {
                                from: 'city_name',
                                to: 'city_name'
                            }]);
                        }
                        record.getField('city_name').setReadOnly(false);
                    }
                } else if (name == 'county_name') {
                    if (Ext.isEmpty(record.get('city_name')) || record.get('city_name') == undefined || address_type == undefined || address_type == '' || address_type == null) {
                        record.set('city_id', '');
                        record.getField("county_name").setLovService('');
                        record.getField('county_name').setReadOnly(true);
                    } else {
                        //获取苏宁地址
                        if (address_type == 'OMS') {
                            record.getField("county_name").setLovService('');
                            record.getField("county_name").setLovService('public.fnd_oms_address_lov');
                            record.getField("county_name").setLovPara('data_source_parent_id', record.get('city_id'));
                            record.getField("county_name").setMapping([{
                                from: 'data_source_id',
                                to: 'county_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'county_name'
                            }]);
                        } //获取京东地址
                        else if (address_type == 'GAJ') {
                            record.getField("county_name").setLovService('');
                            record.getField("county_name").setLovService('public.fnd_gaj_address_lov');
                            record.getField("county_name").setLovPara('data_source_parent_id', record.get('city_id'));
                            record.getField("county_name").setMapping([{
                                from: 'data_source_id',
                                to: 'county_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'county_name'
                            }]);
                        } //获取西域地址
                        else if (address_type == 'XY') {
                            record.getField("county_name").setLovService('');
                            record.getField("county_name").setLovService('public.fnd_xy_address_lov');
                            record.getField("county_name").setLovPara('data_source_parent_id', record.get('city_id'));
                            record.getField("county_name").setMapping([{
                                from: 'data_source_id',
                                to: 'county_id'
                            }, {
                                from: 'data_source_desc',
                                to: 'county_name'
                            }]);
                        } else {
                            record.getField("county_name").setLovService('public.fnd_region_county_lov');
                            record.getField("county_name").setLovPara('city_id', record.get('city_id'));
                            record.getField("county_name").setMapping([{
                                from: 'county_id',
                                to: 'county_id'
                            }, {
                                from: 'county_name',
                                to: 'county_name'
                            }]);
                        }
                        record.getField('county_name').setReadOnly(false);
                    }
                } else if (name == 'town_name') {
            
                    if (address_type == 'OMS') {
                        record.getField("town_name").setLovService('');
                        record.getField("town_name").setLovService('public.fnd_oms_address_lov');
                        record.getField("town_name").setLovPara('data_source_parent_id', record.get('county_id'));
                        record.getField("town_name").setMapping([{
                            from: 'data_source_id',
                            to: 'town_id'
                        }, {
                            from: 'data_source_desc',
                            to: 'town_name'
                        }]);
                    } else {
                        record.getField('town_name').setReadOnly(true);
                        //record.getField("town_name").setLovService('public.fnd_region_county_lov');
                        //record.getField("town_name").setLovPara('city_id', record.get('city_id'));
                    }
            
                } else if (name == 'inv_organization_name') {
                    var company_id = '${/parameter/@company_id}';
                    record.getField("inv_organization_name").setLovPara('company_id', company_id);
                }
            }
            
            //收货地址更新
            
            function fnd9220_deliveryAddressUpdate_fun(ds, record, name, value, oldvalue) {
                if (name == 'address_type') {
                    record.set('country_name', '');
                    record.set('country_code', '');
                    record.set('province_id', '');
                    record.set('province_name', '');
                    record.set('city_id', '');
                    record.set('city_name', '');
                    record.set('county_name', '');
                    record.set('county_id', '');
            
                    record.getField('province_name').setReadOnly(true);
                    record.getField('city_name').setReadOnly(true);
                    record.getField('county_name').setReadOnly(true);
                }
            
                if (name == 'country_name') {
                    record.set('province_id', '');
                    record.set('province_name', '');
                    record.set('city_id', '');
                    record.set('city_name', '');
                }
                if (name == 'province_name') {
                    record.set('city_id', '');
                    record.set('city_name', '');
                }
                if (name == 'city_name') {
                    record.set('county_id', '');
                    record.set('county_name', '');
                }
                if (name == 'county_name') {
                    record.set('town_id', '');
                    record.set('town_name', '');
                }
            }
            //保存
            
            function fnd9220_companySupplier_saveFun() {
                Aurora.Masker.mask(Ext.getBody(), '保存中..');
                $('fnd9220_companySupplier_saveBtu').disable();
                $('fnd9220_companySupplier_cancelBtu').disable();
                var companySupplierInfo_ds = $('fnd9220_companySupplierInfo_ds');
                var contact_ds = $('fnd9220_companySupplierContacts_ds');
                var account_ds = $('fnd9220_companySupplierAccounts_ds');
                var addresses_ds = $('fnd9220_companySupplierAddresses_ds');
                var finance_ds = $('fnd9220_companySupplierFinances_ds');
                var category_ds = $('fnd9220_company_supplier_categories_ds');
                var award_ds = $('fnd9220_company_supplier_awards_ds');
                var attachment_ds = $('fnd9220_companySupplierAttachments_ds');
                var companySupplierInfo_record = companySupplierInfo_ds.getCurrentRecord();
                if (!companySupplierInfo_ds.validate() || !contact_ds.validate() || !account_ds.validate() || !addresses_ds.validate() || !finance_ds.validate() || !attachment_ds.validate() || !category_ds.validate() || !award_ds.validate()) {
                    $('fnd9220_companySupplier_saveBtu').enable();
                    $('fnd9220_companySupplier_cancelBtu').enable();
                    return;
                }
            
                var data = companySupplierInfo_record.data;
                data['contacts'] = contact_ds.getJsonData();
                data['accounts'] = account_ds.getJsonData();
                data['addresses'] = addresses_ds.getJsonData();
                data['finances'] = finance_ds.getJsonData();
                data['categoires'] = category_ds.getJsonData();
                data['awards'] = award_ds.getJsonData();
                data['attachments'] = attachment_ds.getJsonData();
            
                Aurora.request({
                    url: $('fnd9220_companySupplierSave_link').getUrl(),
                    para: data,
                    success: function(result) {
                        Aurora.Masker.unmask(Ext.getBody());
                        fnd9220_companySupplier_submitSuccessFun();
                    },
                    failure: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    error: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    scope: this
                });
            
            }
            
            //供应商保存成功
            
            function fnd9220_companySupplier_submitSuccessFun() {
                $('fnd9220_companySupplier_saveBtu').enable();
                $('fnd9220_companySupplier_cancelBtu').enable();
                Aurora.showMessage('${l:PROMPT}', '${l:PROMPT.SAVE_SUCCESS}!', function() {
                    $('fnd9220_companySupplierInfo_ds').query();
                    $('fnd9220_companySupplierContacts_ds').query();
                    $('fnd9220_companySupplierAccounts_ds').query();
                    $('fnd9220_companySupplierFinances_ds').query();
                    $('fnd9220_companySupplierAddresses_ds').query();
                    $('fnd9220_companySupplierAttachments_ds').query();
            
                    $('fnd9220_company_supplier_categories_ds').query();
                    $('fnd9220_company_supplier_awards_ds').query();
                });
            }
            
            
            //联系人保存
            
            function fnd9220_companySupplierContacts_saveFun() {
                $('fnd9220_companySupplier_saveBtu').disable();
                $('fnd9220_companySupplier_cancelBtu').disable();
            
                var companySupplierInfo_ds = $('fnd9220_companySupplierInfo_ds');
                var contact_ds = $('fnd9220_companySupplierContacts_ds');
            
                var companySupplierInfo_record = companySupplierInfo_ds.getCurrentRecord();
                if (!companySupplierInfo_ds.validate() || !contact_ds.validate()) {
                    $('fnd9220_companySupplier_saveBtu').enable();
                    $('fnd9220_companySupplier_cancelBtu').enable();
                    return;
                }
            
                var data = companySupplierInfo_record.data;
                data['contacts'] = contact_ds.getJsonData();
            
            
                Aurora.request({
                    url: $('fnd9220_companySupplierContactSave_link').getUrl(),
                    para: data,
                    success: function(result) {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                        fnd9220_onCompanySupplierContactsDs_submitsuccessFun();
                    },
                    failure: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                    },
                    error: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                    },
                    scope: this
                });
            }
            
            
            //账户保存
            
            function fnd9220_companySupplierAccounts_saveFun() {
                $('fnd9220_companySupplier_saveBtu').disable();
                $('fnd9220_companySupplier_cancelBtu').disable();
            
                var companySupplierInfo_ds = $('fnd9220_companySupplierInfo_ds');
                var account_ds = $('fnd9220_companySupplierAccounts_ds');
            
                var companySupplierInfo_record = companySupplierInfo_ds.getCurrentRecord();
                if (!companySupplierInfo_ds.validate() || !account_ds.validate()) {
                    $('fnd9220_companySupplier_saveBtu').enable();
                    $('fnd9220_companySupplier_cancelBtu').enable();
                    return;
                }
            
                var data = companySupplierInfo_record.data;
                data['accounts'] = account_ds.getJsonData();
            
            
                Aurora.request({
                    url: $('fnd9220_companySupplierAccountSave_link').getUrl(),
                    para: data,
                    success: function(result) {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                        fnd9220_onCompanySupplierAccountsDs_submitsuccessFun();
                    },
                    failure: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                    },
                    error: function() {
                        $('fnd9220_companySupplier_saveBtu').enable();
                        $('fnd9220_companySupplier_cancelBtu').enable();
                    },
                    scope: this
                });
            }
            //奖惩情况里的附件上传
            
            function fnd9220_atm_file_renderer(value, record, name) {
                var attachment_id = record.get('award_id'); //附件ID
                if (attachment_id) {
                    return '<a href="javascript:fnd9220_atm_file_add_fun(' + attachment_id + ')">上传/下载</a>';
                }
            }
            
            //奖惩情况里的附件上传
            
            function fnd9220_atm_file_add_fun(id) {
                new Aurora.Window({
                    id: 'fnd9220_attachment_file_upload_link_window',
                    title: '${l:HAP_UPLOAD_TITLE}',
                    url: $('fnd9220_companySupplierUpload_link').getUrl() + '?header_id=' + id + '&table_name=FND_COM_SUP_AWARDS',
                    width: 610,
                    height: 500
                }).on('close', function() { //关闭附件上传页面，执行的方法，刷新附件信息grid
                    $('fnd9220_company_supplier_awards_ds').query();
                });
            }
            
            //附件上传和下载
            
            function fnd9220_upload_renderer(value, record, name) {
                var attachment_id = record.get('attachment_id'); //附件ID
                if (attachment_id) {
                    return '<a href="javascript:fnd9220_attachment_add_fun(' + attachment_id + ')">上传/下载</a>';
                }
            }
            
            
            //附件新增
            
            function fnd9220_attachment_add_fun(id) {
                new Aurora.Window({
                    id: 'fnd9220_attachment_file_upload_link_window',
                    title: '${l:HAP_UPLOAD_TITLE}',
                    url: $('fnd9220_attachment_file_upload_link').getUrl() + '?pkvalue=' + id + '&table_name=FND_COM_SUP_ATTACHMENT',
                    width: 610,
                    height: 500
                }).on('close', function() {
                    $('fnd9220_companySupplierAttachments_ds').query();
                });
            }
            
            //年份不可编辑
            
            function fnd9220_yearPeriod_ef(record, name) {
                if (record.isNew) {
                    return 'fnd9220_yearPeriod_nf';
                }
                return;
            }
            
            
            //地点tab事件
            
            function fnd9220_addressesCellClick_fun(grid, row, name, record) {
                //国家、地区、城市级联更新
                if (Ext.isEmpty(record.get('country_name')) || record.get('country_name') == undefined) {
                    record.set('country_code', '');
                    record.getField("province_name").setLovService('');
                    record.getField("city_name").setLovService('');
            
                    record.getField('province_name').setReadOnly(true);
                    record.getField('city_name').setReadOnly(true);
                } else {
                    var temp_string = record.get('country_code');
                    record.getField("city_name").setLovService('');
                    record.getField("province_name").setLovService('public.fnd_region_province_lov');
                    record.getField("province_name").setLovPara('country_code', temp_string);
            
                    record.getField('province_name').setReadOnly(false);
                }
                if (Ext.isEmpty(record.get('province_name')) || record.get('province_name') == undefined) {
                    record.set('province_id', '');
                    record.getField("city_name").setLovService('');
            
                    record.getField('city_name').setReadOnly(true);
                } else {
                    record.getField("city_name").setLovService('public.fnd_region_city_lov');
                    record.getField("city_name").setLovPara('province_id', record.get('province_id'));
                    record.getField('city_name').setReadOnly(false);
                }
            
            }
            
            function fnd9220_companySupplierAttachments_ds_selectFun(record) {
                if (record.get('required_flag') == 'Y') {
                    return false;
                }
                return true;
            }
            
            function fnd9220_com_sup_attachment_editorFun(record, name) {
                if (record.get('required_flag') == 'Y') {
                    return '';
                }
                return 'fnd9220_com_sup_attachment_tab_cbb';
            }
            
            function fnd92200_attachment_ds_updateFun(dataSet, record, name, value, oldvalue) {
                if (name == 'attachment_type') {
                    var records = dataSet.getAll();
                    for (var i = 0;i < records.length;i++) {
                        for (var j = i + 1;j < records.length;j++) {
                            if (records[i].get('attachment_type') == records[j].get('attachment_type')) {
                                Aurora.showMessage('${l:PROMPT}', '附件类型已存在，请重新选择!');
                                return;
                            }
                        }
                    }
                }
            }
            
            function fnd92200_attachment_ds_submitsuccessFun(dataSet) {
                dataSet.query();
            }
            
            function fnd9220_treeGrid_renderer(value, record, name) {
                var index = $('fnd9220_query_parameter_tree_ds').indexOf(record);
                var id = "fnd9220_" + index;
                fnd9220_tree_div.push(id);
                return '<div id="' + id + '" >' + value + '</div>';
            }
            
            function fnd9220_tree_click(grid, row, record) {
                var query_ds = $('fnd9220_query_parameter_tree_ds');
                var i;
                var div_id = "fnd9220_" + query_ds.indexOf(record);
                var array_id = query_ds.indexOf(record);
            
            
                //设置没被选中div背景色为红色
                for (i = 0;i < fnd9220_tree_div.length;i++) {
                    if (fnd9220_tree_div[i] != div_id) {
                        document.getElementById(fnd9220_tree_div[i]).style.color = "#000000";
                    }
                }
            
                if (array_id) {
                    var tab_code = record.get('query_code');
                    if (record.get('query_code') == 'BASIC_INFO' || record.get('query_code') == 'FINANCE_INFO' || record.get('query_code') == 'SYS_QUESTIONARY') {
            
                       } else {
                        //设置被选中div背景色为红色
                        document.getElementById(div_id).style.color = "#FF0000";
                    }
                    if (record.get('query_code') == 'COMPANY') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(0);
                    }
                    if (record.get('query_code') == 'CONTACT') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(1);
                    }
                    if (record.get('query_code') == 'ADDRESS') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(2);
                    }
                    if (record.get('query_code') == 'AWARDS') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(3);
                    }
                    if (record.get('query_code') == 'PURCHASE_CATEGORY') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(4);
                    }
                    if (record.get('query_code') == 'ACCOUNT') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(5);
                    }
                    if (record.get('query_code') == 'LEAST_FINANCE') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(6);
                    }
                    if (record.get('query_code') == 'ATM_FILE') {
                        $('fnd9220_supplier_info_tabpanel_id').selectTab(7);
                    }
                    if (record.get('query_code') == 'MANUFACTURER') {
                        new Aurora.Window({
                            id: 'fnd9220_vendor_survey_manufacturer_window',
                            title: '供应商调查表——制造商',
                            url: $('fnd9220_vendorSurvey_link').getUrl() + '?supplier_id=' + ${/parameter/@supplier_id} + '&survey_type_code=10_MANUFACTURER',
                            fullScreen: true
                        });
                        // $('fnd9220_supplier_info_tabpanel_id').selectTab(0);
                    }
                    if (record.get('query_code') == 'MERCHANT') {
                        new Aurora.Window({
                            id: 'fnd9220_vendor_survey_merchant_window',
                            title: '供应商调查表——贸易商',
                            url: $('fnd9220_vendorSurvey_link').getUrl() + '?supplier_id=' + ${/parameter/@supplier_id} + '&survey_type_code=20_MERCHANT',
                            fullScreen: true
                        });
                    }
            
                }
            }
            
            function fnd9220_com_supplier_tabpanel_select_handler(tabPanel, index, tab) {
                var div_id;
                var tree_node_id;
                if (index == 0) {
                    tree_node_id = 1;
                    div_id = 'fnd9220_' + 1;
                } else if (index == 1) {
                    tree_node_id = 2;
                    div_id = 'fnd9220_' + 2;
                } else if (index == 2) {
                    tree_node_id = 3;
                    div_id = 'fnd9220_' + 3;
                } else if (index == 3) {
                    tree_node_id = 4;
                    div_id = 'fnd9220_' + 4;
                } else if (index == 4) {
                    tree_node_id = 5;
                    div_id = 'fnd9220_' + 5;
                } else if (index == 5) {
                    tree_node_id = 8;
                    div_id = 'fnd9220_' + 8;
                } else if (index == 6) {
                    tree_node_id = 9;
                    div_id = 'fnd9220_' + 9;
                } else if (index == 7) {
                    tree_node_id = 6;
                    div_id = 'fnd9220_' + 6;
                }
            
                //定位左侧树形菜单
                $('fnd9220_query_parameter_tree_ds').locate(tree_node_id + 1);
            
                if (document.getElementById(div_id)) {
                    //将当前节点字符颜色红色
                    document.getElementById(div_id).style.color = "#FF0000";
                    //将所有非点击的div字体设置为黑色
                    for (var i = 0;i < fnd9220_tree_div.length;i++) {
                        if (fnd9220_tree_div[i] != div_id) {
                            document.getElementById(fnd9220_tree_div[i]).style.color = "#000000";
                        }
                    }
                }
            }
            /*
             ***************************
             **********基本信息修改新增
             ***************************
             */
            
            function fnd9220_getId(id) {
                return document.getElementById(id);
            }
            
            function fnd9220_register_updateHandler(ds, record, name, value, oldvalue) {
                if (name == 'registered_country_code') {
                    //fnd9100_place_init();
                    if (Aurora.isEmpty(value)) {
                        record.set('registered_province_id', '');
                        record.set('registered_province_desc', '');
                        record.getField("registered_province_desc").setReadOnly(true);
                        //record.getField("registered_province_desc").setRequired(false);
                        $('registered_province_ds').setQueryParameter('country_code', '-1');
                        $('registered_province_ds').query();
                    } else {
                        if (value == 'CHN') {
                            record.getField("registered_province_desc").setReadOnly(false);
                            //record.getField("registered_province_desc").setRequired(true);
                            $('registered_province_ds').setQueryParameter('country_code', record.get('registered_country_code'));
                            $('registered_province_ds').query();
                            //设置地区可查
                            //var div = document.getElementById('registered_location_desc');
                            //div.setAttribute('use_flag', 'true');
                        } else {
                            record.set('registered_city_id', '');
                            record.set('registered_city_desc', '');
                            record.set('registered_province_id', '');
                            record.set('registered_province_desc', '');
                            record.getField("registered_province_desc").setReadOnly(true);
                            //record.getField("registered_province_desc").setRequired(false);
                        }
                        //国家选出来后自动拼到地址信息里
                        //fnd9100_registe_placeInto('country');
                        record.set('address', record.get('registered_country_name'));
                    }
                } else if (name == 'registered_province_id') {
                    record.set('registered_city_id', '');
                    record.set('registered_city_desc', '');
                    if (Aurora.isEmpty(value)) {
                        record.getField("registered_city_desc").setReadOnly(true);
                        record.getField("registered_city_desc").setRequired(false);
            
                        $('registered_city_ds').setQueryParameter('province_id', -1);
                        $('registered_city_ds').query();
                    } else {
                        record.getField("registered_city_desc").setReadOnly(false);
                        record.getField("registered_city_desc").setRequired(true);
            
                        $('registered_city_ds').setQueryParameter('province_id', record.get('registered_province_id'));
                        $('registered_city_ds').query();
                        //地区选出来后自动拼到地址信息里
                        //fnd9100_registe_placeInto('city');
                        record.set('address', record.get('registered_country_name') + ' ' + record.get('registered_province_desc'));
                    }
                } else if (name == 'registered_city_id') {
                    record.set('address', record.get('registered_country_name') + ' ' + record.get('registered_province_desc') + ' ' + record.get('registered_city_desc'));
                } else if (name == 'business_license_forever') {
                    //根据用户营业执照类型标识设置到期日
                    if (record.get('business_license_forever') == 'Y') {
                        record.set('business_license_end_date', '');
                        record.getField('business_license_end_date').setRequired(false);
                        record.getField('business_license_end_date').setReadOnly(true);
                    } else {
                        record.getField('business_license_end_date').setReadOnly(false);
                        record.getField('business_license_end_date').setRequired(true);
                    }
                } else if (name == 'domestic_foreign_relation') {
                    var p = record.get('institutional_properties');
                    if (value == 'DOMESTIC') {
                        record.getField('d_b_code').setReadOnly(true);
                        record.getField('d_b_code').setRequired(false);
                        record.set('d_b_code', '');
                    } else {
                        record.getField('d_b_code').setReadOnly(false);
                        record.getField('d_b_code').setRequired(true);
                    }
                    fnd9100_threeValidateSet();
                } else if (name == 'institutional_properties') {
                    if (value == 'BUSINESS' || value == 'FARMER_COOPERATIVE') {
                        record.getField('three_in_one_flag').setReadOnly(false);
                        record.getField('one_one_code_flag').setReadOnly(true);
                        record.getField('unified_social_code').setReadOnly(true);
                    } else {
                        record.getField('three_in_one_flag').setReadOnly(true);
                        record.set('three_in_one_flag', 'N');
                        record.getField('one_one_code_flag').setReadOnly(true);
                        record.set('one_one_code_flag', 'N');
                        record.getField('unified_social_code').setReadOnly(true);
                        record.set('unified_social_code', '');
                    }
            
                    if (value == 'BUSINESS') {
                        record.getField('enterprise_nature_name').setRequired(true);
                    } else {
                        record.getField('enterprise_nature_name').setRequired(false);
                    }
                    fnd9100_threeValidateSet();
                } else if (name == 'iso14000_flag' || name == 'iso9001_flag') {
                    fnd9220_isoHboxSet(name, value);
                } else if (name == 'three_in_one_flag') {
                    if (value == 'Y') {
                        record.getField('one_one_code_flag').setReadOnly(false);
                    } else {
                        record.getField('one_one_code_flag').setReadOnly(true);
                        record.set('one_one_code_flag', 'N');
                    }
                    fnd9100_threeValidateSet();
                } else if (name == 'one_one_code_flag') {
                    fnd9100_threeValidateSet();
                } else if (name == 'supplier_categroy') {
                    var tar = document.getElementById('fnd9100_upload_bo_hBox');
                    var ag = document.getElementById('fnd9100_upload_ag_hBox');
                    if (record.get('supplier_categroy') == '-9191961364319941327') {
                        tar.style.display = 'block';
                        ag.style.display = 'none';
                        fnd9220_set_upload_required('fnd9220_upload_bo', true);
                    } else if (record.get('supplier_categroy') == '-2149760273639649320') {
                        ag.style.display = 'block';
                        tar.style.display = 'none';
                        fnd9220_set_upload_required('fnd9220_upload_ag', true);
                    } else {
                        tar.style.display = 'none';
                        ag.style.display = 'none';
                    }
                }
            }
            
            function fnd9220_isoInit() {
                var record = $('fnd9220_companySupplierInfo_ds').getAt(0);
                fnd9220_isoHboxSet('iso14000_flag', record.get('iso14000_flag'));
                fnd9220_isoHboxSet('iso9001_flag', record.get('iso9001_flag'));
            }
            
            function fnd9220_isoHboxSet(name, value) {
                var tar;
                var record = $('fnd9220_companySupplierInfo_ds').getAt(0);
                if (name == 'iso14000_flag') {
                    tar = document.getElementById('fnd9220_iso14000_hBox');
                    if (value == 'Y') {
                        tar.style.display = 'block';
                        record.getField('iso14000_flag_end_date').setRequired(true);
                    } else {
                        tar.style.display = 'none';
                        record.set('iso14000_flag_end_date', '');
                        record.getField('iso14000_flag_end_date').setRequired(false);
                    }
                } else if (name == 'iso9001_flag') {
                    tar = document.getElementById('fnd9220_iso9001_hBox');
                    if (value == 'Y') {
                        tar.style.display = 'block';
                        record.getField('iso9001_flag_end_date').setRequired(true);
                    } else {
                        tar.style.display = 'none';
                        record.set('iso9001_flag_end_date', '');
                        record.getField('iso9001_flag_end_date').setRequired(false);
                    }
                }
            }
            
            function fnd9100_threeValidateSet() {
                var record = $('fnd9220_companySupplierInfo_ds').getAt(0);
                var data = record.data;
                var institutional = data.institutional_properties;
                //重叠校验三证信息，优先级为，境内外机构，一照一码-机构性质,三证
                fnd9220_init_three(false);
                record.getField('three_in_one_flag').setReadOnly(true);
                record.getField('unified_social_code').setReadOnly(true);
                record.getField('unified_social_code').setRequired(false);
                record.getField('business_license_number').setReadOnly(false);
                if (institutional == 'BUSINESS' || institutional == 'FARMER_COOPERATIVE') {
                    fnd9220_init_three(true);
                    record.getField('three_in_one_flag').setReadOnly(false);
                } else if (institutional == 'PERSON' || Aurora.isEmpty(institutional)) {
                    fnd9220_init_three(true);
                    record.getField('national_organization_code').setRequired(false);
                    fnd9220_set_upload_required('fnd9220_upload_2', false);
                    fnd9220_set_upload_required('fnd9220_upload_3', false);
                    record.getField('tax_id_number').setRequired(false);
                    record.getField('taxpayer_type_name').setRequired(false);
                } else {
                    record.getField('national_organization_code').setRequired(true);
                    fnd9220_set_upload_required('fnd9220_upload_2', true);
                }
                if (data.three_in_one_flag == 'Y') {
                    if (data.one_one_code_flag == 'N') {
                        record.getField('unified_social_code').setReadOnly(true);
                        record.set('unified_social_code', '');
                        record.getField('national_organization_code').setRequired(false);
                        fnd9220_set_upload_required('fnd9220_upload_2', false);
                        fnd9220_set_upload_required('fnd9220_upload_3', false);
                        record.getField('tax_id_number').setRequired(false);
                        record.getField('taxpayer_type_name').setRequired(false);
                    } else {
                        record.getField('unified_social_code').setReadOnly(false);
                        record.getField('unified_social_code').setRequired(true);
                        record.getField('business_license_number').setReadOnly(true);
                        record.getField('business_license_number').setRequired(false);
                        record.set('business_license_number', '');
                        record.getField('national_organization_code').setRequired(false);
                        fnd9220_set_upload_required('fnd9220_upload_2', false);
                        fnd9220_set_upload_required('fnd9220_upload_3', false);
                        record.getField('tax_id_number').setRequired(false);
                        record.getField('taxpayer_type_name').setRequired(false);
                    }
                } else {
                    record.getField('unified_social_code').setReadOnly(true);
                    record.set('unified_social_code', '');
                }
                if (data.domestic_foreign_relation == 'FOREIGN') {
                    record.getField('national_organization_code').setRequired(false);
                    fnd9220_set_upload_required('fnd9220_upload_2', false);
                }
            }
            
            function fnd9220_init_three(flag) {
                var record = $('fnd9220_companySupplierInfo_ds').getAt(0);
                record.getField('business_license_number').setRequired(flag);
                if (record.get('business_license_forever') == 'N') {
                    record.getField('business_license_end_date').setRequired(flag);
                }
                record.getField('business_license_forever').setRequired(flag);
                record.getField('address').setRequired(flag);
                record.getField('national_organization_code').setRequired(flag);
                record.getField('taxpayer_type_name').setRequired(flag);
                record.getField('tax_id_number').setRequired(flag);
                //上传图片
                fnd9220_set_upload_required('fnd9220_upload_1', flag);
                fnd9220_set_upload_required('fnd9220_upload_2', flag);
                fnd9220_set_upload_required('fnd9220_upload_3', flag);
            }
            
            //设置图片必输时的的upload显示
            
            function fnd9220_set_upload_required(id, flag) {
                var _d = fnd9220_getId(id + '_ul');
                if (flag) {
                    //_d.style.border = '1px solid #ce8f22';
                    _d.setAttribute('require', 'true');
                } else {
                    // _d.style.border = '1px solid #dfe0e0';
                    _d.setAttribute('require', 'false');
                }
            }
            
            function fnd9220_company_infor_load() {
                fnd9220_init();
                fnd9220_isoInit();
            }
            
            //页面查询设置初始化加载
            
            function fnd9220_init() {
                var record = $('fnd9220_companySupplierInfo_ds').getAt(0);
                var data = record.data;
                var tar = document.getElementById('fnd9100_upload_bo_hBox');
                var ag = document.getElementById('fnd9100_upload_ag_hBox');
                if (record.get('supplier_categroy') == '-9191961364319941327') {
                    tar.style.display = 'block';
                    ag.style.display = 'none';
                    fnd9220_set_upload_required('fnd9220_upload_bo', true);
                } else if (record.get('supplier_categroy') == '-2149760273639649320') {
                    ag.style.display = 'block';
                    tar.style.display = 'none';
                    fnd9220_set_upload_required('fnd9220_upload_ag', true);
                } else {
                    ag.style.display = 'none';
                    tar.style.display = 'none';
                }
                //地区连动查询初始化
                $('registered_province_ds').setQueryParameter('country_code', record.get('registered_country_code'));
                $('registered_province_ds').query();
                $('registered_city_ds').setQueryParameter('province_id', record.get('registered_province_id'));
                $('registered_city_ds').query();
                //营业期限必输连动
                if (data.business_license_forever == 'Y') {
                    record.set('business_license_end_date', '');
                    record.getField('business_license_end_date').setRequired(false);
                    record.getField('business_license_end_date').setReadOnly(true);
                }
                //机构性质等连动
                fnd9100_threeValidateSet();
                //法人信息图片必输初始化
                fnd9220_set_upload_required('fnd9220_upload_4', true);
                fnd9220_set_upload_required('fnd9220_upload_5', true);
                //公司授权必输初始化
                fnd9220_set_upload_required('fnd9220_upload_au', true);
            }
            
            /* function fnd9220_companySupplierFinances_update(ds, record, name, value, oldvalue){
             var rec = ds.getCurrentRecord();
             var id = rec.get('company_id');
             Aurora.request({
             url: $('fnd9220_companySupplierFinances_update_link').getUrl(),
             para:{'company_id': id},
             success: function(result) {
             Aurora.Masker.unmask($('fnd9220_companySupplierFinances_grid').wrap);
             },
             failure: function() {
             Aurora.Masker.unmask($('fnd9220_companySupplierFinances_grid').wrap);
             },
             error: function() {
             Aurora.Masker.unmask($('fnd9220_companySupplierFinances_grid').wrap);
             },
             scope: this
             });
             alert(1);
             } */
        ]]></script>
        <a:dataSets>
            <a:dataSet id="fnd9220_delivery_address_source" lookupCode="FND_ADDRESS_SOURCE"/>
            <a:dataSet id="fnd9220_delivery_address_type" lookupCode="FND_ADDRESS_TYPE"/>
            <!-- 采购品类信息查询 -->
            <a:dataSet id="fnd9220_registed_categroy_ds" autoQuery="true" fetchAll="true" model="fnd.FND9100.fnd_registed_category"/>
            <a:dataSet id="registered_country_ds" fetchAll="true" loadData="true" model="public.fnd_country_lov"/>
            <a:dataSet id="registered_province_ds" fetchAll="true" model="pur.public.fnd_region_province_by_country_lov"/>
            <a:dataSet id="registered_city_ds" fetchAll="true" model="pur.public.fnd_region_city_by_province_lov"/>
            <a:dataSet id="fnd_company_enterprise_industry_ds" lookupCode="FND_COMPANIES.COMPANY_INDUSTRY"/>
            <a:dataSet id="registered_location_ds" autoQuery="true" fetchAll="true" model="pur.public.fnd_region_location"/>
            <a:dataSet id="fnd_company_enterprise_scale_ds" lookupCode="FND_COMPANIES.ENTERPRISE_SCALE"/>
            <a:dataSet id="fnd9220_institutional_properties_ds" lookupCode="FND_COMPANIES.INSTITUTIONAL_PROPERTIES"/>
            <a:dataSet id="fnd_identity_card_types_ds" lookupCode="SYS_IDENTITY_CARD_TYPES"/>
            <a:dataSet id="fnd9220_attachment_type_ds">
                <a:datas dataSource="fnd9220_attachment_type"/>
            </a:dataSet>
            <a:dataSet id="fnd9220_query_parameter_tree_ds" loadData="true" model="fnd.FND9220.fnd_9220_com_sup_query_parameter_tree"/>
            <a:dataSet id="fnd9220_domesticForeignRelation_ds" lookupCode="FND_COM_SUP_INFOS.DF_RELATION"/>
            <a:dataSet id="fnd9220_supplierCategory_ds" lookupCode="FND_COM_SUP_INFOS.SUPPLIER_CATEGORY"/>
            <a:dataSet id="fnd9220_enterpriseNature_ds" lookupCode="FND_COM_SUP_INFOS.ENTERPRISE_NATURE"/>
            <a:dataSet id="fnd9220_taxpayerType_ds" lookupCode="FND_COM_SUP_INFOS.TAXPAYER_TYPE"/>
            <a:dataSet id="fnd9220_factoryNature_ds" lookupCode="FND_COM_SUP_INFOS.FACTORY_NATURE"/>
            <a:dataSet id="fnd9220_idType_ds" lookupCode="FND_COM_SUP_INFOS.ID_TYPE"/>
            <a:dataSet id="fnd9220_sex_ds" lookupCode="PUR_SEX"/>
            <!-- INFORMATION HEAD -->
            <a:dataSet id="fnd9220_companySupplierInfo_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_company_supplier_info" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_company_supplier_info/query?company_id=${/parameter/@company_id}">
                <a:fields>
                    <a:field name="supplier_id"/>
                    <a:field name="business_group"/>
                    <a:field name="company_id"/>
                    <a:field name="company_code" prompt="FND_COMPANY.COMPANY_CODE" readOnly="true"/>
                    <a:field name="company_full_name" prompt="FND_COMPANIES.FULL_NAME" readOnly="true"/>
                    <a:field name="company_short_name" prompt="FND_COMPANIES.SHORT_NAME" readOnly="true"/>
                    <a:field name="domestic_foreign_relation"/>
                    <a:field name="domestic_foreign_relation_name" displayField="code_value_name" options="fnd9220_domesticForeignRelation_ds" required="true" returnField="domestic_foreign_relation" valueField="code_value"/>
                    <a:field name="supplier_categroy"/>
                    <a:field name="supplier_categroy_name" displayField="code_value_name" options="fnd9220_supplierCategory_ds" required="true" returnField="supplier_categroy" valueField="code_value"/>
                    <a:field name="enterprise_nature"/>
                    <a:field name="enterprise_nature_name" displayField="code_value_name" options="fnd9220_enterpriseNature_ds" required="true" returnField="enterprise_nature" valueField="code_value"/>
                    <a:field name="taxpayer_type"/>
                    <a:field name="taxpayer_type_name" displayField="code_value_name" options="fnd9220_taxpayerType_ds" returnField="taxpayer_type" valueField="code_value"/>
                    <a:field name="d_b_code" readOnly="true"/>
                    <a:field name="website"/>
                    <a:field name="post_code"/>
                    <a:field name="zone_code"/>
                    <a:field name="fax_no"/>
                    <a:field name="official_telephone"/>
                    <a:field name="customer_service_phone"/>
                    <a:field name="contact_email"/>
                    <a:field name="factory_nature"/>
                    <a:field name="factory_nature_name" displayField="code_value_name" options="fnd9220_factoryNature_ds" returnField="factory_nature" valueField="code_value"/>
                    <a:field name="factory_area"/>
                    <a:field name="iso14000_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="iso9001_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="other_certificate"/>
                    <a:field name="business_scope"/>
                    <a:field name="agent_brand"/>
                    <a:field name="main_business"/>
                    <a:field name="partner_info"/>
                    <a:field name="service_item"/>
                    <a:field name="comments"/>
                    <a:field name="supply_abstract"/>
                    <!-- <a:field name="operating_license_end_date" validator="fnd9220_operatingLicenseValidate_fun"/> -->
                    <a:field name="business_license_number" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_NUMBER" required="true"/>
                    <a:field name="business_license_end_date" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_END_DATE" required="true"/>
                    <a:field name="business_license_forever" checkedValue="Y" defaultValue="N" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_FOREVER" uncheckedValue="N"/>
                    <a:field name="registered_country_name" displayField="country_name" options="registered_country_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_COUNTRY_CODE" required="true" returnField="registered_country_code" valueField="country_code"/>
                    <a:field name="registered_province_id" required="true"/>
                    <a:field name="registered_province_desc" displayField="province_name" options="registered_province_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_PROVINCE_ID" required="true" returnField="registered_province_id" valueField="province_id"/>
                    <a:field name="registered_city_id" required="true"/>
                    <a:field name="registered_city_desc" displayField="city_name" options="registered_city_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_CITY_ID" required="true" returnField="registered_city_id" valueField="city_id"/>
                    <a:field name="address" prompt="FND9100.REGISTED_ADDRESS" required="true"/>
                    <a:field name="national_organization_code" prompt="FND_COMPANY_REGISTED.NATIONAL_ORGANIZATION_CODE" required="false"/>
                    <a:field name="tax_id_number" prompt="FND_COMPANY_REGISTED.TAX_NUMBER"/>
                    <a:field name="legal_rep_name" prompt="FND_COMPANY_REGISTED.LEGAL_REP_NAME" required="true"/>
                    <a:field name="legal_rep_phone" prompt="FND_COMPANY_REGISTED.PHONE"/>
                    <a:field name="legal_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="legal_rep_identity_type_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="legal_rep_identity_type" valueField="code_value"/>
                    <a:field name="business_represent_name" required="true"/>
                    <a:field name="business_represent_phone" prompt="FND_COMPANY_REGISTED.PHONE" required="true"/>
                    <a:field name="business_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="business_rep_identity_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="business_rep_identity_type" valueField="code_value"/>
                    <a:field name="business_represent_mail" required="true"/>
                    <a:field name="business_rep_position" required="true"/>
                    <a:field name="financial_represent_name" required="true"/>
                    <a:field name="financial_represent_phone" prompt="FND_COMPANY_REGISTED.PHONE" required="true"/>
                    <a:field name="finance_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="finance_rep_identity_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="finance_rep_identity_type" valueField="code_value"/>
                    <a:field name="financial_represent_mail" required="true"/>
                    <a:field name="finance_rep_position" required="true"/>
                    <a:field name="require_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.REQUIRE_FLAG" uncheckedValue="N"/>
                    <a:field name="supply_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.SUPPLY_FLAG" uncheckedValue="N"/>
                    <a:field name="service_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.SERVICE_FLAG" uncheckedValue="N"/>
                    <a:field name="industry_type_name" displayField="code_value_name" options="fnd_company_enterprise_industry_ds" prompt="FND_COMPANY_REGISTED.INDUSTRY_CODE" required="true" returnField="industry_type" valueField="code_value"/>
                    <a:field name="institutional_properties_name" displayField="code_value_name" options="fnd9220_institutional_properties_ds" required="true" returnField="institutional_properties" valueField="code_value"/>
                    <a:field name="main_category" required="true"/>
                    <a:field name="three_in_one_flag" checkedValue="Y" prompt="三证合一" uncheckedValue="N"/>
                    <a:field name="one_one_code_flag" checkedValue="Y" prompt="一照一码" readOnly="true" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="fnd9220_register_updateHandler"/>
                    <a:event name="load" handler="fnd9220_company_infor_load"/>
                </a:events>
            </a:dataSet>
            <!-- CONTACT -->
            <a:dataSet id="fnd9220_companySupplierContacts_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_contacts" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_contacts/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="contact_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="contact_name" required="true" requiredMessage="${l:FND_COM_SUP_CONTACTS.CONTACT_NAME}${l:PROMPT.INPUT}"/>
                    <a:field name="contact_sex"/>
                    <a:field name="contact_sex_name" displayField="code_value_name" options="fnd9220_sex_ds" returnField="contact_sex" valueField="code_value"/>
                    <a:field name="id_type"/>
                    <a:field name="id_type_name" displayField="code_value_name" options="fnd9220_idType_ds" returnField="id_type" valueField="code_value"/>
                    <a:field name="id_number"/>
                    <a:field name="department"/>
                    <a:field name="position"/>
                    <a:field name="mobile_phone" required="true" requiredMessage="${l:FND_COM_SUP_CONTACTS.MOBIL}${l:PROMPT.INPUT}"/>
                    <a:field name="telephone"/>
                    <a:field name="email"/>
                    <a:field name="default_contact_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="contact_comments"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onCompanySupplierContactsDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- ACCOUNTS -->
            <a:dataSet id="fnd9220_companySupplierAccounts_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_accounts" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_accounts/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="account_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="bank_code" lovHeight="500" lovService="pur.public.csh_banks_lov" lovWidth="500" title="FND9220.BANK_LOV_TITLE">
                        <a:mapping>
                            <a:map from="bank_code" to="bank_code"/>
                            <a:map from="bank_name" to="bank_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="bank_branch_name"/>
                    <a:field name="bank_account_name"/>
                    <a:field name="bank_account_number"/>
                    <a:field name="primary_account_flag" checkedValue="Y" defaultValue="N" uncheckedValue="N"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onCompanySupplierAccountsDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- FINANCE -->
            <a:dataSet id="fnd9220_companySupplierFinances_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_finances" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_finances/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="finance_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="year_period" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.YEAR_PERIOD}${l:PROMPT.INPUT}"/>
                    <a:field name="total_assets" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.TOTAL_ASSETS}${l:PROMPT.INPUT}"/>
                    <a:field name="total_liabilities" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.TOTAL_LIABILITIES}${l:PROMPT.INPUT}"/>
                    <a:field name="current_assets" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.CURRENT_ASSETS}${l:PROMPT.INPUT}"/>
                    <a:field name="current_liabilities" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.CURRENT_LIABILITIES}${l:PROMPT.INPUT}"/>
                    <a:field name="revenue" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.REVENUE}${l:PROMPT.INPUT}"/>
                    <a:field name="net_profit" required="true" requiredMessage="${l:FND_COM_SUP_FINANCES.NET_PROFIT}${l:PROMPT.INPUT}"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onCompanySupplierFinancesDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- ADDRESS -->
            <a:dataSet id="fnd9220_companySupplierAddresses_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_addresses" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_addresses/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="address_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="country_code"/>
                    <a:field name="country_name" lovHeight="500" lovService="public.fnd_country_lov" lovWidth="500" required="true" requiredMessage="${l:FND_COM_SUP_ADDRESSES.COUNTRY_CODE}${l:PROMPT.INPUT}" title="FND_COM_SUP_ADDRESSES.COUNTRY_CODE_CHOOSE">
                        <a:mapping>
                            <a:map from="country_code" to="country_code"/>
                            <a:map from="country_name" to="country_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="province_id"/>
                    <a:field name="province_name" lovHeight="500" lovWidth="500" readOnly="true" title="FND_COM_SUP_ADDRESSES.PROVINCE_CHOOSE">
                        <a:mapping>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_name" to="province_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="city_id"/>
                    <a:field name="city_name" lovHeight="500" lovWidth="500" readOnly="true" title="FND_COM_SUP_ADDRESSES.CITY_CHOOSE">
                        <a:mapping>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_name" to="city_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="address_detail_desc" required="true" requiredMessage="${l:FND_COM_SUP_ADDRESSES.ADDRESS_DETAIL_ID}${l:PROMPT.INPUT}"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="submitSuccess" handler="fnd9220_onCompanySupplierAddressesDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- Delivery_Address -->
            <a:dataSet id="fnd9220_deliveryAddresses_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_delivery_address" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_delivery_address/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="delivery_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="address_source"/>
                    <a:field name="address_source_display" displayField="code_value_name" options="fnd9220_delivery_address_source" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.ADDRESS_REQUIRE}" returnField="address_source" valueField="code_value"/>
                    <a:field name="address_type_display" displayField="code_value_name" options="fnd9220_delivery_address_type" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.TYPE_REQUIRE}" returnField="address_type" valueField="code_value"/>
                    <a:field name="inv_organization_id"/>
                    <!-- <a:field name="inv_organization_name" lovHeight="500" lovService="public.fnd_inv_organization_lov" lovWidth="500" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.INV_ORGANIZATION_REQUIRE}" title="FND_COMPANY_SUPPLIER.INV_ORGANIZATION_REQUIRE">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_code" to="inv_organization_code"/>
                            <a:map from="inv_organization_name" to="inv_organization_name"/>
                        </a:mapping>
                    </a:field> -->
                    <a:field name="country_name" lovHeight="500" lovService="public.fnd_country_lov" lovWidth="500" required="true" requiredMessage="${l:FND_COM_SUP_ADDRESSES.COUNTRY_CODE}${l:PROMPT.INPUT}" title="FND_COM_SUP_ADDRESSES.COUNTRY_CODE_CHOOSE">
                        <a:mapping>
                            <a:map from="country_code" to="country_code"/>
                            <a:map from="country_name" to="country_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="province_id"/>
                    <a:field name="province_name" lovHeight="500" lovWidth="500" readOnly="true" title="FND_COM_SUP_ADDRESSES.PROVINCE_CHOOSE">
                        <a:mapping>
                            <a:map from="province_id" to="province_id"/>
                            <a:map from="province_name" to="province_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="city_id"/>
                    <a:field name="city_name" lovHeight="500" lovService="public.fnd_city_lov" lovWidth="500" title="FND_COM_SUP_ADDRESSES.CITY_CHOOSE">
                        <a:mapping>
                            <a:map from="city_id" to="city_id"/>
                            <a:map from="city_name" to="city_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="county_id"/>
                    <a:field name="county_name" lovHeight="500" lovService="public.fnd_county_lov" lovWidth="500" title="FND_COMPANY_SUPPLIER.COUNTY_TITLE">
                        <a:mapping>
                            <a:map from="county_id" to="county_id"/>
                            <a:map from="county_name" to="county_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="town_id"/>
                    <a:field name="town_name" lovHeight="500" lovService="public.fnd_town_lov" lovWidth="500" title="FND_COMPANY_SUPPLIER.TOWN_TITLE">
                        <a:mapping>
                            <a:map from="town_id" to="town_id"/>
                            <a:map from="town_name" to="town_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="email" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.CONTACT_EMAIL_REQUIRE}"/>
                    <a:field name="address_detail" required="true" requiredMessage="${l:FND_COM_SUP_ADDRESSES.ADDRESS_DETAIL_ID}${l:PROMPT.INPUT}"/>
                    <a:field name="contact_name" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.CONTACT_NAME_REQUIRE}"/>
                    <a:field name="mobile_phone" required="true" requiredMessage="${l:FND_COMPANY_SUPPLIER.CONTACT_PHONE_REQUIRE}"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="default_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="fnd9220_deliveryAddressUpdate_fun"/>
                    <a:event name="submitSuccess" handler="fnd9220_onDeliveryAddressesDs_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
            <!-- CATEGORIES -->
            <a:dataSet id="fnd9220_company_supplier_categories_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_categories" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_categories/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="category_code" autoComplete="true" autoCompleteField="category_code" lovHeight="500" lovService="public.mtl_category_user_defined_tree_query" lovWidth="530" required="true" title="采购品类选择">
                        <a:mapping>
                            <a:map from="category_udf_id" to="category_udf_id"/>
                            <a:map from="category_code" to="category_code"/>
                            <a:map from="category_name" to="category_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
            <!-- AWARDS -->
            <a:dataSet id="fnd9220_company_supplier_awards_ds" autoQuery="true" model="fnd.FND9220.fnd_9220_com_sup_awards" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd_9220_com_sup_awards/query?company_id=${/parameter/@company_id}" selectable="true">
                <a:fields>
                    <a:field name="award_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="award_category_display" displayField="flex_desc" options="fnd9220_com_sup_award_category_ds" required="true" returnField="award_category" valueField="flex_value"/>
                    <a:field name="award_scope_display" displayField="flex_desc" options="fnd9220_com_sup_award_scope_ds" required="true" returnField="award_scope" valueField="flex_value"/>
                </a:fields>
            </a:dataSet>
            <!-- ATTACHMENTS -->
            <a:dataSet id="fnd9220_companySupplierAttachments_ds" autoQuery="true" model="fnd.FND9220.fnd9220_vendor_survey_attachment" queryUrl="${/request/@context_path}/autocrud/fnd.FND9220.fnd9220_vendor_survey_attachment/query?company_id=${/parameter/@company_id}" selectFunction="fnd9220_companySupplierAttachments_ds_selectFun" selectable="true">
                <a:fields>
                    <a:field name="attachment_id"/>
                    <a:field name="company_id" defaultValue="${/parameter/@company_id}"/>
                    <a:field name="attachment_name"/>
                    <a:field name="attachment_type"/>
                    <a:field name="attachment_type_desc" displayField="flex_desc" options="fnd9220_attachment_type_ds" required="true" returnField="attachment_type" valueField="flex_value"/>
                    <a:field name="required_flag" checkedValue="Y" defaultValue="N" readOnly="true" uncheckedValue="N"/>
                    <a:field name="invalid_date"/>
                    <a:field name="last_upload_date"/>
                </a:fields>
                <a:events>
                    <a:event name="submitsuccess" handler="fnd92200_attachment_ds_submitsuccessFun"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:toolbarButton id="fnd9220_companySupplier_saveBtu" click="fnd9220_companySupplier_saveFun" style="margin-left:20px;" text="HAP_SAVE" width="100"/>
                <a:toolbarButton id="fnd9220_companySupplier_cancelBtu" click="fnd9220_companySupplier_cancelFun" text="PROMPT.CLOSE" width="100"/>
            </a:screenTopToolbar>
            <a:hBox>
                <!-- <a:treeGrid id="fnd9220_query_parameter_tree" bindTarget="fnd9220_query_parameter_tree_ds" expandField="expand" idField="query_code" marginHeight="80" parentField="parent_query_code" sequenceField="sequence" showCheckBox="false" width="200">
                    <a:columns>
                        <a:column name="query_name" align="left" prompt="项目" renderer="fnd9220_treeGrid_renderer" width="180"/>
                    </a:columns>
                    <a:events>
                        <a:event name="rowclick" handler="fnd9220_tree_click"/>
                    </a:events>
                </a:treeGrid> -->
                <a:vBox>
                    <a:fieldSet style="margin-top:10px;margin-left:2px;" title="FND9100.REGISTED_INFORMATION">
                        <a:hBox labelWidth="110">
                            <a:textField name="company_full_name" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:textField name="company_short_name" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:textField name="company_code" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:textField name="business_address" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND9100.BUSINESS_ADDRESS"/>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:comboBox name="domestic_foreign_relation_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.DOMESTIC_FOREIGN_RELATION" readOnly="false"/>
                            <a:textField name="d_b_code" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.D_B_CODE" readOnly="false"/>
                            <a:comboBox name="institutional_properties_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND9100.INSTITUTIONAL_PROPERTIES"/>
                            <a:comboBox name="enterprise_nature_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.ENTERPRISE_NATURE" readOnly="false"/>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:upload id="fnd9220_upload_au" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="公司授权证明(加盖章)" requireSession="false" sourcetype="FND_COPANIES.COMPANY_AUTHORISE" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="5000"/>
                            <span id="fnd9220_upload_au_span" class="upload_icon"><![CDATA[上传附件]]></span>
                        </a:hBox>
                    </a:fieldSet>
                    <a:fieldSet style="margin-top:10px;margin-left:2px;" title="FND9100.THREE_INFORMATION">
                        <a:hBox labelWidth="110">
                            <a:checkBox name="three_in_one_flag" bindTarget="fnd9220_companySupplierInfo_ds" width="150"/>
                            <a:checkBox name="one_one_code_flag" bindTarget="fnd9220_companySupplierInfo_ds" width="150"/>
                            <a:textField name="unified_social_code" bindTarget="fnd9220_companySupplierInfo_ds" prompt="统一社会信用代码"/>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:comboBox name="registered_country_name" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:comboBox name="registered_province_desc" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:comboBox name="registered_city_desc" bindTarget="fnd9220_companySupplierInfo_ds"/>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:textField name="address" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:textField name="national_organization_code" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:hBox labelWidth="110" style="margin-left:-3px">
                                <a:upload id="fnd9220_upload_2" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="FND9100.ORGANIZATION_CODE_ATM" requireSession="false" sourcetype="FND_COPANIES.ORGANIZATION_CODE" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="5000"/>
                                <span id="fnd9220_upload_2_span" class="upload_icon"><![CDATA[上传附件]]></span>
                            </a:hBox>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:numberField name="business_license_number" allowDecimals="false" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:datePicker name="business_license_end_date" bindTarget="fnd9220_companySupplierInfo_ds" style="margin-right:-75px" width="90"/>
                            <a:checkBox name="business_license_forever" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:hBox labelWidth="110">
                                <!-- <a:button click="fnd9220_upload1" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_ATTM" text="PROMPT.CLICK_UPLOAD"/> -->
                                <a:upload id="fnd9220_upload_1" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_ATTM" requireSession="false" sourcetype="FND_COPANIES.BUSINESS_LICENSE" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="5000"/>
                                <span id="fnd9220_upload_1_span" class="upload_icon"><![CDATA[上传附件]]></span>
                            </a:hBox>
                        </a:hBox>
                        <a:hBox labelWidth="110">
                            <a:comboBox name="taxpayer_type_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.TAXPAYER_IDENTIFICATION"/>
                            <a:textField name="tax_id_number" bindTarget="fnd9220_companySupplierInfo_ds"/>
                            <a:hBox labelWidth="110" style="margin-left:-3px">
                                <!-- <a:button click="fnd9220_upload_taxNumber" prompt="FND9100.TAX_REGISTED_SCAN" text="PROMPT.CLICK_UPLOAD"/> -->
                                <a:upload id="fnd9220_upload_3" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="FND9100.TAX_REGISTED_SCAN" requireSession="false" sourcetype="FND_COPANIES.TAX_NUMBER" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="5000"/>
                                <span id="fnd9220_upload_3_span" class="upload_icon"><![CDATA[上传附件]]></span>
                            </a:hBox>
                        </a:hBox>
                    </a:fieldSet>
                    <a:tabPanel id="fnd9220_contact_infor_id" height="180" marginWidth="280">
                        <a:tabs>
                            <a:tab prompt="法人信息" width="120">
                                <a:hBox labelWidth="110" style="margin-top:20px">
                                    <a:textField name="legal_rep_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="姓名"/>
                                    <a:textField name="legal_rep_phone" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    <a:hBox labelWidth="110">
                                        <a:upload id="fnd9220_upload_4" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="正面图片" requireSession="false" sourcetype="FND_COPANIES.LEGAL_REP_IDENTITY_FRONT" text="附件上传" totalfilesize="5000"/>
                                        <span id="fnd9220_upload_4_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                    </a:hBox>
                                </a:hBox>
                                <a:hBox labelWidth="110">
                                    <a:textField name="legal_rep_identity_num" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    <a:comboBox name="legal_rep_identity_type_desc" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    <a:hBox labelWidth="110">
                                        <a:upload id="fnd9220_upload_5" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="背面图片" requireSession="false" sourcetype="FND_COPANIES.LEGAL_REP_IDENTITY_BACK" text="附件上传" totalfilesize="5000"/>
                                        <span id="fnd9220_upload_5_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                    </a:hBox>
                                </a:hBox>
                            </a:tab>
                            <a:tab prompt="业务负责人信息" width="120">
                                <a:hBox labelWidth="110" style="margin-top:20px">
                                    <a:textField name="business_represent_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="姓名"/>
                                    <a:comboBox name="business_rep_identity_desc" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    <a:textField name="business_rep_identity_num" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                                </a:hBox>
                                <a:hBox labelWidth="110">
                                    <a:textField name="business_rep_position" bindTarget="fnd9220_companySupplierInfo_ds" prompt="职位"/>
                                    <a:textField name="business_represent_phone" bindTarget="fnd9220_companySupplierInfo_ds" prompt="手机号码"/>
                                    <a:textField name="business_represent_mail" bindTarget="fnd9220_companySupplierInfo_ds" prompt="邮箱"/>
                                </a:hBox>
                            </a:tab>
                            <a:tab prompt="跟单员信息" width="120">
                                <a:hBox labelWidth="110" style="margin-top:20px">
                                    <a:textField name="financial_represent_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="姓名"/>
                                    <a:comboBox name="finance_rep_identity_desc" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    <a:textField name="finance_rep_identity_num" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                                </a:hBox>
                                <a:hBox labelWidth="110">
                                    <a:textField name="finance_rep_position" bindTarget="fnd9220_companySupplierInfo_ds" prompt="职位"/>
                                    <a:textField name="financial_represent_phone" bindTarget="fnd9220_companySupplierInfo_ds" prompt="手机号码"/>
                                    <a:textField name="financial_represent_mail" bindTarget="fnd9220_companySupplierInfo_ds" prompt="邮箱"/>
                                </a:hBox>
                            </a:tab>
                        </a:tabs>
                    </a:tabPanel>
                    <a:tabPanel id="fnd9220_supplier_info_tabpanel_id" marginWidth="280" style="margin-top:10px">
                        <a:tabs>
                            <a:tab prompt="基本信息" width="100">
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="企业联系信息">
                                    <a:hBox labelWidth="110">
                                        <a:textField name="post_code" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.POST_CODE" readOnly="false"/>
                                        <a:textField name="zone_code" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.ZONE_CODE" readOnly="false"/>
                                        <a:textField name="fax_no" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.FAX_NO" readOnly="false"/>
                                        <a:textField name="official_telephone" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.OFFICAL_TELEPHONE" readOnly="false"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textField name="customer_service_phone" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.CUSTOMER_SERVICE_PHONE" readOnly="false" width="150"/>
                                        <a:textField name="website" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.WEBSITE" readOnly="false" width="417"/>
                                    </a:hBox>
                                </a:fieldSet>
                                <a:fieldSet style="margin-top:10px;margin-left:2px;" title="FND9220.BUSINESS_FIELDSET_TITLE">
                                    <a:hBox labelWidth="110">
                                        <!-- <a:label prompt="FND_COMPANY_REGISTED.BUSINESS_DIRECTION" width="0"/>
                                        <a:checkBox name="require_flag" bindTarget="fnd9220_companySupplierInfo_ds" width="0"/>
                                        <a:checkBox name="supply_flag" bindTarget="fnd9220_companySupplierInfo_ds" width="0"/> -->
                                        <!-- <a:checkBox name="service_flag" bindTarget="fnd9220_companySupplierInfo_ds" width="70"/> -->
                                        <a:comboBox name="supplier_categroy_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="PUR_VENDORS.VENDOR_CATEGORY"/>
                                        <a:comboBox name="industry_type_name" bindTarget="fnd9220_companySupplierInfo_ds"/>
                                    </a:hBox>
                                    <a:hBox id="fnd9100_upload_bo_hBox" labelWidth="110">
                                        <a:upload id="fnd9220_upload_bo" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="环保资质证书" requireSession="false" sourcetype="FND_COPANIES.COMPANY_ENVIRONMENT" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="10000"/>
                                        <span id="fnd9220_upload_bo_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                    </a:hBox>
                                    <a:hBox id="fnd9100_upload_ag_hBox" labelWidth="110">
                                        <a:upload id="fnd9220_upload_ag" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="代理授权证书" requireSession="false" sourcetype="FND_COPANIES.COMPANY_AGENT" text="FND9100.ATTACHMENT_UPLOAD" totalfilesize="10000"/>
                                        <span id="fnd9220_upload_ag_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textField name="main_category" bindTarget="fnd9220_companySupplierInfo_ds" prompt="主营品类" width="417"/>
                                        <a:comboBox name="factory_nature_name" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.FACTORY_NATURE" readOnly="false"/>
                                        <a:numberField name="factory_area" allowNegative="false" bindTarget="fnd9220_companySupplierInfo_ds" prompt="FND_COM_SUP_INFOS.FACTORY_AREA" readOnly="false"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:checkBox name="iso14000_flag" bindTarget="fnd9220_companySupplierInfo_ds" prompt="ISO14000认证"/>
                                        <a:checkBox name="iso9001_flag" bindTarget="fnd9220_companySupplierInfo_ds" prompt="ISO9001认证"/>
                                        <a:textField name="other_certificate" bindTarget="fnd9220_companySupplierInfo_ds" prompt="其他认证" width="421"/>
                                        <a:numberField name="number_employees" allowDecimals="false" bindTarget="fnd9220_companySupplierInfo_ds" prompt="员工数量"/>
                                    </a:hBox>
                                    <a:vBox labelWidth="110">
                                        <a:hBox id="fnd9220_iso14000_hBox" labelWidth="110">
                                            <a:datePicker name="iso14000_flag_end_date" bindTarget="fnd9220_companySupplierInfo_ds" prompt="ISO14000有效期"/>
                                            <a:upload id="fnd9220_upload_6" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="ISO14000扫描件" requireSession="false" sourcetype="FND_COPANIES.ISO14000_CERTIFICATE" text="附件上传" totalfilesize="5000"/>
                                            <span id="fnd9220_upload_6_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                        </a:hBox>
                                        <a:hBox id="fnd9220_iso9001_hBox" labelWidth="110">
                                            <a:datePicker name="iso9001_flag_end_date" bindTarget="fnd9220_companySupplierInfo_ds" prompt="ISO9001有效期"/>
                                            <a:upload id="fnd9220_upload_7" buttonWidth="75" className="register-upLoad" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/parameter/@company_id}" prompt="ISO9001扫描件" requireSession="false" sourcetype="FND_COPANIES.ISO9001_CERTIFICATE" text="附件上传" totalfilesize="5000"/>
                                            <span id="fnd9220_upload_7_span" class="upload_icon"><![CDATA[上传附件]]></span>
                                        </a:hBox>
                                    </a:vBox>
                                    <a:hBox labelWidth="110">
                                        <a:textArea name="supply_abstract" bindTarget="fnd9220_companySupplierInfo_ds" emptyText="可填写最新企业简介，介绍企业在行业内的排名或地位等，不超过500字。" prompt="FND_COM_SUP_INFOS.SUPPLY_ABSTRACT" readOnly="false" width="682"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textArea name="business_scope" bindTarget="fnd9220_companySupplierInfo_ds" emptyText="请按照营业执照经营范围填写，不超过500字。" prompt="FND_COM_SUP_INFOS.BUSINESS_SCOPE" readOnly="false" width="682"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textArea name="agent_brand" bindTarget="fnd9220_companySupplierInfo_ds" emptyText="可介绍代理品牌，建议输入品牌全称，不超过500字。" prompt="FND_COM_SUP_INFOS.AGENT_BRAND" readOnly="false" width="682"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textArea name="partner_info" bindTarget="fnd9220_companySupplierInfo_ds" emptyText="可介绍合作企业、顾客信息、供应商信息等，不超过500字。" prompt="FND_COM_SUP_INFOS.PARTNER_INFO" readOnly="false" width="682"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="110">
                                        <a:textArea name="comments" bindTarget="fnd9220_companySupplierInfo_ds" emptyText="可对业务情况做补充说明，如专业资质、市场业绩等，不超过500字。" prompt="FND_COM_SUP_INFOS.COMMENTS" readOnly="false" width="682"/>
                                    </a:hBox>
                                </a:fieldSet>
                            </a:tab>
                            <a:tab prompt="FND9220.CONTACT_INFORMATION" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_companySupplierContacts_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button click="fnd9220_companySupplierContacts_saveFun" text="PROMPT.SAVE"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="contact_name" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.CONTACT_NAME" width="65"/>
                                        <a:column name="contact_sex_name" align="left" editor="fnd9220_contact_cbx" prompt="FND_COM_SUP_CONTACTS.SEX" width="40"/>
                                        <a:column name="id_type_name" align="left" editor="fnd9220_contact_cbx" prompt="FND_COM_SUP_CONTACTS.ID_TYPE" width="60"/>
                                        <a:column name="id_number" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.ID_NUMBER" width="120"/>
                                        <a:column name="department" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.DEPARTMENT" width="80"/>
                                        <a:column name="position" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.POSITION" width="80"/>
                                        <a:column name="mobile_phone" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.MOBIL" width="100"/>
                                        <a:column name="telephone" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.PHONE" width="100"/>
                                        <a:column name="email" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.EMAIL" width="120"/>
                                        <a:column name="default_contact_flag" align="center" editor="fnd9220_contact_cb" prompt="FND_COM_SUP_CONTACTS.DEFAULT_CONTACT_FLAG" width="65"/>
                                        <a:column name="contact_comments" align="left" editor="fnd9220_contact_tf" prompt="FND_COM_SUP_CONTACTS.CONTACT_COMMENTS" width="90"/>
                                        <a:column name="enabled_flag" align="center" editor="fnd9220_contact_cb" prompt="FND_COM_SUP_CONTACTS.ENABLED_FLAG" width="40"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:textField id="fnd9220_contact_tf"/>
                                        <a:comboBox id="fnd9220_contact_cbx"/>
                                        <a:checkBox id="fnd9220_contact_cb"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="FND9220.ADDRESS_INFORMATION" width="100">
                                <a:grid id="fnd9220_site_grid" autoAppend="false" bindTarget="fnd9220_companySupplierAddresses_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="country_name" align="left" editor="fnd9220_site_lov" prompt="FND_COM_SUP_ADDRESSES.COUNTRY_CODE" width="120"/>
                                        <a:column name="province_name" align="left" editor="fnd9220_site_lov" prompt="FND_COM_SUP_ADDRESSES.PROVINCE_ID" width="100"/>
                                        <a:column name="city_name" align="left" editor="fnd9220_site_lov" prompt="FND_COM_SUP_ADDRESSES.CITY_ID" width="100"/>
                                        <a:column name="address_detail_desc" align="left" editor="fnd9220_site_tf" prompt="FND_COM_SUP_ADDRESSES.ADDRESS_DETAIL_ID" width="150"/>
                                        <a:column name="post_code" align="left" editor="fnd9220_site_tf" prompt="FND_COM_SUP_ADDRESSES.POST_CODE" width="60"/>
                                        <a:column name="address_comments" align="left" editor="fnd9220_site_tf" prompt="FND_COM_SUP_ADDRESSES.ADDRESS_COMMENTS" width="150"/>
                                        <a:column name="enabled_flag" align="center" editor="fnd9220_site_cb" prompt="FND_COM_SUP_ADDRESSES.ENABLED_FLAG" width="60"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="fnd9220_site_lov"/>
                                        <a:textField id="fnd9220_site_tf"/>
                                        <a:checkBox id="fnd9220_site_cb"/>
                                    </a:editors>
                                    <a:events>
                                        <a:event name="cellclick" handler="fnd9220_addressesCellClick_fun"/>
                                    </a:events>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="收货地址" width="100">
                                <a:grid id="fnd9220_delivery_address_grid1" autoAppend="false" bindTarget="fnd9220_deliveryAddresses_ds" height="304" marginWidth="280" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="address_source_display" align="center" editor="fnd9220_delivery_address_cmb" prompt="FND_COMPANY_SUPPLIER.PROMPT_ADDRESS_TYPE" width="100"/>
                                        <a:column name="address_type_display" align="center" editor="fnd9220_delivery_address_cmb" prompt="FND_COMPANY_SUPPLIER.PROMPT_ADDRESS_SOURCE" width="80"/>
                                        <!-- <a:column name="inv_organization_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_ADDRESS_ORGANIZATION" width="100"/> -->
                                        <a:column name="country_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_COUNTRY_NAME" width="50"/>
                                        <a:column name="province_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_PROVINCE_NAME" width="50"/>
                                        <a:column name="city_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_CITY_NAME" width="50"/>
                                        <a:column name="county_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_COUNTY_NAME" width="50"/>
                                        <a:column name="town_name" align="left" editor="fnd9220_delivery_address_lov" prompt="FND_COMPANY_SUPPLIER.PROMPT_TOWN_NAME" width="50"/>
                                        <a:column name="contact_name" align="left" editor="fnd9220_delivery_address_tf" prompt="FND_COMPANY_SUPPLIER.PROMPT_CONTACT_NAME" width="90"/>
                                        <a:column name="mobile_phone" align="left" editor="fnd9220_delivery_address_tf" prompt="FND_COMPANY_SUPPLIER.PROMPT_CONTACT_PHONE" width="90"/>
                                        <a:column name="email" align="left" editor="fnd9220_delivery_address_tf" prompt="FND_COMPANY_SUPPLIER.PROMPT_CONTACT_EMAIL" width="90"/>
                                        <a:column name="address_detail" align="left" editor="fnd9220_delivery_address_tf" prompt="FND_COMPANY_SUPPLIER.PROMPT_ADDRESS" width="150"/>
                                        <a:column name="enabled_flag" align="left" editor="fnd9220_delivery_address_cb" prompt="FND_COMPANY_SUPPLIER.PROMPT_ENABLED" width="60"/>
                                        <a:column name="default_flag" align="left" editor="fnd9220_delivery_address_cb" prompt="FND_COMPANY_SUPPLIER.PROMPT_DEFAULT" width="60"/>
                                        <a:column name="comments" align="left" editor="fnd9220_delivery_address_tf" prompt="FND_COMPANY_SUPPLIER.PROMPT_COMMENTS" width="120"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="fnd9220_delivery_address_lov"/>
                                        <a:textField id="fnd9220_delivery_address_tf"/>
                                        <a:checkBox id="fnd9220_delivery_address_cb"/>
                                        <a:comboBox id="fnd9220_delivery_address_cmb"/>
                                    </a:editors>
                                    <a:events>
                                        <a:event name="cellclick" handler="fnd9220_deliveryAddressCellClick_fun"/>
                                    </a:events>
                                </a:grid>
                            </a:tab>
                            <!-- <a:tab prompt="奖惩情况" width="110">
                                <a:grid id="fnd9220_company_supplier_awards_grid" bindTarget="fnd9220_company_supplier_awards_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="award_category_display" align="center" editor="fnd9220_awards_grid_cmb" prompt="类别" width="100"/>
                                        <a:column name="award_scope_display" align="center" editor="fnd9220_awards_grid_cmb" prompt="认可范围" width="100"/>
                                        <a:column name="comments" editor="fnd9220_awards_grid_tf" prompt="说明" width="200"/>
                                        <a:column name="atm_file" align="center" prompt="附件信息" renderer="fnd9220_atm_file_renderer" width="80"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:comboBox id="fnd9220_awards_grid_cmb"/>
                                        <a:textField id="fnd9220_awards_grid_tf"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="采购品类信息" width="100">
                                <a:grid id="fnd9220_company_supplier_categories_grid" bindTarget="fnd9220_company_supplier_categories_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="category_code" editor="fnd9220_categories_grid_lov" prompt="采购品类代码" width="100"/>
                                        <a:column name="category_name" prompt="采购品类名称" width="200"/>
                                        <a:column name="enabled_flag" align="center" editor="fnd9220_categories_grid_cb" prompt="启用" width="80"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="fnd9220_categories_grid_lov"/>
                                        <a:checkBox id="fnd9220_categories_grid_cb"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab> -->
                            <a:tab prompt="FND9220.ACCOUNT_INFORMATION" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_companySupplierAccounts_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button click="fnd9220_companySupplierAccounts_saveFun" text="PROMPT.SAVE"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="bank_code" align="center" editor="fnd9220_account_lov" prompt="FND_COM_SUP_ACCOUNTS.BANK_CODE" width="60"/>
                                        <a:column name="bank_name" align="left" prompt="FND_COM_SUP_ACCOUNTS.BANK_NAME" width="80"/>
                                        <a:column name="bank_branch_name" align="left" editor="fnd9220_account_tf" prompt="FND_COM_SUP_ACCOUNTS.OPENING_BANK_NAME" width="120"/>
                                        <a:column name="bank_account_name" align="left" editor="fnd9220_account_tf" prompt="FND_COM_SUP_ACCOUNTS.BANK_ACCOUNT_NAME" width="100"/>
                                        <a:column name="bank_account_number" align="left" editor="fnd9220_account_tf" prompt="FND_COM_SUP_ACCOUNTS.BANK_ACCOUNT" width="120"/>
                                        <a:column name="primary_account_flag" align="center" editor="fnd9220_account_cb" prompt="FND_COM_SUP_ACCOUNTS.PRIMARY_ACCOUNT_FLAG" width="60"/>
                                        <a:column name="enabled_flag" align="center" editor="fnd9220_account_cb" prompt="FND_COM_SUP_ACCOUNTS.ENABLED_FLAG" width="60"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="fnd9220_account_lov"/>
                                        <a:textField id="fnd9220_account_tf"/>
                                        <a:checkBox id="fnd9220_account_cb"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="FND9220.FINANCIAL_SITUATION" width="100">
                                <a:grid id="fnd9220_companySupplierFinances_grid" bindTarget="fnd9220_companySupplierFinances_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="delete"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="year_period" align="center" editorFunction="fnd9220_yearPeriod_ef" prompt="FND_COM_SUP_FINANCES.YEAR_PERIOD" width="80"/>
                                        <a:column name="total_assets" align="center" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.TOTAL_ASSETS" width="80"/>
                                        <a:column name="total_liabilities" align="center" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.TOTAL_LIABILITIES" width="80"/>
                                        <a:column name="current_assets" align="center" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.CURRENT_ASSETS" width="80"/>
                                        <a:column name="current_liabilities" align="center" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.CURRENT_LIABILITIES" width="80"/>
                                        <a:column name="revenue" align="center" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.REVENUE" width="80"/>
                                        <a:column name="net_profit" align="right" editor="fnd9220_number_nf" prompt="FND_COM_SUP_FINANCES.NET_PROFIT" width="80"/>
                                        <a:column name="asset_liability_ratio" align="right" prompt="PUR_REGISTER_VENDOR_REJECT_DETAIL.ASSET_LIABILITY_RATIO" width="100"/>
                                        <a:column name="current_ratio" align="right" prompt="PUR_REGISTER_VENDOR_REJECT_DETAIL.CURRENT_RATIO" width="100"/>
                                        <a:column name="total_asset_earning_ratio" align="right" prompt="PUR_REGISTER_VENDOR_REJECT_DETAIL.ROE" width="100"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:numberField id="fnd9220_yearPeriod_nf"/>
                                        <a:numberField id="fnd9220_number_nf" allowDecimals="true" decimalPrecision="2"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                            <a:tab prompt="FND9220.ATTACHMENT_INFORMATION" width="100">
                                <a:grid autoAppend="false" bindTarget="fnd9220_companySupplierAttachments_ds" height="300" marginWidth="304" navBar="true">
                                    <a:toolBar>
                                        <a:button type="add"/>
                                        <a:button type="save"/>
                                        <a:button type="clear"/>
                                    </a:toolBar>
                                    <a:columns>
                                        <a:column name="attachment_type_desc" align="center" editorFunction="fnd9220_com_sup_attachment_editorFun" prompt="附件类型" width="100"/>
                                        <a:column name="attachment_name" editor="fnd9220_com_sup_attachment_tab_tf" prompt="附件描述" width="200"/>
                                        <a:column name="required_flag" align="center" prompt="是否必传" width="80"/>
                                        <a:column name="invalid_date" align="center" editor="fnd9220_com_sup_attachment_tab_dp" prompt="文件到期日" renderer="Aurora.formatDate" width="100"/>
                                        <a:column name="last_upload_date" align="center" prompt="最后上传时间" width="130"/>
                                        <a:column name="attachment_id" align="center" prompt="附件信息" renderer="fnd9220_upload_renderer" width="100"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:comboBox id="fnd9220_com_sup_attachment_tab_cbb"/>
                                        <a:textField id="fnd9220_com_sup_attachment_tab_tf"/>
                                        <a:datePicker id="fnd9220_com_sup_attachment_tab_dp"/>
                                    </a:editors>
                                </a:grid>
                            </a:tab>
                        </a:tabs>
                        <a:events>
                            <a:event name="select" handler="fnd9220_com_supplier_tabpanel_select_handler"/>
                        </a:events>
                    </a:tabPanel>
                </a:vBox>
            </a:hBox>
        </a:screenBody>
        <script><![CDATA[
            Aurora.onReady(function() {
                for (var i = 1;i <= 7;i++) {
                    fnd9220_set_upload_init('fnd9220_upload_' + i, 205);
                }
                fnd9220_set_upload_init('fnd9220_upload_au', 205);
                fnd9220_set_upload_init('fnd9220_upload_bo', 205);
                fnd9220_set_upload_init('fnd9220_upload_ag', 205);
            
                function fnd9220_set_upload_init(id, w) {
                    var div = document.getElementById(id);
                    if (div) {
                        div.children[1].style.minHeight = '24px';
                        div.children[1].style.minWidth = w + 'px';
                        div.children[1].style.border = '1px solid #dfe0e0';
                        div.children[1].children[1].style.padding = '2px';
                        div.children[1].style.marginTop = '0px';
                        div.children[0].children[0].style.opacity = '0';
                        div.children[0].children[0].style.height = '26px';
                        var span = document.getElementById(id + '_span');
                        if (span) {
                            span.parentNode.style.position = 'relative';
                        }
                    } else {
                        div = document.getElementById(id + '_ul').parentNode;
                        div.className = 'registed-ie-upload';
                        div.style.border = '1px solid #dfe0e0';
                        //div.parentNode.children[0].className = 'registed-ieupload-span';
                    }
            
                }
            });
        ]]></script>
    </a:view>
</a:screen>
