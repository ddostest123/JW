<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: Dru  
    $Date: 2014-7-2 下午11:10:48  
    $Revision: 1.0  
    $Purpose: 注册核心企业审批
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure>
        <a:model-query defaultwhereclause="t.code =&apos;REGISTER_GROUP_COMPANY_FLG&apos; " model="sys.sys_code_values_v" rootpath="group_company_flg"/>
    </a:init-procedure>
    <a:view package="aurora.ui.std" template="default">
        <a:link id="fnd9040_companyRegistedApprove_link" model="fnd.FND9040.fnd_company_registed_approve" modelaction="update"/>
        <a:link id="fnd9040_invoke_gatews_link" url="${/request/@context_path}/modules/fnd/FND9040/fnd_company_registed_approve_invoke_gatews.svc"/>
        <a:link id="fnd9040_companyRegistedReject_link" model="fnd.FND9040.fnd_company_registed_approve" modelaction="execute"/>
        <link href="${/request/@context_path}/mainpage_facility/plugins/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>
        <link href="${/request/@context_path}/css/regestercss/regester-common.css" rel="stylesheet" type="text/css"/>
        <link href="${/request/@context_path}/component/handRegesterSteps/HandRegesterStep.css?v=1.2" rel="stylesheet" type="text/css"/>
        <script src="${/request/@context_path}/component/handRegesterSteps/HandRegisterStep.js"/>
        <link href="${/request/@context_path}/component/handLocationPicker/handLocationPicker.css" rel="stylesheet" type="text/css"/>
        <script language="JavaScript" src="${/request/@context_path}/index/js/jquery-1.8.3.min.js"/>
        <link href="${/request/@context_path}/component/Font-Awesome-3.2.1/css/font-awesome.min.css?v=2.14" rel="stylesheet" type="text/css"/>
        <script><![CDATA[jQuery.noConflict();]]></script>
        <style><![CDATA[
            
            .content-div > table{
                margin-left:auto;
                margin-right:auto;
            }
            .item-notBlank{
                border-color:#e76e70;
            }
            /* .item-invalid{
                border-color:#1887ca !important;
            } */
            .container .content-div .layout-td-cell .item-tf{
                border-radius:5px;
            }
            
            /*ie下附件上传按钮样式*/
            .swfupload{
                position:absolute;
                float:left;
                z-index:3;
                background-color:#ff0;
                width:64px;
                height:32px;
                margin-left:5px;
                opacity:0
            }
            
            .uplad{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                margin-left: -65px;
                margin-top: -15px;
                text-align:center;
                line-height:35px;
            }           
            .uplad_au{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                margin-left: -65px;
                margin-top: -15px;
                text-align:center;
                line-height:35px;
            } 
            .uplad_add{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                text-align:center;
                line-height:34px;
                /*margin-left:212px;*/
                margin-top:-15px;
            }
            /*李侃添加hover样式*/
            .uplad_add:hover{
                cursor:pointer;
            }
            
            .container .content-div .itemupf > span{
                background-color:#fff;
            }
            
            .tishi{
                color:#f00;
                font-size: 15px;
            }
        ]]></style>
        <!-- 李侃添加，底部样式 -->
        <style><![CDATA[
            .customization-info {
                width: 100%;
                color: #999;
                line-height: 50px;
                height: 50px;
                font-size: 14px;
                text-align: center;
                font-family: Microsoft Yahei,tahoma,arial,sans-serif,helvetica;
                margin-top: 30px;
                background-color: rgb(45,45,45);
            }
        ]]></style>
        <script><![CDATA[
            //上传营业执照
            
            function fnd9040_uploadBusinessLicenceFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.BUSINESS_LICENSE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            //公司授权证明
            
            function fnd9040_uploadCompanyAuthoriseFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.COMPANY_AUTHORISE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            //企业简介证明
            
            
            function fnd9040_uploadSupplyAbstractFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.SUPPLY_ABSTRACT&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //环保资质证明
            
            function fnd9040_uploadCompanyEnvironmentFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.COMPANY_ENVIRONMENT&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //排污许可证明
            
            function fnd9040_uploadCompanyBlowdownFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.COMPANY_BLOWDOWN&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            //代理授权证书
            
            
            function fnd9040_uploadCompanyAgentFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.COMPANY_AGENT&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            
            //ISO14000
            
            function fnd9040_uploadISO14000Fun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.ISO14000_CERTIFICATE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            //ISO9001
            
            function fnd9040_uploadISO9001Fun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.ISO9001_CERTIFICATE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            //组织机构代码附件
            
            function fnd9040_uploadOrganizationFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.ORGANIZATION_CODE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //税务登记证扫描件
            
            function fnd9040_uploadTaxScanFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.TAX_NUMBER&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //上传附件
            
            function fnd9040_uploadLegalIdentityFrontFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.LEGAL_REP_IDENTITY_FRONT&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //上传附件
            
            function fnd9040_uploadLegalIdentityBackFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.LEGAL_REP_IDENTITY_BACK&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            
            function fnd9040_uploadAgentIdentityFrontFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.AGENT_IDENTITY_FRONT&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            function fnd9040_uploadAgentIdentityBackFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.AGENT_IDENTITY_BACK&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            function fnd9040_companyRegistedApproveDetail_loadFcn() {
                debugger;
                var ds = $('fnd9040_companyRegistedApproveDetail_resultDs');
                var record = ds.getAt(0);
                //环保
                var supplier_categroy = record.get('supplier_categroy');
                if (supplier_categroy == '-9191961364319941327') {
                    document.getElementById('fnd9040_agent_id').style.display = 'none';
                    document.getElementById('fnd9040_environment_id').style.display = 'block';
                    document.getElementById('fnd9040_blowdown_id').style.display = 'block';
                    
                } else if (supplier_categroy == '-2149760273639649320') {
                    document.getElementById('fnd9040_agent_id').style.display = 'block';
                    document.getElementById('fnd9040_environment_id').style.display = 'none';
                    document.getElementById('fnd9040_blowdown_id').style.display = 'none';
                } else {
                    document.getElementById('fnd9040_agent_id').style.display = 'none';
                    document.getElementById('fnd9040_environment_id').style.display = 'none';
                    document.getElementById('fnd9040_blowdown_id').style.display = 'none';
                }
            }
            
            function fnd9040_uploadProxyOfEnterpriseFun() {
                var url = "${/request/@context_path}/check_uploadFile.screen?table_name=FND_COPANY_REGISTED.PROXY_OF_ENTERPRISE&header_id=" + $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:PROMPT.VIEW_ATTACHMENT}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //返回
            
            function fnd9040_cancelFun() {
                window.close();
                //$('fnd9040_companyRegistedApproveDetail_window').close();
            }
            
            //确认
            
            
            function fnd9040_confirmFun() {
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR_REGISTER_VENDOR_REJECT_DETAIL.SHOWCONFIRM}', function() {
                    fnd9040_invoke_gateWs();
                }, null, 300, 100);
            }
            
            function fnd9040_invoke_gateWs() {
                debugger;
                var input = document.getElementById('fnd9100_handRegisted_category');
                var kw_main_category = input.children[1].value;
                if (kw_main_category == '' || typeof(kw_main_category) == 'undefined') {
                    Aurora.showMessage('${l:PROMPT}', '请选择景旺主营品类！');
                    return;
                }
                $('fnd9040_confirmBtu').disable();
                $('fnd9040_rejectBtu').disable();
                $('fnd9040_cancelBtu').disable();
                Aurora.request({
                    url: $('fnd9040_invoke_gatews_link').getUrl(),
                    para: {
                        company_registed_id: $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id')
                    },
                    success: function(res) {
                        var response_status = res.result.response_status;
                        if (response_status != 'undefined' && !Ext.isEmpty(response_status) && response_status !== undefined && response_status != 'SUCCESSED' && response_status != 'SUCCESS') {
                            Aurora.showMessage('${l:PROMPT}', '系统繁忙，请稍后再进行审批。');
                            $('fnd9040_confirmBtu').enable();
                            $('fnd9040_rejectBtu').enable();
                            $('fnd9040_cancelBtu').enable();
                            return;
                        }
            
                        var business_group_code = res.result.business_group_code;
                        if (business_group_code == 'undefined' || Ext.isEmpty(business_group_code) || business_group_code === undefined) {
                            business_group_code = '';
                        }
            
                        var company_code = res.result.company_code;
                        if (company_code == 'undefined' || Ext.isEmpty(company_code) || company_code === undefined) {
                            company_code = '';
                        }
            
                        var user_name = res.result.user_name;
                        if (user_name == 'undefined' || Ext.isEmpty(user_name) || user_name === undefined) {
                            user_name = '';
                        }
            
                        var fc_user_name = res.result.fc_user_name;
                        if (fc_user_name == 'undefined' || Ext.isEmpty(fc_user_name) || fc_user_name === undefined) {
                            fc_user_name = '';
                        }
                        fnd9040_confirmlogicFun(business_group_code, company_code, user_name, fc_user_name, kw_main_category);
                    },
                    failure: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    error: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    scope: this
                });
            }
            
            function fnd9040_confirmlogicFun(business_group_code, company_code, user_name, fc_user_name, kw_main_category) {
            
                var approving_comments = $('fnd9040_companyRegistedApproveComment_ds').getAt(0).get('approving_comments');
                if (approving_comments == 'undefined' || Ext.isEmpty(approving_comments)) {
                    approving_comments = '';
                }
                Aurora.request({
                    url: $('fnd9040_companyRegistedApprove_link').getUrl(),
                    para: {
                        company_registed_id: $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id'),
                        approving_comments: approving_comments,
                        business_group_code: business_group_code,
                        company_code: company_code,
                        user_name: user_name,
                        fc_user_name: fc_user_name,
                        kw_main_category: kw_main_category
                    },
                    success: function(res) {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                        fnd9040_cancelFun();
                    },
                    failure: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    error: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    scope: this
                });
            }
            //拒绝
            
            
            function fnd9040_rejectFun() {
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR_REGISTER_VENDOR_REJECT_DETAIL.SHOWCONFIRM}', function() {
                    fnd9040_rejectlogicFun();
                }, null, 300, 100);
            }
            
            //拒绝
            
            function fnd9040_rejectlogicFun() {
                $('fnd9040_confirmBtu').disable();
                $('fnd9040_rejectBtu').disable();
                $('fnd9040_cancelBtu').disable();
                var approving_comments = $('fnd9040_companyRegistedApproveComment_ds').getAt(0).get('approving_comments');
                if (approving_comments == 'undefined' || Ext.isEmpty(approving_comments)) {
                    approving_comments = '';
                }
            
                Aurora.request({
                    url: $('fnd9040_companyRegistedReject_link').getUrl(),
                    para: {
                        company_registed_id: $('fnd9040_companyRegistedApproveDetail_resultDs').getAt(0).get('company_registed_id'),
                        approving_comments: approving_comments
                    },
                    success: function(res) {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                        fnd9040_cancelFun();
                    },
                    failure: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    error: function() {
                        $('fnd9040_confirmBtu').enable();
                        $('fnd9040_rejectBtu').enable();
                        $('fnd9040_cancelBtu').enable();
                    },
                    scope: this
                });
            }
            
            //采购品类信息导入
            var fnd_registed_category = [];
            
            function fnd9100_registed_category_load() {
            
                var records = $('fnd9100_registed_categroy_ds').getAll();
                for (var i = 0;i < records.length;i++) {
                    fnd_registed_category.push(records[i].data);
                }
                loadjscssfile('${/request/@context_path}/component/handRegesterSteps/HandRegisterStep_category_l_new.js?v=1,2', 'js');
            }
        ]]></script>
        <a:dataSets>
            <!-- 采购品类信息查询 -->
            <a:dataSet id="fnd9100_registed_categroy_ds" autoQuery="true" fetchAll="true" model="fnd.FND9100.fnd_registed_category">
                <a:events>
                    <a:event name="load" handler="fnd9100_registed_category_load"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="group_company_flg_ds">
                <a:datas dataSource="group_company_flg"/>
            </a:dataSet>
            
            <a:dataSet id="fnd91011_vendor_detail_idType_ds" lookupCode="FND_COM_SUP_INFOS.ID_TYPE"/>
            <a:dataSet id="fnd91011_vendor_detail_sex_ds" lookupCode="PUR_SEX"/>
             <a:dataSet id="fnd9040_contract_ds"   autoQuery="true"   model="fnd.FND9100.fnd_com_sup_contacts_lov"  queryUrl="${/request/@context_path}/autocrud/fnd.FND9100.fnd_com_sup_contacts_lov/query?company_registed_id=${/parameter/@company_registed_id}"  selectable="true"  >
               <a:fields>
               	    <a:field name="user_role" readOnly="true" />
               	    <a:field name="position"  />
               	    <a:field name="contact_name"  />
               	    <a:field name="email" />
               	    <a:field name="default_flag" />
                    <a:field name="contact_sex"/>
                    <a:field name="contact_sex_name" displayField="code_value_name" options="fnd91011_vendor_detail_sex_ds" returnField="contact_sex" valueField="code_value"/>
                    <a:field name="id_type"/>
                    <a:field name="id_type_name" displayField="code_value_name" options="fnd91011_vendor_detail_idType_ds" returnField="id_type" valueField="code_value"/>
                    <a:field name="id_number"/>
                </a:fields>
            	<!-- <a:events>
                    <a:event name="load" handler="fnd9000_ds_load"/>
                     <a:event name="add" handler="setinitdata"/>
                </a:events> -->
             </a:dataSet>
            <a:dataSet id="fnd9040_companyRegistedApproveComment_ds" autoCreate="true"/>
            <a:dataSet id="fnd9040_companyRegistedApproveDetail_resultDs" autoQuery="true" model="fnd.FND9040.fnd_company_registed_approve" queryUrl="${/request/@context_path}/autocrud/fnd.FND9040.fnd_company_registed_approve/query?company_registed_id=${/parameter/@company_registed_id}">
                <a:fields>
                    <a:field name="general_manager_mail" prompt="总经理邮箱" readOnly="true"/>
                    <a:field name="email" prompt="FND_COMPANY_REGISTED.EMAIL" readOnly="true"/>
                    <a:field name="full_name" prompt="FND_COMPANY_REGISTED.FULL_NAME" readOnly="true"/>
                    <a:field name="short_name" prompt="FND_COMPANY_REGISTED.SHORT_NAME" readOnly="true"/>
                    <a:field name="business_license_number" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_NUMBER" readOnly="true"/>
                    <a:field name="registered_country_code"/>
                    <a:field name="registered_country_name" prompt="FND_COMPANY_REGISTED.REGISTERED_COUNTRY_CODE" readOnly="true"/>
                    <a:field name="registered_province_id"/>
                    <a:field name="registered_province_desc" prompt="FND_COMPANY_REGISTED.REGISTERED_PROVINCE_ID" readOnly="true"/>
                    <a:field name="registered_city_id"/>
                    <a:field name="registered_city_desc" prompt="FND_COMPANY_REGISTED.REGISTERED_CITY_ID" readOnly="true"/>
                    <a:field name="business_license_end_date" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_END_DATE" readOnly="true"/>
                    <a:field name="business_license_forever" checkedValue="Y" defaultValue="N" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_FOREVER" readOnly="true" uncheckedValue="N"/>
                    <a:field name="address" prompt="FND_COMPANY_REGISTED.ADDRESS" readOnly="true"/>
                    <a:field name="telephone" prompt="FND_COMPANY_REGISTED.TELEPHONE" readOnly="true"/>
                    <a:field name="national_organization_code" prompt="FND_COMPANY_REGISTED.NATIONAL_ORGANIZATION_CODE" readOnly="true"/>
                    <a:field name="business_scope" prompt="FND_COMPANY_REGISTED.BUSINESS_SCOPE" readOnly="true"/>
                    <a:field name="registered_currency_name" prompt="FND_COMPANY_REGISTED.REGISTERED_CURRENCY_CODE" readOnly="true"/>
                    <a:field name="registered_capital" prompt="FND_COMPANY_REGISTED.REGISTERED_CAPITAL" readOnly="true"/>
                    <a:field name="fax_no" prompt="FND_COMPANY_REGISTED.FAX_NO" readOnly="true"/>
                    <a:field name="legal_rep_of_ownership_desc" prompt="FND_COMPANY_REGISTED.LEGAL_REP_OF_OWNERSHIP" readOnly="true"/>
                    <a:field name="legal_rep_name" prompt="FND_COMPANY_REGISTED.LEGAL_REP_NAME" readOnly="true"/>
                    <a:field name="legal_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" readOnly="true"/>
                    <a:field name="legal_rep_phone" prompt="FND_COMPANY_REGISTED.PHONE" readOnly="true"/>
                    <a:field name="legal_rep_identity_type_desc" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" readOnly="true"/>
                    <a:field name="agent_name" prompt="法人代表" readOnly="true"/>
                    <a:field name="agent_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" readOnly="true"/>
                    <a:field name="agent_phone" prompt="FND_COMPANY_REGISTED.PHONE" readOnly="true"/>
                    <a:field name="agent_identity_type_desc" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" readOnly="true"/>
                    <a:field name="enterprise_scale_desc" prompt="FND_COMPANY_REGISTED.ENTERPRISE_SCALE_CODE" readOnly="true"/>
                    <a:field name="business_group_name" prompt="FND_BUSINESS_GROUPS.TITLE" readOnly="true"/>
                    <a:field name="new_group_flg" displayField="code_value_name" options="group_company_flg_ds" prompt="是否有集团公司" readOnly="true" returnField="new_group_flg_code" valueField="code_value"/>
                    <a:field name="new_group_flg_code" prompt="集团公司名称" readOnly="true"/>
                    <a:field name="new_group_name" prompt="集团公司名称" readOnly="true"/>
                    <a:field name="require_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.REQUIRE_FLAG" readOnly="true" uncheckedValue="N"/>
                    <a:field name="supply_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.SUPPLY_FLAG" readOnly="true" uncheckedValue="N"/>
                    <a:field name="service_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.SERVICE_FLAG" readOnly="true" uncheckedValue="N"/>
                    <a:field name="domestic_foreign_relation_name" prompt="FND_COM_SUP_INFOS.DOMESTIC_FOREIGN_RELATION" readOnly="true"/>
                    <a:field name="d_b_code" prompt="FND_COM_SUP_INFOS.D_B_CODE" readOnly="true"/>
                    <a:field name="institutional_properties_name" prompt="FND9100.INSTITUTIONAL_PROPERTIES" readOnly="true"/>
                    <a:field name="enterprise_nature_name" prompt="FND_COM_SUP_INFOS.ENTERPRISE_NATURE" readOnly="true"/>
                    <a:field name="business_address" prompt="FND9100.BUSINESS_ADDRESS" readOnly="true"/>
                    <a:field name="company_address" prompt="总公司地址" readOnly="true"/>
                    <a:field name="taxpayer_type_name" prompt="FND_COM_SUP_INFOS.TAXPAYER_IDENTIFICATION" readOnly="true"/>
                    <a:field name="tax_id_number" prompt="FND_COMPANY_REGISTED.TAX_NUMBER" readOnly="true"/>
                    <a:field name="business_represent_name" prompt="姓名" readOnly="true"/>
                    <a:field name="business_rep_position" prompt="职位" readOnly="true"/>
                    <a:field name="business_represent_phone" prompt="手机号码" readOnly="true"/>
                    <a:field name="business_rep_identity_desc" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" readOnly="true"/>
                    <a:field name="business_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" readOnly="true"/>
                    <a:field name="business_represent_mail" prompt="邮箱" readOnly="true"/>
                    <a:field name="financial_represent_name" prompt="姓名" readOnly="true"/>
                    <a:field name="finance_rep_position" prompt="职位" readOnly="true"/>
                    <a:field name="financial_represent_phone" prompt="手机号码" readOnly="true"/>
                    <a:field name="finance_rep_identity_desc" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" readOnly="true"/>
                    <a:field name="finance_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" readOnly="true"/>
                    <a:field name="financial_represent_mail" prompt="邮箱" readOnly="true"/>
                    <a:field name="supplier_categroy_name" prompt="PUR_VENDORS.VENDOR_CATEGORY" readOnly="true"/>
                    <a:field name="industry_type_name" prompt="FND_COMPANY_REGISTED.INDUSTRY_CODE" readOnly="true"/>
                    <a:field name="main_category" prompt="主营品类" readOnly="true"/>
                    <a:field name="kw_main_category" prompt="景旺主营品类" readOnly="true"/>
                    <a:field name="main_category_percent" prompt="主营品类及占比" readOnly="true"/>
                    <a:field name="factory_nature_name" prompt="FND_COM_SUP_INFOS.FACTORY_NATURE" readOnly="true"/>
                    <a:field name="factory_area" prompt="厂房面积(m²)" readOnly="true"/>
                    <a:field name="partner_info" prompt="合作企业" readOnly="true"/>
                    <a:field name="agent_brand" prompt="FND_COM_SUP_INFOS.AGENT_BRAND" readOnly="true"/>
                    <a:field name="iso14000_flag" prompt="ISO14000认证" readOnly="true"/>
                    <a:field name="iso9001_flag" prompt="ISO9001认证" readOnly="true"/>
                    <a:field name="enviment_flag" readOnly="true"/>
                    <a:field name="blowdown_flag" readOnly="true"/>
                    <a:field name="iso14000_flag_end_date" prompt="ISO14000有效日期" readOnly="true"/>
                    <a:field name="iso9001_flag_end_flag" prompt="ISO9001有效日期" readOnly="true"/>
                    <a:field name="other_certificate" prompt="其他认证" readOnly="true"/>
                    <a:field name="three_in_one_flag" checkedValue="Y" prompt="三证合一" readOnly="true" uncheckedValue="N"/>
                    <a:field name="one_one_code_flag" checkedValue="Y" prompt="一照一码" readOnly="true" uncheckedValue="N"/>
                    <a:field name="unified_social_code" prompt="统一社会信用代码" readOnly="true"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="fnd9040_companyRegistedApproveDetail_loadFcn"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:screenTopToolbar>
                <a:toolbarButton id="fnd9040_confirmBtu" click="fnd9040_confirmFun" text="CONFIRM" width="100"/>
                <a:toolbarButton id="fnd9040_rejectBtu" click="fnd9040_rejectFun" text="PROMPT.REJECT" width="100"/>
                <a:toolbarButton id="fnd9040_cancelBtu" click="fnd9040_cancelFun" text="PROMPT.CLOSE" width="100"/>
            </a:screenTopToolbar>
            <a:fieldSet title="WFL_APPROVE_RECORD_V.COMMENT">
                <a:textArea name="approving_comments" bindTarget="fnd9040_companyRegistedApproveComment_ds" height="50" width="800"/>
            </a:fieldSet>
            <a:fieldSet title="FND_COMPANY_REGISTED.ENTERPRISE_INFO">
                <a:vBox>
                    <!-- <a:hBox labelWidth="100">
                        <a:textField name="email" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox> -->
                    <a:hBox labelWidth="100">
                        <a:textField name="full_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                        <!-- <a:textField name="short_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/> -->
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="enterprise_scale_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="business_group_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="new_group_flg" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="是否有集团公司" style="margin-right:70px"/>
                        <a:textField name="new_group_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="集团公司名称"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="domestic_foreign_relation_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="d_b_code" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="institutional_properties_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:comboBox name="enterprise_nature_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="business_address" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="company_address" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="agent_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textArea name="supply_abstract" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" height="60" prompt="企业简介" readOnly="true" width="408"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:button click="fnd9040_uploadSupplyAbstractFun" prompt="企业简介附件" text="PROMPT.VIEW_ATTACHMENT"/>
                        <a:button click="fnd9040_uploadCompanyAuthoriseFun" prompt="公司授权证明(加盖章)" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                </a:vBox>
            </a:fieldSet>
            <a:fieldSet title="三证信息">
                <a:vBox>
                    <a:hBox labelWidth="100">
                        <a:checkBox name="three_in_one_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:checkBox name="one_one_code_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="unified_social_code" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="260"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="business_license_number" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:button click="fnd9040_uploadBusinessLicenceFun" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_ATTM" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textArea name="business_scope" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:datePicker name="business_license_end_date" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:checkBox name="business_license_forever" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <!-- line -->
                    <!-- <a:hBox labelWidth="100">
                        <a:label prompt="FND_COMPANY_REGISTED.BUSINESS_DIRECTION" width="0"/>
                        <a:checkBox name="require_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:checkBox name="supply_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:checkBox name="service_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox> -->
                    <a:hBox labelWidth="100">
                        <a:lov name="registered_country_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:lov name="registered_province_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:lov name="registered_city_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="address" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="408"/>
                    </a:hBox>
                    <!-- <a:hBox labelWidth="100">
                        <a:textField name="telephone" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="fax_no" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox> -->
                    <a:hBox labelWidth="100">
                        <a:textField name="national_organization_code" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:button click="fnd9040_uploadOrganizationFun" prompt="FND9100.ORGANIZATION_CODE_ATM" text="PROMPT.VIEW_ATTACHMENT"/>
                        <!-- <a:textField name="registered_currency_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="registered_capital" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/> -->
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="taxpayer_type_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="tax_id_number" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:button click="fnd9040_uploadTaxScanFun" prompt="FND9100.TAX_REGISTED_SCAN" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                </a:vBox>
            </a:fieldSet>
            <!-- <a:fieldSet title="FND_COMPANY_REGISTED.LEGAL_INFO"> 法人信息 -->
            <a:fieldSet title="联系人信息">
            
               <a:grid id="fnd9040_contract_grid" bindTarget="fnd9040_contract_ds"   height="250"   width="900">
                        <a:columns>
                            <a:column name="user_role" align="center" prompt="角色"  width="100"/>
                            <a:column name="contact_name" align="center" prompt="姓名"  width="100"/>
                            <a:column name="position" align="center" prompt="职位"   width="100"/>
                            <a:column name="mobile_phone" align="center" prompt="手机号码"  width="120"/>
                            <a:column name="email" align="center" prompt="电子邮箱"  width="120"/>
                            <a:column name="id_type_name" align="center" prompt="证件类型"  width="150"/>
                            <a:column name="id_number" align="center" prompt="证件编码"  width="150"/>
                        </a:columns>
                    </a:grid>
                <!-- <a:vBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="legal_rep_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="总经理"/>
                        <a:textField name="legal_rep_phone" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:button click="fnd9040_uploadLegalIdentityFrontFun" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_FRONT" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="legal_rep_identity_num" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:comboBox name="legal_rep_identity_type_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:button click="fnd9040_uploadLegalIdentityBackFun" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_BACK" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="general_manager_mail" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                </a:vBox> -->
            </a:fieldSet>
           <!--  <a:fieldSet title="业务负责人信息">
                <a:vBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="business_represent_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="business_rep_position" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="business_represent_phone" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="business_rep_identity_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="business_rep_identity_num" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="business_represent_mail" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                </a:vBox>
            </a:fieldSet>
            <a:fieldSet title="跟单员信息">
                <a:vBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="financial_represent_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="finance_rep_position" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="financial_represent_phone" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="finance_rep_identity_desc" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="finance_rep_identity_num" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="financial_represent_mail" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                </a:vBox>
            </a:fieldSet> -->
            <a:fieldSet title="登记信息">
                <a:vBox>
                    <!-- <a:hBox labelWidth="100">
                        <a:label prompt="FND_COMPANY_REGISTED.BUSINESS_DIRECTION" width="0"/>
                        <a:checkBox name="require_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="0"/>
                        <a:checkBox name="supply_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="0"/>
                        <a:checkBox name="service_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="0"/>
                    </a:hBox> -->
                    <a:hBox labelWidth="100">
                        <a:comboBox name="supplier_categroy_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:comboBox name="industry_type_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox id="fnd9040_agent_id" labelWidth="100">
                        <a:button click="fnd9040_uploadCompanyAgentFun" prompt="代理授权证书" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                    <a:hBox id="fnd9040_blowdown_id" labelWidth="100">
                        <a:checkBox name="blowdown_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="是否有排污许可证明" readOnly="true"/>
                        <a:button click="fnd9040_uploadCompanyBlowdownFun" prompt="排污许可证明" text="PROMPT.VIEW_ATTACHMENT"/>
                        <a:datePicker name="supply_time_blowdown" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="可提供时间" readOnly="true"/>
                    </a:hBox>
                    <a:hBox id="fnd9040_environment_id" labelWidth="100">
                        <a:checkBox name="enviment_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="是否有环保资质证明" readOnly="true"/>
                        <a:button click="fnd9040_uploadCompanyEnvironmentFun" prompt="环保资质证明" text="PROMPT.VIEW_ATTACHMENT"/>
                        <a:datePicker name="supply_time" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="可提供时间" readOnly="true"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="main_category" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" width="650"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="main_category_percent" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <div name="HandRegisterCategory" id="fnd9100_handRegisted_category"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:comboBox name="factory_nature_name" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="factory_area" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:textField name="partner_info" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="agent_brand" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:checkBox name="iso14000_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:checkBox name="iso9001_flag" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                        <a:textField name="other_certificate" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs"/>
                    </a:hBox>
                    <a:hBox labelWidth="100">
                        <a:button click="fnd9040_uploadISO14000Fun" prompt="ISO14000认证" text="PROMPT.VIEW_ATTACHMENT"/>
                        <a:button click="fnd9040_uploadISO9001Fun" prompt="ISO9001认证" text="PROMPT.VIEW_ATTACHMENT"/>
                    </a:hBox>
                    <a:hBox labelWidth="140" style="margin-top:20px;">
                        <a:datePicker name="iso14000_flag_end_date" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="ISO14000有效期"/>
                        <a:datePicker name="iso9001_flag_end_date" bindTarget="fnd9040_companyRegistedApproveDetail_resultDs" prompt="ISO9001有效期" style="margin-right:25px;"/>
                    </a:hBox>
                </a:vBox>
            </a:fieldSet>
        </a:screenBody>
    </a:view>
</a:screen>
