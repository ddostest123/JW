<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: FelixDru  
    $Date: 2014-05-06 下午6:24:37  
    $Revision: 1.0  
    $Purpose: 供应商填写邀请码
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:init-procedure>
        <a:model-query model="fnd.FND9100.fnd_company_registed_query" rootPath="company_data"/>
        <a:model-query model="fnd.FND9100.fnd_company_registed_license" rootPath="company_atm_data"/>
        <a:model-query defaultwhereclause="t.code =&apos;REGISTER_GROUP_COMPANY_FLG&apos; " model="sys.sys_code_values_v" rootpath="group_company_flg"/>
    </a:init-procedure>
    <a:view template="default">
        <a:link id="fnd_enterprise_resiter_choose_link" url="${/request/@context_path}/modules/fnd/FND9100/fnd_enterprise_register_statement.screen"/>
        <a:link id="fnd_enterprise_register_enterprise_save_link" url="${/request/@context_path}/modules/fnd/FND9100/fnd_enterprise_save.svc"/>
        <a:link id="fnd_enterprise_register_legal_link" url="${/request/@context_path}/modules/fnd/FND9100/fnd_enterprise_register_confirm_l.screen"/>
        <a:link id="fnd_enterprise_register_attachment_link" url="${/request/@context_path}/modules/fnd/FND9100/attachment_file_upload.screen"/>
        <link href="${/request/@context_path}/mainpage_facility/plugins/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css"/>
        <link href="${/request/@context_path}/css/regestercss/regester-common.css" rel="stylesheet" type="text/css"/>
        <link href="${/request/@context_path}/component/handRegesterSteps/HandRegesterStep.css?v=1.2" rel="stylesheet" type="text/css"/>
        <script src="${/request/@context_path}/component/handRegesterSteps/HandRegisterStep.js"/>
        <link href="${/request/@context_path}/component/handLocationPicker/handLocationPicker.css" rel="stylesheet" type="text/css"/>
        <script language="JavaScript" src="${/request/@context_path}/index/js/jquery-1.8.3.min.js"/>
        <link href="${/request/@context_path}/component/Font-Awesome-3.2.1/css/font-awesome.min.css?v=2.14" rel="stylesheet" type="text/css"/>
        <script><![CDATA[jQuery.noConflict();]]></script>
        <style><![CDATA[
            .hand-main-content{
                background-color: #E4E8EF;
                overflow:hidden;
            }
            .content-div > table{
                margin-left:auto;
                margin-right:auto;
            }
            .item-notBlank{
                border-color:#e76e70;
            }
            /* .item-invalid{
                border-color:#1887ca !important;
            } */
            .container .content-div .layout-td-cell .item-tf{
                border-radius:5px;
            }
            
            /*ie下附件上传按钮样式*/
            .swfupload{
                position:absolute;
                float:left;
                z-index:3;
                background-color:#ff0;
                width:64px;
                height:32px;
                margin-left:5px;
                opacity:0
            }
            
            .uplad{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                margin-left: -65px;
                margin-top: -15px;
                text-align:center;
                line-height:35px;
            }           
            .uplad_au{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                margin-left: -65px;
                margin-top: -15px;
                text-align:center;
                line-height:35px;
            } 
            .uplad_add{
                position:absolute;
                float:left;
                z-index:2;
                background-color:#65CEA7;
                width:64px;
                height:34px;
                border-radius:4px;
                color:#fff;
                text-align:center;
                line-height:34px;
                /*margin-left:212px;*/
                margin-top:-15px;
            }
            /*李侃添加hover样式*/
            .uplad_add:hover{
                cursor:pointer;
            }
            
            .container .content-div .itemupf > span{
                background-color:#fff;
            }
            
            .tishi{
                color:#f00;
                font-size: 15px;
            }
        ]]></style>
        <!-- 李侃添加，底部样式 -->
        <style><![CDATA[
            .customization-info {
                width: 100%;
                color: #999;
                line-height: 50px;
                height: 50px;
                font-size: 14px;
                text-align: center;
                font-family: Microsoft Yahei,tahoma,arial,sans-serif,helvetica;
                margin-top: 30px;
                background-color: rgb(45,45,45);
            }
        ]]></style>
        <script><![CDATA[
            //自动查询处理
            
            function fnd9100Init() {
                HandRegesterStep.initFunc(4, 2, 'regester_step4', ['${l:FND_COMPANY_REGISTED.READ_REG_INSTRUCTIONS}', '${l:FND_COMPANY_REGISTED.ENTERPRISE_INPUT}', '${l:FND_COMPANY_REGISTED.CONFIRM}', '${l:FND_COMPANY_REGISTED.PENDING_APPROVAL}'], 280, '${/request/@context_path}');
                var company_registed_id = '${/model/company_data/record/@company_registed_id}';
                if (Ext.isEmpty(company_registed_id)) {
                    var win = Aurora.showMessage('${l:PROMPT.ERROR}', '${l:PUR5610.ILLEGAL_VISIT_GO_TO_INDEX}', function() {
                        window.location.href = '${/request/@context_path}';
                    });
                    setTimeout(function() {
                        window.location.href = '${/request/@context_path}';
                    }, 3000);
                }
                if (company_registed_id) {
                    Aurora.request({
                        url: '${/request/@context_path}/autocrud/fnd.FND9100.fnd_company_registed/execute',
                        para: {
                            company_registed_id: company_registed_id
                        },
                        success: function(res) {
                            var visit_feedback = res.result.visit_feedback;
                            if (visit_feedback == 'SUCCESS') {
                                return '';
                            } else if (visit_feedback == 'ERROR') {
                                var win = Aurora.showMessage('${l:PROMPT.ERROR}', '${l:PUR5610.ILLEGAL_VISIT_GO_TO_INDEX}', function() {
                                    window.location.href = '${/request/@context_path}';
                                });
                                setTimeout(function() {
                                    win.close();
                                    window.location.href = '${/request/@context_path}';
                                }, 3000);
                            }
                        },
                        scope: this
                    });
                }
                
             
               
               // fnd9100_contract_init();
                console.log('----');
                //加载时初始化联系人和更多许可证设置
                fnd9100_license_setDsData();
                //联系人初始化
                fnd9100_contact_set();
                fnd9100_contact_init(true);
                //联系人圆角设置
                fnd9100_contact_corner_set();
                //三证信息初始化
                //fnd9100_three_init();
                fnd9100_threeValidateSet_new();
                //iso附件
                fnd9100_isoInit();
                //环保资质附件
                fnd9100_boInit();
                //公司授权附件必输初始化
                fnd9100_set_upload_required('fnd9100_upload_au', true);
                //企业简介附件必输初始化
                fnd9100_set_upload_required('fnd9100_upload_ab', true);
                
                
            }
            
            function  fnd9100_contract_init(){
                console.log('1');
                var ds=$('fnd9100_contract_ds');
                ds.create();
                ds.create();
                ds.create();
                var records=ds.getAll();
                records[0].set('user_role','总经理');
                records[1].set('user_role','业务负责人');
                records[2].set('user_role','跟单员');
                records[0].set('default_flag','Y');
                records[1].set('default_flag','Y');
                records[2].set('default_flag','Y');
                console.log('2');
                for(var i=0;i<records.length;i++){
                    if(records[i].get('user_role')=="总经理"||records[i].get('user_role')=="业务负责人"||records[i].get('user_role')=="跟单员"){
                          records[i].getField('mobile_phone').setRequired(true);
                    }
                }
            }
            
            function fnd9100_getId(id) {
                return document.getElementById(id);
            }
            
            //上一步
            
            function fnd9100_enterpriseRegister_last_page() {
                var param = {};
                param['company_registed_id'] = '${/parameter/@company_registed_id}';
                Aurora.post($('fnd_enterprise_resiter_choose_link').getUrl(), param);
            }
            
            //下一步
            
            function fnd9100_enterpriseRegister_save() {
                //Aurora.Masker.mask(Ext.getBody(), '提交中,请等待！');
                    var ds = $('fnd_enterprise_ds');
                      
                    var con_partner_ds = $('fnd9100_contract_ds');
                     /* if (!ds.validate()) {
                          return ;
                      } */
                    /*   if (!con_partner_ds.validate()) {
                          return ;
                      }  */
                      var con_header_record = ds.getCurrentRecord();
                      var records=con_partner_ds.getAll();
                      var line_data=[];
                      for(var i=0;i<records.length;i++){
                           if(records[i].isNew){
				                records[i].set('_status','insert');
				                records[i].set('company_registed_id',con_header_record.get('company_registed_id'));
				                line_data.push(records[i].data);
                          }else{
	                          records[i].set('company_registed_id',con_header_record.get('company_registed_id'));
	                          records[i].set('_status','update');
	                          line_data.push(records[i].data);
                           }
                      }
                  
                    var data = con_header_record.data;
                    data._status = 'update';
                    data['con_partner'] = line_data;
                   
                   // var record = ds.getCurrentRecord();
                    // var input = fnd9100_getId('fnd9100_handRegisted_category');
                    // record.set('main_category', input.children[1].value);
                    Aurora.request({
                        url: $('fnd_enterprise_register_enterprise_save_link').getUrl(),
                        para: data,
                        success: function(res) {
                            fnd9100_license_submit();
                        },
                        scope: this
                    });
                
            }
            
            function fnd9100_atm_submitsuccess(rs) {
                //Aurora.Masker.unmask(Ext.getBody());
                var param = {};
                param['company_registed_id'] = '${/parameter/@company_registed_id}';
                Aurora.post($('fnd_enterprise_register_legal_link').getUrl(), param);
            }
            
            //update
        function    fnd9100_contract_updateHandler(ds, record, name, value, oldvalue) {
            var records=ds.getAll();
           
           }
            function fnd9100_register_updateHandler(ds, record, name, value, oldvalue) {
                if (name == 'registered_country_code') {
                    fnd9100_place_init();
                    if (Ext.isEmpty(record.get('registered_country_code')) || record.get('registered_country_code') == undefined) {
                        record.set('registered_province_id', '');
                        record.set('registered_province_desc', '');
                        record.getField("registered_province_desc").setReadOnly(true);
                        record.getField("registered_province_desc").setRequired(false);
            
                        $('registered_province_ds').setQueryParameter('country_code', '-1');
                        $('registered_province_ds').query();
                    } else {
                        if (record.get('registered_country_code') == 'CHN') {
                            record.getField("registered_province_desc").setReadOnly(false);
                            record.getField("registered_province_desc").setRequired(true);
                            document.getElementById('registered_location_desc').children[0].style.border = '1px solid rgb(231, 110, 112)';
                            document.getElementById('registered_location_desc').children[0].style.backgroundColor = '#fff';
                            $('registered_province_ds').setQueryParameter('country_code', record.get('registered_country_code'));
                            $('registered_province_ds').query();
                            //设置地区可查
                            var div = document.getElementById('registered_location_desc');
                            div.setAttribute('use_flag', 'true');
                        } else {
                            record.getField("registered_city_desc").setReadOnly(true);
                            record.getField("registered_city_desc").setRequired(false);
                            record.getField("registered_province_desc").setReadOnly(true);
                            record.getField("registered_province_desc").setRequired(false);
                            record.getField("registered_city_id").setRequired(false);
                            record.getField("registered_province_id").setRequired(false);
                            document.getElementById('registered_location_desc').children[0].style.border = '1px solid #ccc';
                            document.getElementById('registered_location_desc').children[0].style.backgroundColor = '#eee';
                            record.set('registered_city_id', '');
                            record.set('registered_city_desc', '');
                            record.set('registered_province_id', '');
                            record.set('registered_province_desc', '');
            
                        }
                        //国家选出来后自动拼到地址信息里
                        fnd9100_registe_placeInto('country');
                    }
                } else if (name == 'registered_province_id') {
                    if (Ext.isEmpty(record.get('registered_province_id')) || record.get('registered_province_id') == undefined) {
                        record.set('registered_city_id', '');
                        record.set('registered_city_desc', '');
                        record.getField("registered_city_desc").setReadOnly(true);
                        record.getField("registered_city_desc").setRequired(false);
            
                        $('registered_city_ds').setQueryParameter('province_id', -1);
                        $('registered_city_ds').query();
                    } else {
                        record.getField("registered_city_desc").setReadOnly(false);
                        record.getField("registered_city_desc").setRequired(true);
            
                        $('registered_city_ds').setQueryParameter('province_id', record.get('registered_province_id'));
                        $('registered_city_ds').query();
                        //地区选出来后自动拼到地址信息里
                        fnd9100_registe_placeInto('city');
                    }
                } else if (name == 'business_license_forever') {
                    //根据用户营业执照类型标识设置到期日
                    if (record.get('business_license_forever') == 'Y') {
                        record.set('business_license_end_date', '');
                        record.getField('business_license_end_date').setRequired(false);
                        record.getField('business_license_end_date').setReadOnly(true);
                    } else {
                        record.getField('business_license_end_date').setReadOnly(false);
                        record.getField('business_license_end_date').setRequired(true);
                    }
                } else if (name == 'enterprise_scale_code') {
                    //企业规模
                    if (value == 'LARGE') {
                        record.getField('business_group').setReadOnly(false);
                    } else {
                        record.set('business_group_id', '');
                        record.set('business_group', '');
                        record.getField('business_group').setReadOnly(true);
                    }
                } else if (name == 'new_group_flg_code') {
                    //企业法人
                    if (value == 'HAVE_GROUP_COMPANY') {
                       record.getField('new_group_name').setReadOnly(false);
                       record.getField('new_group_name').setRequired(true);
                    } else {
                        record.getField('new_group_name').setReadOnly(true);
                    }
                }

                 else if (name == 'domestic_foreign_relation') {
                    var p = record.get('institutional_properties');
                    if (value == 'DOMESTIC') {
                        record.getField('d_b_code').setReadOnly(true);
                        record.getField('d_b_code').setRequired(false);
                        record.set('d_b_code', '');
                    } else {
                        record.getField('d_b_code').setReadOnly(false);
                        record.getField('d_b_code').setRequired(true);
                    }
                    fnd9100_threeValidateSet_new();
                } else if (name == 'institutional_properties') {
                    if (value == 'BUSINESS' || value == 'FARMER_COOPERATIVE' || value == 'PERSON' || value == 'GOVER_AFFILIATED') {
                        //默认勾选
                        record.set('three_in_one_flag', 'Y');
                        //huangyingfei 20190508 三证合一及一照一码二选一
                        //record.set('one_one_code_flag', 'Y');
                        record.set('one_one_code_flag', 'N');
                        record.getField('three_in_one_flag').setReadOnly(false);
                        record.getField('one_one_code_flag').setReadOnly(false);
                        record.getField('unified_social_code').setReadOnly(true);
                    } else {
                        record.getField('three_in_one_flag').setReadOnly(true);
                        record.set('three_in_one_flag', 'N');
                        record.getField('one_one_code_flag').setReadOnly(true);
                        record.set('one_one_code_flag', 'N');
                        record.getField('unified_social_code').setReadOnly(true);
                        record.set('unified_social_code', '');
                    }
            
                    if (value == 'BUSINESS') {
                        record.getField('enterprise_nature_name').setRequired(true);
                    } else {
                        record.getField('enterprise_nature_name').setRequired(false);
                    }
                    fnd9100_threeValidateSet_new();
                } else if (name == 'iso14000_flag' || name == 'iso9001_flag' || name == 'qs9000_flag') {
                    fnd9100_isoHboxSet(name, value);
                } else if (name == 'enviment_flag') {
                    if (record.get('blowdown_flag') == 'Y') {
            
                        record.getField('supply_time').setRequired(false);
                        record.getField('supply_time').setReadOnly(true);
                        record.set('supply_time', '');
                        //fnd9100_getId('fnd9100_upload_bo_id').style.display = 'block';
                        fnd9100_set_upload_required('fnd9100_upload_bo', false);
            
                    } else {
                        if (value == 'Y') {
                            record.getField('supply_time').setRequired(false);
                            record.getField('supply_time').setReadOnly(true);
                            record.set('supply_time', '');
            
                            record.getField('supply_time_Blowdown').setRequired(true);
                            record.getField('supply_time_Blowdown').setReadOnly(false);
            
                            //fnd9100_getId('fnd9100_upload_bo_id').style.display = 'block';
                            fnd9100_set_upload_required('fnd9100_upload_bo', true);
                        } else {
                            record.getField('supply_time').setRequired(true);
                            record.getField('supply_time').setReadOnly(false);
                            //fnd9100_getId('fnd9100_upload_bo_id').style.display = 'none';
                            fnd9100_set_upload_required('fnd9100_upload_bo', false);
                            record.getField('supply_time_Blowdown').setRequired(false);
                            record.getField('supply_time_Blowdown').setReadOnly(false);                       
                       
                        }
                    }
                } else if (name == 'blowdown_flag') {
                    if (value == 'Y') {
                        record.getField('supply_time_Blowdown').setRequired(false);
                        record.getField('supply_time_Blowdown').setReadOnly(true);
                        record.set('supply_time_Blowdown', '');
                        //fnd9100_getId('fnd9100_upload_bo_id').style.display = 'block';
                        fnd9100_set_upload_required('fnd9100_upload_Blowdown', true);
                        
                            record.getField('supply_time').setRequired(false);
                            record.getField('supply_time').setReadOnly(true);
                            record.set('supply_time', '');                        
                        
                    } else {
                        record.getField('supply_time_Blowdown').setRequired(true);
                        record.getField('supply_time_Blowdown').setReadOnly(false);
                        //fnd9100_getId('fnd9100_upload_bo_id').style.display = 'none';
                        fnd9100_set_upload_required('fnd9100_upload_Blowdown', false);
                        
                            record.getField('supply_time').setRequired(true);
                            record.getField('supply_time').setReadOnly(false);                        
                    }
                } else if (name == 'supplier_categroy') {
                    fnd9100_isoHboxSet(name, value);
                } else if (name == 'three_in_one_flag') {
                    if (value == 'Y') {
                        // record.getField('one_one_code_flag').setReadOnly(false);
                        // record.set('one_one_code_flag', 'Y');
                        // } else {
                        record.getField('one_one_code_flag').setReadOnly(false);
                        record.set('one_one_code_flag', 'N');
            
                        // record.getField('unified_social_code').setRequired(true);
                        // record.getField('unified_social_code').setReadOnly(false);
                        // record.set('business_license_number', '');
                        // record.getField('business_license_number').setReadOnly(true);
                    }
                    fnd9100_threeValidateSet_new();
                } else if (name == 'one_one_code_flag') {
                    if (value == 'Y') {
            
                        record.getField('three_in_one_flag').setReadOnly(false);
                        record.set('three_in_one_flag', 'N');
            
                    }
            
            
                    fnd9100_threeValidateSet_new();
                }
            }
            
            function fnd9100_isoInit() {
                var record = $('fnd_enterprise_ds').getAt(0);
                fnd9100_isoHboxSet('iso14000_flag', record.get('iso14000_flag'));
                fnd9100_isoHboxSet('iso9001_flag', record.get('iso9001_flag'));
                fnd9100_isoHboxSet('qs9000_flag', record.get('qs9000_flag'));
            }
            
            function fnd9100_boInit() {
                var record = $('fnd_enterprise_ds').getAt(0);
                fnd9100_isoHboxSet('supplier_categroy', record.get('supplier_categroy'));
            
            }
            
            function fnd9100_isoHboxSet(name, value) {
                var tar, picker, tip, tarr;
                var record = $('fnd_enterprise_ds').getCurrentRecord();
            
                if (name == 'iso14000_flag') {
                    tar = fnd9100_getId('fnd9100_iso14000_hBox');
                    picker = fnd9100_getId('iso14000_flag_end_datepicker');
                    if (value == 'Y') {
                        tar.style.display = 'block';
                        picker.style.display = 'block';
                        record.getField('iso14000_flag_end_date').setRequired(true);
                    } else {
                        tar.style.display = 'none';
                        picker.style.display = 'none';
                        record.getField('iso14000_flag_end_date').setRequired(false);
                    }
                } else if (name == 'iso9001_flag') {
                    tar = fnd9100_getId('fnd9100_iso9001_hBox');
                    picker = fnd9100_getId('iso9001_flag_end_datepicker');
                    if (value == 'Y') {
                        tar.style.display = 'block';
                        picker.style.display = 'block';
                        record.getField('iso9001_flag_end_date').setRequired(true);
                    } else {
                        tar.style.display = 'none';
                        picker.style.display = 'none';
                        record.getField('iso9001_flag_end_date').setRequired(false);
                    }
                } else if (name == 'supplier_categroy') {
                    debugger;
            
                    tar = fnd9100_getId('fnd9100_upload_bo_hBox');
                    tarr = fnd9100_getId('fnd9100_upload_Blowdown_hBox');
                    tip = fnd9100_getId('fnd9100_upload_bo_hBox_tip');
                    ag = fnd9100_getId('fnd9100_upload_ag_hBox');
                    if (value == '-9191961364319941327') {
                        if (record.get('enviment_flag') == 'Y') {
                            record.set('supply_time', '');
                            record.getField('supply_time').setRequired(false);
                            record.getField('supply_time').setReadOnly(true);
                        } else if (record.get('enviment_flag') == 'N') {
                            record.getField('supply_time').setRequired(true);
                            record.getField('supply_time').setReadOnly(false);
                        }
            
                        if (record.get('blowdown_flag') == 'Y') {
                            record.set('supply_time_Blowdown', '');
                            record.getField('supply_time_Blowdown').setRequired(false);
                            record.getField('supply_time_Blowdown').setReadOnly(true);
                        } else if (record.get('blowdown_flag') == 'N') {
                            record.getField('supply_time_Blowdown').setRequired(true);
                            record.getField('supply_time_Blowdown').setReadOnly(false);
                        }
            
                        ag.style.display = 'none';
                        tar.style.display = 'block';
                        tarr.style.display = 'block';
                        tip.style.display = 'block';
                        // fnd9100_set_upload_required('fnd9100_upload_bo', true);
                    } else if (value == '-2149760273639649320') {
                        record.getField('supply_time').setRequired(false);
                        record.getField('supply_time').setReadOnly(true);
                        record.getField('supply_time_Blowdown').setRequired(false);
                        record.getField('supply_time_Blowdown').setReadOnly(true);
                        record.set('supply_time', '');
                        record.set('enviment_flag', 'N');
                        record.set('blowdown_flag', 'N');
                        tar.style.display = 'none';
                        tarr.style.display = 'none';
                        tip.style.display = 'none';
                        ag.style.display = 'block';
                        fnd9100_set_upload_required('fnd9100_upload_ag', true);
                    } else {
                        record.getField('supply_time').setRequired(false);
                        record.getField('supply_time').setReadOnly(true);
                        record.getField('supply_time_Blowdown').setRequired(false);
                        record.getField('supply_time_Blowdown').setReadOnly(true);
                        record.set('supply_time', '');
                        record.set('enviment_flag', 'N');
                        record.set('blowdown_flag', 'N');
                        tar.style.display = 'none';
                        tarr.style.display = 'none';
                        tip.style.display = 'none';
                        ag.style.display = 'none';
                    }
                }
            
            
            }
            
            function fnd9100_place_init() {
                var ds = $('fnd_enterprise_ds');
                var div = document.getElementById('registered_location_desc');
                div.setAttribute('use_flag', 'false');
                div.children[0].value = '';
                ds.getCurrentRecord().set('registered_province_desc', '');
                ds.getCurrentRecord().set('registered_province_id', '');
                ds.getCurrentRecord().set('registered_city_desc', '');
                ds.getCurrentRecord().set('registered_city_id', '');
            }
            
            function fnd9100_place_select() {
                var ds = $('fnd_enterprise_ds');
                var div = document.getElementById('registered_location_desc');
                ds.getCurrentRecord().set('registered_province_desc', div.getAttribute('parent'));
                ds.getCurrentRecord().set('registered_province_id', div.getAttribute('parent_id'));
                ds.getCurrentRecord().set('registered_city_desc', div.getAttribute('child'));
                ds.getCurrentRecord().set('registered_city_id', div.getAttribute('children_id'));
            
            }
            
            //将国家，省份城市信息拼到地址信息里
            
            function fnd9100_registe_placeInto(type) {
                var record = $('fnd_enterprise_ds').getAt(0);
                var address = record.get('address');
                if (type == 'country') {
                    var name = record.get('registered_country_name');
                    record.set('address', name);
                } else {
                    var country_name = record.get('registered_country_name');
                    var div = document.getElementById('registered_location_desc');
                    var place_name = div.getAttribute('parent') + ' ' + div.getAttribute('child');
                    record.set('address', country_name + ' ' + place_name + ' ');
                }
            
            }
            
            //load
            
            function fnd9100_register_loadHandler(ds) {
                var record = ds.getCurrentRecord();
            
            
                //根据用户营业执照类型标识设置到期日
                if (record.get('business_license_forever') == 'Y') {
                    record.set('business_license_end_date', '');
                    record.getField('business_license_end_date').setRequired(false);
                    record.getField('business_license_end_date').setReadOnly(true);
                } else {
                    record.getField('business_license_end_date').setReadOnly(false);
                    record.getField('business_license_end_date').setRequired(true);
                }
            
                //国家、地区、城市级联更新
                if (Ext.isEmpty(record.get('registered_country_code')) || record.get('registered_country_code') == undefined) {
                    record.set('registered_province_id', '');
                    record.set('registered_province_desc', '');
                    record.getField("registered_province_desc").setReadOnly(true);
                    record.getField("registered_province_desc").setRequired(false);
                    $('registered_province_ds').setQueryParameter('country_code', '-1');
                    $('registered_province_ds').query();
            
                    record.set('registered_city_id', '');
                    record.set('registered_city_desc', '');
                    record.getField("registered_city_desc").setReadOnly(true);
                    record.getField("registered_city_desc").setRequired(false);
            
                    $('registered_city_ds').setQueryParameter('province_id', -1);
                    $('registered_city_ds').query();
                } else {
                    if (record.get('registered_country_code') == 'CHN') {
                        record.getField("registered_province_desc").setReadOnly(false);
                        record.getField("registered_province_desc").setRequired(true);
            
                        $('registered_province_ds').setQueryParameter('country_code', record.get('registered_country_code'));
                        $('registered_province_ds').query();
                    } else {
                        record.getField("registered_province_desc").setReadOnly(true);
                        record.getField("registered_province_desc").setRequired(false);
                        record.set('registered_city_id', '');
                        record.set('registered_city_desc', '');
                        record.set('registered_province_id', '');
                        record.set('registered_province_desc', '');
            
                    }
                }
            
                if (Ext.isEmpty(record.get('registered_province_id')) || record.get('registered_province_id') == undefined) {
                    record.set('registered_city_id', '');
                    record.set('registered_city_desc', '');
                    record.getField("registered_city_desc").setReadOnly(true);
                    record.getField("registered_city_desc").setRequired(false);
                    $('registered_city_ds').setQueryParameter('province_id', -1);
                    $('registered_city_ds').query();
                } else {
                    record.getField("registered_city_desc").setReadOnly(false);
                    record.getField("registered_city_desc").setRequired(true);
                    $('registered_city_ds').setQueryParameter('province_id', record.get('registered_province_id'));
                    $('registered_city_ds').query();
                }
            
                //企业规模
                if (record.get('enterprise_scale_code') == 'LARGE') {
                    record.getField('business_group').setReadOnly(false);
                } else {
                    record.set('business_group_id', '');
                    record.set('business_group', '');
                    record.getField('business_group').setReadOnly(true);
                }
            }
            
            //上传营业执照
            
            function fnd9100_uploadBusinessLicenceFun() {
                var url = $('fnd_enterprise_register_attachment_link').getUrl() + "?table_name=FND_COPANY_REGISTED.BUSINESS_LICENSE&pkvalue=" + $('fnd_enterprise_ds').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:HAP_UPLOAD_TITLE}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            
            //上传公司授权
            
            function fnd9100_uploadAuthoriziLicenceFun() {
                var url = $('fnd_enterprise_register_attachment_link').getUrl() + "?table_name=FND_COPANY_REGISTED.COMPANY_AUTHORISE&pkvalue=" + $('fnd_enterprise_ds').getAt(0).get('company_registed_id');
                new Aurora.Window({
                    url: url,
                    title: '${l:HAP_UPLOAD_TITLE}',
                    id: 'fnd_enterprise_register',
                    width: 610,
                    height: 500
                });
            }
            var registerd_location = [];
            
            
            //地区ds导入
            
            function registered_location_load() {
                var records = $('registered_location_ds').getAll();
                var data;
                var _data;
                for (var i = 0;i < records.length;i++) {
                    data = records[i].data;
                    if (data.level_num == 0) {
                        //存入省会
                        var firstl = (data.region_code).substr(0, 1);
                        registerd_location.push({
                            fisrtl: firstl,
                            province: data.location,
                            id: data.region_id,
                            city: []
                        });
                        //存入此省会下的城市信息
                        for (var j = 0;j < records.length;j++) {
                            _data = records[j].data;
                            if (_data.parent_location == data.location) {
                                var index = registerd_location.length;
                                var _firstl = (_data.region_code).substr(0, 1);
                                (registerd_location[index - 1].city).push({
                                    firstl: _firstl,
                                    name: _data.location,
                                    id: _data.region_id
                                });
                            }
                        }
                    }
                }
                loadjscssfile('${/request/@context_path}/component/handLocationPicker/handLocationPicker.js?v=1.2', 'js');
            
            
            }
            
            function news_blt_load(ds) {
                var records = ds.getAll();
                var data = records[0].data;
                var content = document.getElementById('login_news_minPara');
                content.innerHTML = '<div class="para">' + data.bulletin_context + '</div>';
            }
            
            function fnd9000_ds_load(ds){
                debugger;
                if(Aurora.isEmpty(ds.getAll())||ds.getAll().length==0){
                var ds=$('fnd9100_contract_ds');
                console.log('11111111');
                ds.create();
                ds.create();
                ds.create();
                var records=ds.getAll();
                records[0].set('user_role','总经理');
                records[1].set('user_role','业务负责人');
                records[2].set('user_role','主跟单员');
                records[0].set('default_flag','Y');
                records[1].set('default_flag','Y');
                records[2].set('default_flag','Y');
                console.log('2');
                  console.log('11111111');
                for(var i=0;i<records.length;i++){
                    if(records[i].get('user_role')=="总经理"||records[i].get('user_role')=="业务负责人"||records[i].get('user_role')=="主跟单员"){
                          records[i].getField('mobile_phone').setRequired(true);
                     }
                 } 
                 
                 
             
                  
                 }
                
            }
            
             function setinitdata(ds,record,index){
                 debugger
                 var records=ds.getAll();
                 if(records.length>3){
                  var gird1=document.getElementById("fnd9100_contract_grid");
                var rect=gird1.getBoundingClientRect();
			    //获取元素相对窗口的top值，此处应加上窗口本身的偏移
			    var top=window.pageYOffset+rect.top;
			    var currentTop=0;
			    var requestId;
			    //采用requestAnimationFrame，平滑动画
			    function step(timestamp) {
			      currentTop+=1000;
			      if(currentTop<=top){
			        window.scrollTo(0,currentTop);
			        requestId=window.requestAnimationFrame(step);
			      }else{
			        window.cancelAnimationFrame(requestId);
			      }
         	       }
         	       window.requestAnimationFrame(step);
                 }
                 
                if(records.length<=3){
                    var gird1=document.getElementById("content_postion");
                   gird1.scrollIntoView();
                 }
         			
                   record.set('user_role','其他跟单员');
             }
            
            //加载js和css文件
            
            function loadjscssfile(filename, filetype) {
                var fileref;
                if (filetype == "js") {
                    fileref = document.createElement('script');
                    fileref.setAttribute("type", "text/javascript");
                    fileref.setAttribute("src", filename);
                } else if (filetype == "css") {
                    fileref = document.createElement('link');
                    fileref.setAttribute("rel", "stylesheet");
                    fileref.setAttribute("type", "text/css");
                    fileref.setAttribute("href", filename);
                }
                if (typeof fileref != "undefined") {
                    document.getElementsByTagName("head")[0].appendChild(fileref);
                }
            }
            
            function fnd9100_handPickerLoad() {
                //公司地址信息
                var record = $('fnd_enterprise_ds').getCurrentRecord();
                var div = document.getElementById('registered_location_desc');
                if (!Aurora.isEmpty(record.get('registered_province_desc')) && !Aurora.isEmpty(record.get('registered_city_desc'))) {
                    div.children[0].value = record.get('registered_province_desc') + ' ' + record.get('registered_city_desc');
                }
            }
            
            //三证信息设置
            
            function fnd9100_threeValidateSet() {
                var record = $('fnd_enterprise_ds').getAt(0);
                var data = record.data;
                var institutional = data.institutional_properties;
                //重叠校验三证信息，优先级为，境内外机构，一照一码-机构性质,三证
                fnd9100_init_three(false);
                record.getField('three_in_one_flag').setReadOnly(true);
                record.getField('unified_social_code').setReadOnly(true);
                record.getField('unified_social_code').setRequired(false);
                record.getField('business_license_number').setReadOnly(false);
            
                if (institutional == 'BUSINESS' || institutional == 'FARMER_COOPERATIVE' || institutional == 'GOVER_AFFILIATED') {
                    fnd9100_init_three(true);
                    record.getField('three_in_one_flag').setReadOnly(false);
                } else if (institutional == 'PERSON' || Aurora.isEmpty(institutional)) {
                    if (!Aurora.isEmpty(institutional)) {
                        record.getField('three_in_one_flag').setReadOnly(false);
                    }
                    fnd9100_init_three(true);
                    record.getField('national_organization_code').setRequired(false);
                    fnd9100_set_upload_required('fnd9100_upload_5', false);
                    fnd9100_set_upload_required('fnd9100_upload_6', false);
                    record.getField('tax_id_number').setRequired(false);
                    record.getField('taxpayer_type_name').setRequired(false);
                } else {
                    record.getField('national_organization_code').setRequired(true);
                    fnd9100_set_upload_required('fnd9100_upload_5', true);
                }
                if (data.three_in_one_flag == 'Y') {
                    if (data.one_one_code_flag == 'N') {
                        record.getField('unified_social_code').setReadOnly(true);
                        record.set('unified_social_code', '');
                        record.getField('national_organization_code').setRequired(false);
                        fnd9100_set_upload_required('fnd9100_upload_5', false);
                        fnd9100_set_upload_required('fnd9100_upload_6', false);
                        record.getField('tax_id_number').setRequired(false);
                        record.getField('taxpayer_type_name').setRequired(false);
                    } else {
                        record.getField('unified_social_code').setReadOnly(false);
                        record.getField('unified_social_code').setRequired(true);
                        record.getField('business_license_number').setReadOnly(true);
                        record.getField('business_license_number').setRequired(false);
                        record.set('business_license_number', '');
                        record.getField('national_organization_code').setRequired(false);
                        fnd9100_set_upload_required('fnd9100_upload_5', false);
                        fnd9100_set_upload_required('fnd9100_upload_6', false);
                        record.getField('tax_id_number').setRequired(false);
                        record.getField('taxpayer_type_name').setRequired(false);
                    }
                } else {
                    record.getField('unified_social_code').setReadOnly(true);
                    record.set('unified_social_code', '');
                }
                if (data.domestic_foreign_relation == 'FOREIGN') {
                    record.getField('national_organization_code').setRequired(false);
                    fnd9100_set_upload_required('fnd9100_upload_5', false);
                }
            
            }
            
            
            function fnd9100_threeValidateSet_new() {
                var record = $('fnd_enterprise_ds').getAt(0);
                var data = record.data;
                var institutional = data.institutional_properties;
                //重叠校验三证信息，优先级为，境内外机构，一照一码-机构性质,三证
                fnd9100_init_three(false);
                record.getField('three_in_one_flag').setReadOnly(true);
                record.getField('unified_social_code').setReadOnly(true);
                record.getField('unified_social_code').setRequired(false);
                record.getField('business_license_number').setReadOnly(false);
            
                if (institutional == 'BUSINESS' || institutional == 'FARMER_COOPERATIVE' || institutional == 'GOVER_AFFILIATED') {
                    fnd9100_init_three(true);
                    record.getField('three_in_one_flag').setReadOnly(false);
                } else if (institutional == 'PERSON' || Aurora.isEmpty(institutional)) {
                    if (!Aurora.isEmpty(institutional)) {
                        record.getField('three_in_one_flag').setReadOnly(false);
                    }
                    fnd9100_init_three(true);
                    record.getField('national_organization_code').setRequired(false);
                    fnd9100_set_upload_required('fnd9100_upload_5', false);
                    fnd9100_set_upload_required('fnd9100_upload_6', false);
                    record.getField('tax_id_number').setRequired(false);
                    record.getField('taxpayer_type_name').setRequired(false);
                } else {
                    record.getField('national_organization_code').setRequired(true);
                    fnd9100_set_upload_required('fnd9100_upload_5', true);
                }
                if (data.three_in_one_flag == 'Y') {
                    if (data.one_one_code_flag == 'N') {
                        // record.getField('unified_social_code').setReadOnly(true);
                        //  record.set('unified_social_code', '');
                        record.getField('business_license_forever').setRequired(false);                        
                        record.getField('national_organization_code').setRequired(false);                                         
                        fnd9100_set_upload_required('fnd9100_upload_5', false);
                        fnd9100_set_upload_required('fnd9100_upload_6', false);
                        // record.getField('tax_id_number').setRequired(false);
                        // record.getField('taxpayer_type_name').setRequired(false);
                        record.getField('unified_social_code').setRequired(true);
                        record.getField('unified_social_code').setReadOnly(false);

                        record.getField('business_license_number').setRequired(false);                        
                        record.getField('business_license_number').setReadOnly(true);
                        record.set('business_license_number', '');                        
                        record.getField('taxpayer_type_name').setRequired(false);
                        record.getField('taxpayer_type_name').setReadOnly(false);
                        record.getField('tax_id_number').setRequired(false);
                        record.getField('tax_id_number').setReadOnly(false);
                        
                                
                        
                    } 
                    // else {
                        // record.getField('unified_social_code').setReadOnly(false);
                        // record.getField('unified_social_code').setRequired(true);
                        // record.getField('business_license_number').setReadOnly(true);
                        // record.getField('business_license_number').setRequired(false);
                        // record.set('business_license_number', '');
                        // record.getField('national_organization_code').setRequired(false);
                        // fnd9100_set_upload_required('fnd9100_upload_5', false);
                        // fnd9100_set_upload_required('fnd9100_upload_6', false);
                        // record.getField('tax_id_number').setRequired(false);
                        // record.getField('taxpayer_type_name').setRequired(false);
                    // }
                } else {
            
                    if (data.one_one_code_flag == 'Y') {
            
                        record.getField('business_license_number').setRequired(true);
                        record.getField('business_license_number').setReadOnly(false);
                        record.set('unified_social_code', '');
                        record.getField('unified_social_code').setReadOnly(true);
                        record.getField('unified_social_code').setRequired(false);
                        record.getField('taxpayer_type_name').setRequired(true);
                        record.getField('taxpayer_type_name').setReadOnly(false);
                        record.getField('tax_id_number').setRequired(true);
                        record.getField('tax_id_number').setReadOnly(false);
                        
                                             
            
                    }
            
                    //record.getField('unified_social_code').setReadOnly(true);
                    // record.set('unified_social_code', '');
                }
                if (data.domestic_foreign_relation == 'FOREIGN') {
                    record.getField('national_organization_code').setRequired(false);
                    fnd9100_set_upload_required('fnd9100_upload_5', false);
                }
            
            }
            
            
            function fnd9100_init_three(flag) {
                var record = $('fnd_enterprise_ds').getAt(0);
                record.getField('business_license_number').setRequired(flag);
                if (record.get('business_license_forever') == 'N') {
                    record.getField('business_license_end_date').setRequired(flag);
                }
                record.getField('business_license_forever').setRequired(flag);
                record.getField('address').setRequired(flag);
                record.getField('national_organization_code').setRequired(flag);
                record.getField('taxpayer_type_name').setRequired(flag);
                record.getField('tax_id_number').setRequired(flag);
                //上传图片
                fnd9100_set_upload_required('fnd9100_upload_4', flag);
                fnd9100_set_upload_required('fnd9100_upload_5', flag);
                fnd9100_set_upload_required('fnd9100_upload_6', flag);
            }
            
            //三证信息点击打开
            
            function fnd9100_three_infor_onclick(_this) {
                if (_this.nextSibling.className == 'three-infor-d') {
                    _this.nextSibling.className = 'three-infor-d active';
                } else {
                    _this.nextSibling.className = 'three-infor-d';
                }
            }
            
            
            //三证窗口关闭
            
            function fnd9100_three_close(_this) {
                _this.parentNode.parentNode.className = 'three-infor-d active';
                fnd9100_three_close_validate();
            }
            //三证信息关闭时提示信息
            
            function fnd9100_three_close_validate() {
                var _d = fnd9100_getId('fnd9100_three_showMessage_id');
                if (fnd9100_threeCloseVaidateSet()) {
                    //校验通过,打钩提示
                    _d.children[0].style.display = 'none';
                    _d.children[2].style.display = 'block';
                } else {
                    //校验未通过显示提示信息
                    _d.children[0].style.display = 'block';
                    _d.children[2].style.display = 'none';
                }
            }
            
            function fnd9100_threeCloseVaidateSet() {
                debugger;
                var ds = $('fnd_enterprise_ds');
                var record = $('fnd_enterprise_ds').getAt(0);
                var validate = ['unified_social_code', 'business_license_number', 'business_license_end_date', 'business_license_forever', 'registered_country_name', 'registered_province_id', 'registered_city_id', 'address', 'national_organization_code', 'taxpayer_type_name', 'tax_id_number'];
                var length = validate.length;
                for (var i = 0;i < length;i++) {
                    if (!record.validate(validate[i])) {
                        return false;
                    }
                }
                if (fnd9100_check_upload('fnd9100_upload_4', true) && fnd9100_check_upload('fnd9100_upload_5', true) && fnd9100_check_upload('fnd9100_upload_6', true)) {
                    return true;
                }
                return false;
            }
            
            function fnd9100_handLocationPicker_set_require(flag) {
                var div = fnd9100_getId('registered_location_desc').children[0];
                if (flag) {
                    div.style.borderColor = '#e76e70';
                } else {
                    div.style.borderColor = '#dfe0e0';
                }
            }
            //联系人展开
            
            function fnd9100_contact_init(flag) {
                var record = $('fnd_enterprise_ds').getAt(0);
                var data = record.data;
            
                record.getField('legal_rep_name').setRequired(flag);
                record.getField('legal_rep_phone').setRequired(flag);
                record.getField('legal_rep_identity_type_desc').setRequired(false);
                record.getField('legal_rep_identity_num').setRequired(false);
                record.getField('business_represent_name').setRequired(flag);
                record.getField('business_represent_phone').setRequired(flag);
                record.getField('business_rep_identity_desc').setRequired(false);
                //if (record.get('business_rep_identity_desc') == '身份证' || record.get('business_rep_identity_desc') == 'ID_CARD') {
                record.getField('business_rep_identity_num').setRequired(false);
                //} else{
                //record.getField('business_rep_identity_num').setRequired(false);
                //}
                //record.getField('business_rep_identity_num').setRequired(flag);
                record.getField('business_represent_mail').setRequired(flag);
                record.getField('business_rep_position').setRequired(true);
            
                record.getField('financial_represent_name').setRequired(true);
                record.getField('financial_represent_phone').setRequired(false);
                record.getField('finance_rep_identity_desc').setRequired(false);
                //if (record.get('finance_rep_identity_desc') == '身份证' || record.get('finance_rep_identity_desc') == 'ID_CARD') {
                record.getField('finance_rep_identity_num').setRequired(false);
            
                // } else{
                //record.getField('finance_rep_identity_num').setRequired(false);
                //}
                //record.getField('finance_rep_identity_num').setRequired(flag);
                record.getField('financial_represent_mail').setRequired(false);
                record.getField('finance_rep_position').setRequired(false);
                //将图片上传改为选填
                fnd9100_set_upload_required('fnd9100_upload_7', false);
                fnd9100_set_upload_required('fnd9100_upload_8', false);
            }
            
            function fnd9100_contact_set() {
                for (var i = 1;i <= 3;i++) {
                    var id = 'fnd9100_contact_type' + i;
                    var div = fnd9100_getId(id);
                    fnd9100_contact_list(div, i, false);
                }
            }
            
            function fnd9100_contact_show_infor(_this) {
                var div = _this.nextSibling;
                div.style.display = 'block';
                //锁频
                var body = window.document.body;
                var _div = document.createElement('div');
                _div.className = 'fnd9100-mask-window';
                _div.style.height = body.offsetHeight + 'px';
                body.appendChild(_div);
            }
            
            function fnd9100_contact_list(_this, type, flag) {
                var parent = _this.parentNode.parentNode;
                parent.style.display = 'none';
                //解频
                var body = window.document.body;
                for (var i = 0;i < body.children.length;i++) {
                    if (body.children[i].className == 'fnd9100-mask-window' && flag) {
                        body.removeChild(body.children[i]);
                    }
                }
                //判断是否有数据
                var _r = $('fnd_enterprise_ds').getAll()[0];
                var record = _r.data;
                var name, phone, id_type, id_num, _f = false,
                    _f1 = false,
                    _div;
            
                switch (type) {
                case 1:
                    name = record.legal_rep_name;
                    _name = 'legal_rep_name';
                    phone = record.legal_rep_phone;
                    _phone = 'legal_rep_phone';
                    id_type = record.legal_rep_identity_type;
                    _id_type = 'legal_rep_identity_type';
                    id_num = record.legal_rep_identity_num;
                    _id_num = 'legal_rep_identity_num';
                    if (fnd9100_check_upload('fnd9100_upload_7', true) && fnd9100_check_upload('fnd9100_upload_8', true)) {
                        _f = true;
                    }
                    if (fnd9100_check_upload('fnd9100_upload_7', false) && fnd9100_check_upload('fnd9100_upload_8', false)) {
                        _f1 = true;
                    }
                    break;
                case 2:
                    name = record.business_represent_name;
                    _name = 'business_represent_name';
                    phone = record.business_represent_phone;
                    _phone = 'business_represent_phone';
                    id_type = record.business_rep_identity_type;
                    _id_type = 'business_rep_identity_type';
                    id_num = record.business_rep_identity_num;
                    _id_num = 'business_rep_identity_num';
                    if (_r.validate('business_represent_mail') && _r.validate('business_rep_position')) {
                        _f = true;
                    }
                    if (!Aurora.isEmpty(record.business_represent_mail) && !Aurora.isEmpty(record.business_rep_position)) {
                        _f1 = true;
                    }
                    break;
                case 3:
                    name = record.financial_represent_name;
                    _name = 'financial_represent_name';
                    phone = record.financial_represent_phone;
                    _phone = 'financial_represent_phone';
                    id_type = record.finance_rep_identity_type;
                    _id_type = 'finance_rep_identity_type';
                    id_num = record.finance_rep_identity_num;
                    _id_num = 'finance_rep_identity_num';
                    if (_r.validate('financial_represent_mail') && _r.validate('finance_rep_position')) {
                        _f = true;
                    }
                    if (!Aurora.isEmpty(record.financial_represent_mail) && !Aurora.isEmpty(record.finance_rep_position)) {
                        _f1 = true;
                    }
                    break;
                default:
                    break;
                }
                var _d = parent.parentNode.children[0];
                //点击填写样式
                if (!Aurora.isEmpty(name) || !Aurora.isEmpty(phone) || !Aurora.isEmpty(id_type) || !Aurora.isEmpty(id_num)) {
                    _d.lastChild.style.display = 'none';
                    _d.children[1].style.display = 'block';
                } else {
                    _d.lastChild.style.display = 'block';
                    _d.children[1].style.display = 'none';
                }
                //校验必输
                if (!_r.validate(_name) || !_r.validate(_phone) || !_r.validate(_id_type) || !_r.validate(_id_num) || !_f) {
                    _d.className = 'registed-contact-thumbnail active';
                } else {
                    _d.className = 'registed-contact-thumbnail';
                }
                //选填已填样式
                _div = fnd9100_getId('fnd9100_contact_infor' + type);
                if (!Aurora.isEmpty(name) && !Aurora.isEmpty(phone) && !Aurora.isEmpty(id_type) && !Aurora.isEmpty(id_num) && _f1) {
                    //都填写完
                    fnd9100_set_thumbnail_cover(_div, 3);
                } else if (!_r.validate(_name) || !_r.validate(_phone) || !_r.validate(_id_type) || !_r.validate(_id_num) || !_f) {
                    //必填下未填写完
                    fnd9100_set_thumbnail_cover(_div, 1);
                } else {
                    //不必填下未填写完
                    fnd9100_set_thumbnail_cover(_div, 2);
                }
            }
            
            function fnd9100_set_thumbnail_cover(_this, type) {
                var _d = _this.nextSibling;
                var _f1 = _d.children[0];
                var _f2 = _d.children[1];
                if (type == 1) {
                    //是灰色待填样式
                    _d.style.borderTopColor = '#ccc';
                    _d.style.borderRightColor = '#ccc';
                    _f1.innerText = '待';
                    _f2.innerText = '填';
                } else if (type == 2) {
                    //灰色选填样式
                    _d.style.borderTopColor = '#ccc';
                    _d.style.borderRightColor = '#ccc';
                    _f1.innerText = '选';
                    _f2.innerText = '填';
                } else {
                    _d.style.borderTopColor = '#67B5E3';
                    _d.style.borderRightColor = '#67B5E3';
                    _f1.innerText = '已';
                    _f2.innerText = '填';
                }
            }
            
            
              function fnd9100_vendor_contract_deteteFun() {
                var contact_ds = $('fnd9100_contract_ds');
                var records=$('fnd9100_contract_ds').getSelected();
                
                 if(records.length==0 || Aurora.isEmpty(records)){
                    Aurora.showMessage('${l:PROMPT}', '请勾选一行操作');
                    return ;
                }
                var para = [];
                 for( var n=0;n<records.length;n++){
                       if(records[n].get('default_flag')=='Y'){
                                  Aurora.showMessage('${l:PROMPT}', '此联系人无法删除');
                                  return ;
                       }
                        /* records[n].set('_status', 'delete');
	        	         para.push(records[n].data); */
	        	         contact_ds.remove(records[n]);
                }
               
               /*  Aurora.request({
                        url: $('pur9010_vendor_contract_delete_link').getUrl(),
                        para: para,
                        success: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    }); */
            }
            
            function fnd9100_contact_corner_set() {
                for (var i = 1;i <= 3;i++) {
                    var div1 = fnd9100_getId('fnd9100_registed_contact_thum' + i);
                    div1.onmouseover = function(e) {
                        //e.preventDefault();
                        var _t = this.children[0].children[1];
                        _t.style.width = '60px';
                        _t.style.height = '60px';
                    };
                    div1.onmouseout = function(e) {
                        //e.preventDefault();
                        var _t = this.children[0].children[1];
                        _t.style.width = '0px';
                        _t.style.height = '0px';
                    };
                }
            
            }
            
            //前台校验图片是否上传(根据是否必输进行判断)
            
            function fnd9100_check_upload(id, flag) {
                var _upload = fnd9100_getId(id + '_ul');
                var _list = _upload.children;
                var num = 0;
                var _d = fnd9100_getId(id + '_ul');
                if (_d.getAttribute('require') == 'false' && flag) {
                    return true;
                }
                for (var i = 0;i < _list.length;i++) {
                    if (_list[i].className == 'up_card') {
                        num++;
                    }
                }
                return (num > 0) ? true : false;
            }
            
            //设置图片必输时的的upload显示
            
            function fnd9100_set_upload_required(id, flag) {
                var _d = fnd9100_getId(id + '_ul');
                var list = fnd9100_getId(id + '_list');
                if (flag) {
                    if (list) {
                        list.style.border = '1px solid #e76e70';
                    }
                    if (_d) {
                        _d.setAttribute('require', 'true');
                    }
                } else {
                    if (list) {
                        list.style.border = '1px solid #dfe0e0';
                    }
                    if (_d) {
                        _d.setAttribute('require', 'false');
                    }
                }
            
            }
            
            //复制到业务负责人
            
            function fnd9100_copyTo_businessMan(from) {
                var record = $('fnd_enterprise_ds').getAt(0);
                var data = record.data;
                var name, phone, type, type_name, num;
                //复制前校验复制的数据
                if (!record.validate('legal_rep_name') || !record.validate('legal_rep_phone') || !record.validate('legal_rep_identity_type') || !record.validate('legal_rep_identity_num')) {
                    Aurora.showMessage('${l:PROMPT}', '${l:FND_COMPANY_REGISTED.DATA_MAINTENANCE_ERROR}');
                    return;
                }
                //从法定代表人复制
                if (from == 1) {
                    name = data.legal_rep_name;
                    phone = data.legal_rep_phone;
                    type = data.legal_rep_identity_type;
                    type_name = data.legal_rep_identity_type_desc;
                    num = data.legal_rep_identity_num;
                }
                record.set('business_represent_name', name);
                record.set('business_represent_phone', phone);
                record.set('business_rep_identity_type', type);
                record.set('business_rep_identity_desc', type_name);
                record.set('business_rep_identity_num', num);
                //设置名名片
                var id = 'fnd9100_contact_type2';
                var div = fnd9100_getId(id);
                fnd9100_contact_list(div, 2, false);
                Aurora.SideBar.enable = true;
                Aurora.SideBar.show({
                    msg: '${l:FND_COMPANY_REGISTED.COPY_SUCCESSFUL}',
                    duration: 1000
                });
            }
            //复制到财务负责人
            
            function fnd9100_copyTo_financeMan(from) {
                var record = $('fnd_enterprise_ds').getAt(0);
                var data = record.data;
                var name, phone, type, type_name, num;
                //从法定代表人复制
                if (from == 1) {
                    if (!record.validate('legal_rep_name') || !record.validate('legal_rep_phone') || !record.validate('legal_rep_identity_type') || !record.validate('legal_rep_identity_num')) {
                        Aurora.showMessage('${l:PROMPT}', '${l:FND_COMPANY_REGISTED.DATA_MAINTENANCE_ERROR}');
                        return;
                    }
                    name = data.legal_rep_name;
                    phone = data.legal_rep_phone;
                    type = data.legal_rep_identity_type;
                    type_name = data.legal_rep_identity_type_desc;
                    num = data.legal_rep_identity_num;
                } else if (from == 2) {
                    if (!record.validate('business_represent_name') || !record.validate('business_represent_phone') || !record.validate('business_rep_identity_type') || !record.validate('business_rep_identity_num') || !record.validate('business_represent_mail') || !record.validate('business_rep_position')) {
                        Aurora.showMessage('${l:PROMPT}', '${l:FND_COMPANY_REGISTED.DATA_MAINTENANCE_ERROR}');
                        return;
                    }
                    name = data.business_represent_name;
                    phone = data.business_represent_phone;
                    type = data.business_rep_identity_type;
                    type_name = data.business_rep_identity_desc;
                    num = data.business_rep_identity_num;
                    var mail = data.business_represent_mail;
                    var position = data.business_rep_position;
                    record.set('financial_represent_mail', mail);
                    record.set('finance_rep_position', position);
                }
                record.set('financial_represent_name', name);
                record.set('financial_represent_phone', phone);
                record.set('finance_rep_identity_type', type);
                record.set('finance_rep_identity_desc', type_name);
                record.set('finance_rep_identity_num', num);
                //设置名名片
                var id = 'fnd9100_contact_type3';
                var div = fnd9100_getId(id);
                fnd9100_contact_list(div, 3, false);
                Aurora.SideBar.enable = true;
                Aurora.SideBar.show({
                    msg: '${l:FND_COMPANY_REGISTED.COPY_SUCCESSFUL}',
                    duration: 1000
                });
            }
            
            function fnd9100_recordValidate(record, name, value) {
                if (name == 'business_represent_mail' || name == 'financial_represent_mail') {
                    var pattern = /^([\.a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;
                    if (!pattern.test(value)) {
                        return '${FND_COMPANY_REGISTED.EMAIL_FORMAT_INCORRECT}';
                    } else {
                        return true;
                    }
                }
            }
            
            
            //身份证号码验证
            
            //function fnd9100_record_Validate(record, name, value) {
            // if ((record.get('legal_rep_identity_type') == 'ID_CARD' && name == 'legal_rep_identity_num') || record.get('business_rep_identity_type') == 'ID_CARD' && name == 'business_rep_identity_num' || record.get('finance_rep_identity_type') == 'ID_CARD' && name == 'finance_rep_identity_num') {
            //    var reg = /^[1-9]{1}[0-9]{14}$|^[1-9]{1}[0-9]{16}([0-9]|[xX])$/;
            //    var reg1=/^[A-Z][0-9]{6}\([0-9A]\)$/;
            //   if (reg.test(value)||reg1.test(value)) {
            //       return true;
            //   }else{
            //        return '${l:FND_COMPANY_REGISTED.ID_NUM_FORMAT_INCORRECT}';
            //   }
            //  }
            //     return true;
            // }
            
            //手机号码位数验证
            
            function fnd9100_phone_Validate(record, name, value) {
                
                var fe_record = $('fnd_enterprise_ds').getAt(0);   
                var domestic_foreign_code = fe_record.get('domestic_foreign_relation');           
 
                var reg = /^1\d{10}$/;
                var reg2 = /^1\d{7}$/;
                var reg3 = /^1\d{8}$/;
                // if (name == 'business_represent_phone' || name == 'financial_represent_phone') {
                // if (!reg.test(value) && !reg2.test(value) && !reg3.test(value)) {
                // return '${l:FND_COMPANY_REGISTED.TEL_NUM_FORMAT_INCORRECT}';
                // }
                // }
               // alert('domestic_foreign_code'+domestic_foreign_code);
                if (!Ext.isEmpty(record.get('legal_rep_phone'))) {
                    //只校验境内机构手机号 huangyingfei 20190730
                    if (!reg.test(value) && !Ext.isEmpty(domestic_foreign_code) && domestic_foreign_code == 'DOMESTIC' && domestic_foreign_code != 'undefined') {
                        return '${l:FND_COMPANY_REGISTED.TEL_NUM_FORMAT_INCORRECT}';
                    }
                }
                return true;
            }
            //统一社会信用代码验证
            
            function fnd9100_social_code_Validate(record, name, value) {
                if (!Ext.isEmpty(record.get('unified_social_code'))) {
                    var reg = /^(?![A-Z]+$)[0-9A-Z]{18}$/;
                    if (!reg.test(value)) {
                        return '${l:FND_COMPANY_REGISTED.UNIFIED_SOCIAL_CODE_INCORRECT}';
                    }
                }
                return true;
            }
            
            //主营品类
            
            function fnd9100_handRegistedCate_load() {
                var record = $('fnd_enterprise_ds').getCurrentRecord();
                var _d = fnd9100_getId('fnd9100_handRegisted_category');
                if (!Aurora.isEmpty(record.get('main_category'))) {
                    _d.children[1].value = record.get('main_category');
                }
            }
            
            //更多许可证信息
            var fnd9100_upload_license_index = 0;
            
            function fnd9100_license_more(_this) {
                fnd9100_upload_license_index++;
                var _d = fnd9100_getId('fnd9100_upload_file' + fnd9100_upload_license_index);
                _d.style.display = 'block';
                //增加dataset
                var ds = $('fnd9100_more_license_ds');
                var data = {
                    'company_registed_id': '${/model/company_data/record/@company_registed_id}',
                    'attachment_name': null,
                    'invalid_date': null,
                    'num': fnd9100_upload_license_index + 1
                };
                ds.create(data);
                //调整顺序
                if (fnd9100_upload_license_index == 5) {
                    _this.style.display = 'none';
                    return;
                }
            }
            
            function fnd9100_centent_set(c) {
                if (Aurora.isEmpty(c)) {
                    return '';
                } else {
                    return c;
                }
            }
            
            function fnd9100_rendererDay(cell, date, text, currentMonth) {
                var today = new Date();
                if (date > new Date(today.getFullYear(), (today.getMonth()) + 3, today.getDate())) {
                    cell.disabled = true;
                }
                return text;
            }
            
            function fnd9100_rendererDay_2(cell, date, text, currentMonth) {
                var today = new Date();
                if (date > new Date(today.getFullYear(), (today.getMonth()) + 6, today.getDate())) {
                    cell.disabled = true;
                }
                return text;
            }
            
            function fnd9100_license_setDsData() {
                var records = $('fnd9100_more_license_ds').getAll();
                for (var i = 0;i < records.length;i++) {
                    var i1 = fnd9100_getId('fnd9100_licsen' + (i + 1) + '_attachment_name');
                    var i2 = $('fnd9100_upload_file' + i + '_3');
                    var vBox = document.getElementById('fnd9100_upload_file' + i);
                    vBox.style.display = 'block';
                    i1.value = fnd9100_centent_set(records[i].get('attachment_name'));
                    i2.setValue(records[i].get('invalid_date'));
                }
                fnd9100_upload_license_index = i - 1;
                if (fnd9100_upload_license_index == 5) {
                    var _this = fnd9100_getId('fnd9100_license_plus_id');
                    _this.style.display = 'none';
                    return;
                }
            }
            
            function fnd9100_license_close(num) {
                var id = 'fnd9100_upload_file' + num;
                var table = document.getElementById(id);
                table.style.display = 'none';
                fnd9100_upload_license_index--;
                if (fnd9100_upload_license_index < 5) {
                    _this = document.getElementById('fnd9100_license_plus_id');
                    _this.style.display = 'block';
                }
                //删除对应的ds记录
                var ds = $('fnd9100_more_license_ds');
                var record = ds.getAll()[num];
                if (record) {
                    ds.remove(record);
                }
            }
            
            function fnd9100_license_submit() {
                var records = $('fnd9100_more_license_ds').getAll();
                for (var i = 0;i < records.length;i++) {
                    var i1 = fnd9100_getId('fnd9100_licsen' + (i + 1) + '_attachment_name');
                    var i2 = $('fnd9100_upload_file' + i + '_3');
                    records[i].set('attachment_name', i1.value);
                    records[i].set('invalid_date', Aurora.formatDate(i2.getValue()));
                }
                $('fnd9100_more_license_ds').submit();
            }
            
            //采购品类信息导入
            var fnd_registed_category = [];
            
            function fnd9100_registed_category_load() {
            
                var records = $('fnd9100_registed_categroy_ds').getAll();
                for (var i = 0;i < records.length;i++) {
                    fnd_registed_category.push(records[i].data);
                }
                loadjscssfile('${/request/@context_path}/component/handRegesterSteps/HandRegisterStep_category_l_new.js?v=1,2', 'js');
            }
        ]]></script>
        <a:dataSets>
            <!-- 采购品类信息查询 -->
            <a:dataSet id="fnd9100_registed_categroy_ds" autoQuery="true" fetchAll="true" model="fnd.FND9100.fnd_registed_category">
                <a:events>
                    <a:event name="load" handler="fnd9100_registed_category_load"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd9100_vendor_detail_idType_ds" lookupCode="FND_COM_SUP_INFOS.ID_TYPE"/>
            <a:dataSet id="fnd9100_vendor_detail_sex_ds" lookupCode="PUR_SEX"/>
            <a:dataSet id="group_company_flg_ds">
                <a:datas dataSource="group_company_flg"/>
            </a:dataSet>
            <a:dataSet id="registered_country_ds" fetchAll="true" loadData="true" model="public.fnd_country_lov"/>
            <a:dataSet id="registered_province_ds" fetchAll="true" model="pur.public.fnd_region_province_by_country_lov"/>
            <a:dataSet id="registered_city_ds" fetchAll="true" model="pur.public.fnd_region_city_by_province_lov"/>
            <a:dataSet id="fnd_company_enterprise_industry_ds" lookupCode="FND_COMPANIES.COMPANY_INDUSTRY"/>
            <a:dataSet id="registered_location_ds" autoQuery="true" fetchAll="true" model="pur.public.fnd_region_location">
                <a:events>
                    <a:event name="load" handler="registered_location_load"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd_company_enterprise_scale_ds" lookupCode="FND_COMPANIES.ENTERPRISE_SCALE"/>
            <a:dataSet id="fnd9200_domesticForeignRelation_ds" lookupCode="FND_COM_SUP_INFOS.DF_RELATION"/>
            <a:dataSet id="fnd9200_enterpriseNature_ds" lookupCode="FND_COM_SUP_INFOS.ENTERPRISE_NATURE"/>
            <a:dataSet id="fnd9200_institutional_properties_ds" lookupCode="FND_COMPANIES.INSTITUTIONAL_PROPERTIES"/>
            <a:dataSet id="fnd9200_taxpayerType_ds" lookupCode="FND_COM_SUP_INFOS.TAXPAYER_TYPE"/>
            <a:dataSet id="fnd_identity_card_types_ds" lookupCode="SYS_IDENTITY_CARD_TYPES"/>
            <a:dataSet id="fnd9200_supplierCategory_ds" lookupCode="FND_COM_SUP_INFOS.SUPPLIER_CATEGORY"/>
            <a:dataSet id="fnd9200_factoryNature_ds" lookupCode="FND_COM_SUP_INFOS.FACTORY_NATURE"/>
            <a:dataSet id="news_blt_query_ds" autoQuery="true" fetchAll="true" model="blt.blt_login_query_file">
                <a:events>
                    <a:event name="load" handler="news_blt_load"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd9100_contract_ds" autoQuery="true" model="fnd.FND9100.fnd_com_sup_contacts_lov" queryUrl="${/request/@context_path}/autocrud/fnd.FND9100.fnd_com_sup_contacts_lov/query?company_registed_id=${/parameter/@company_registed_id}" selectable="true">
                <a:fields>
                    <a:field name="user_role" readOnly="true" required="true"/>
                    <a:field name="position" required="true"/>
                    <a:field name="contact_name" required="true"/>
                    <a:field name="email" required="true"/>
                    <a:field name="default_flag"/>
                    <a:field name="contact_sex"/>
                    <a:field name="contact_sex_name" displayField="code_value_name" options="fnd9100_vendor_detail_sex_ds" returnField="contact_sex" valueField="code_value"/>
                    <a:field name="id_type"/>
                    <a:field name="id_type_name" displayField="code_value_name" options="fnd9100_vendor_detail_idType_ds" returnField="id_type" valueField="code_value"/>
                    <a:field name="id_number"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="fnd9000_ds_load"/>
                    <a:event name="add" handler="setinitdata"/>
                    <a:event name="update" handler="fnd9100_contract_updateHandler"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd_enterprise_ds" model="fnd.FND9100.fnd_company_registed">
                <a:datas dataSource="/model/company_data"/>
                <a:fields>
                    <a:field name="main_category_percent" required="true"/>
                    <a:field name="main_category" required="true"/>
                    <a:field name="general_manager_mail" prompt="总经理邮箱"/>
                    <a:field name="company_registed_id"/>
                    <a:field name="factory_area" required="true"/>
                    <a:field name="full_name" prompt="FND_COMPANY_REGISTED.FULL_NAME" required="true"/>
                    <a:field name="short_name" prompt="FND_COMPANY_REGISTED.SHORT_NAME"/>
                    <a:field name="business_license_number" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_NUMBER"/>
                    <a:field name="registered_country_code"/>
                    <a:field name="registered_country_name" displayField="country_name" options="registered_country_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_COUNTRY_CODE" required="true" returnField="registered_country_code" valueField="country_code"/>
                    <a:field name="registered_province_id" required="false"/>
                    <a:field name="tax_number" prompt="FND_COMPANY_REGISTED.TAX_NUMBER"/>
                    <a:field name="tax_id_number" prompt="FND_COMPANY_REGISTED.TAX_NUMBER"/>
                    <a:field name="registered_province_desc" displayField="province_name" options="registered_province_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_PROVINCE_ID" readOnly="true" required="true" returnField="registered_province_id" valueField="province_id"/>
                    <a:field name="registered_city_id" required="false"/>
                    <a:field name="registered_city_desc" displayField="city_name" options="registered_city_ds" prompt="FND_COMPANY_REGISTED.REGISTERED_CITY_ID" readOnly="true" required="true" returnField="registered_city_id" valueField="city_id"/>
                    <a:field name="business_license_end_date" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_END_DATE" required="true"/>
                    <a:field name="business_license_forever" checkedValue="Y" defaultValue="N" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_FOREVER" uncheckedValue="N"/>
                    <a:field name="address" prompt="FND_COMPANY_REGISTED.REGISTED_ADDRESS" required="true"/>
                    <a:field name="telephone" prompt="FND_COMPANY_REGISTED.TELEPHONE" required="false"/>
                    <a:field name="national_organization_code" prompt="FND_COMPANY_REGISTED.NATIONAL_ORGANIZATION_CODE" required="false"/>
                    <a:field name="business_scope" prompt="FND_COMPANY_REGISTED.BUSINESS_SCOPE" required="true"/>
                    <a:field name="industry_type_name" displayField="code_value_name" options="fnd_company_enterprise_industry_ds" prompt="FND_COMPANY_REGISTED.INDUSTRY_TYPE" returnField="industry_type" valueField="code_value"/>
                    <a:field name="registered_currency_code"/>
                    <a:field name="registered_currency_name" lovHeight="510" lovLabelWidth="100" lovService="fnd.FND9100.fnd_currency_code_lov" lovWidth="650" prompt="FND_COMPANY_REGISTED.REGISTERED_CURRENCY_CODE" title="CURRENCY_SELECTION">
                        <a:mapping>
                            <a:map from="currency_code" to="registered_currency_code"/>
                            <a:map from="currency_name" to="registered_currency_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="registered_capital" prompt="FND_COMPANY_REGISTED.REGISTERED_CAPITAL"/>
                    <a:field name="fax_no" prompt="FND_COMPANY_REGISTED.FAX_NO"/>
                    <a:field name="enterprise_scale_desc" displayField="code_value_name" options="fnd_company_enterprise_scale_ds" prompt="FND_COMPANY_REGISTED.ENTERPRISE_SCALE_CODE" required="true" returnField="enterprise_scale_code" valueField="code_value"/>
                    <a:field name="business_group_name" autoComplete="true" autoCompleteField="business_group_name" lovHeight="490" lovService="fnd.FND9100.fnd_business_groups_lov" lovWidth="490" prompt="FND_BUSINESS_GROUPS.TITLE" readOnly="true" title="FND_BUSINESS_GROUPS.QUERY_TITLE">
                        <a:mapping>
                            <a:map from="business_group_code" to="business_group"/>
                            <a:map from="business_group_name" to="business_group_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="new_group_flg" displayField="code_value_name" options="group_company_flg_ds" prompt="是否有集团公司" required="true" returnField="new_group_flg_code" valueField="code_value"/>
                    <a:field name="new_group_flg_code" prompt="集团公司名称" readOnly="true"/>
                    <a:field name="new_group_name" prompt="集团公司名称" readOnly="true"/>
                    <a:field name="business_group" prompt="FND_BUSINESS_GROUPS.TITLE" readOnly="true"/>
                    <a:field name="require_flag" checkedValue="Y" defaultValue="N" prompt="FND_COMPANY_REGISTED.REQUIRE_FLAG" uncheckedValue="N"/>
                    <a:field name="supply_flag" checkedValue="Y" defaultValue="Y" prompt="FND_COMPANY_REGISTED.SUPPLY_FLAG" uncheckedValue="N"/>
                    <a:field name="service_flag" checkedValue="Y" defaultValue="N" prompt="FND_COMPANY_REGISTED.SERVICE_FLAG" uncheckedValue="N"/>
                    <a:field name="legal_rep_name" prompt="总经理姓名"/>
                    <a:field name="legal_rep_phone" prompt="FND_COMPANY_REGISTED.PHONE" validator="fnd9100_phone_Validate"/>
                    <a:field name="legal_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="legal_rep_identity_type_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="legal_rep_identity_type" valueField="code_value"/>
                    <a:field name="business_represent_name"/>
                    <a:field name="business_represent_phone" prompt="FND_COMPANY_REGISTED.PHONE"/>
                    <a:field name="business_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="business_rep_identity_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="business_rep_identity_type" valueField="code_value"/>
                    <a:field name="business_represent_mail" validator="fnd9100_recordValidate"/>
                    <a:field name="business_rep_position"/>
                    <a:field name="financial_represent_name"/>
                    <a:field name="financial_represent_phone" prompt="FND_COMPANY_REGISTED.PHONE"/>
                    <a:field name="finance_rep_identity_num" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM"/>
                    <a:field name="finance_rep_identity_desc" displayField="code_value_name" options="fnd_identity_card_types_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_CARD_TYPE" returnField="finance_rep_identity_type" valueField="code_value"/>
                    <a:field name="financial_represent_mail" validator="fnd9100_recordValidate"/>
                    <a:field name="finance_rep_position"/>
                    <a:field name="domestic_foreign_relation_name" displayField="code_value_name" options="fnd9200_domesticForeignRelation_ds" required="true" returnField="domestic_foreign_relation" valueField="code_value"/>
                    <a:field name="enterprise_nature_name" displayField="code_value_name" options="fnd9200_enterpriseNature_ds" required="true" returnField="enterprise_nature" valueField="code_value"/>
                    <a:field name="institutional_properties_name" displayField="code_value_name" options="fnd9200_institutional_properties_ds" required="true" returnField="institutional_properties" valueField="code_value"/>
                    <a:field name="official_telephone" required="false"/>
                    <a:field name="business_address" required="true"/>
                    <a:field name="company_address" required="false"/>
                    <a:field name="taxpayer_type_name" displayField="code_value_name" options="fnd9200_taxpayerType_ds" returnField="taxpayer_type" valueField="code_value"/>
                    <a:field name="supplier_categroy_name" displayField="code_value_name" options="fnd9200_supplierCategory_ds" required="true" returnField="supplier_categroy" valueField="code_value"/>
                    <a:field name="factory_nature_name" displayField="code_value_name" options="fnd9200_factoryNature_ds" required="true" returnField="factory_nature" valueField="code_value"/>
                    <a:field name="iso14000_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="iso9001_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="qs9000_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="enviment_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="supply_time" required="false"/>
                    <a:field name="blowdown_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="supply_time_Blowdown" required="false"/>
                    <a:field name="d_b_code" readOnly="true"/>
                    <a:field name="three_in_one_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.CERTIFICATES_COMBINED" uncheckedValue="N"/>
                    <a:field name="one_one_code_flag" checkedValue="Y" prompt="FND_COMPANY_REGISTED.ONE_AS_A_CODE" readOnly="true" uncheckedValue="N"/>
                    <a:field name="unified_social_code" validator="fnd9100_social_code_Validate"/>
                    <a:field name="agent_name" required="true"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="fnd9100_register_updateHandler"/>
                    <a:event name="load" handler="fnd9100_register_loadHandler"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="fnd9100_more_license_ds" autoCreate="true" model="fnd.FND9100.fnd_company_registed_license">
                <a:datas dataSource="/model/company_atm_data"/>
                <a:fields>
                    <a:field name="company_registed_id" defaultValue="${/model/company_data/record/@company_registed_id}"/>
                    <a:field name="num" defaultValue="1"/>
                </a:fields>
                <a:events>
                    <a:event name="submitsuccess" handler="fnd9100_atm_submitsuccess"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <div class="header-container" id="content_postion">
            <div class="logo">
                <a href="${/request/@context_path}/" style="cursor:hand">
                    <img class="regester-hand-icon" src="${/request/@context_path}/images/kingwong.jpg"/>
                </a>
            </div>
        </div>
        <div class="container">
            <div id="regester_step4" style="height: 60px; margin-top:40px;margin-bottom:20px;"/>
            <div class="content-div"   style="width:1020px;">
                <div class="registed_row">
                    <div >
                        <div style="float:left;width:65%;">
                            <div style="color:red;font-size:20px;"><![CDATA[注册前请详细阅读操作手册并下载授权证明模板，授权证明模板签字盖章后作为注册附件上传！]]></div>
                        </div>
                        <div style="float:left;width:35%;">
                            <div id="login_news_minPara"/>
                        </div>
                    </div>
                    <br/>
                    <div class="head-desc"><![CDATA[
                        ${l:FND_COMPANY_REGISTED.REGISTRATION_INFORMATION}
                    ]]></div>
                    <div class="registed-content"   style="z-index:9">
                        <a:hBox labelWidth="140" id="content_position">
                            <a:textField name="full_name"   bindTarget="fnd_enterprise_ds" width="625"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:comboBox name="enterprise_scale_desc" bindTarget="fnd_enterprise_ds" emptyText="${l:FND_COMPANY_REGISTED.GROUP_BEEN_REGISTETED}" style="margin-right:70px" width="200"/>
                            <a:textField name="business_group" bindTarget="fnd_enterprise_ds" emptyText="${l:FND_COMPANY_REGISTED.BUSSINESS_GROUP}" prompt="FND_COMPANY_REGISTED.GROUP_CODE" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:comboBox name="new_group_flg" bindTarget="fnd_enterprise_ds" prompt="是否有集团公司" style="margin-right:70px" width="200"/>
                            <a:textField name="new_group_name" bindTarget="fnd_enterprise_ds" prompt="集团公司名称" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:comboBox name="domestic_foreign_relation_name" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.DOMESTIC_FOREIGN_RELATION" style="margin-right:70px" width="200"/>
                            <a:textField name="d_b_code" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.D_B_CODE" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:comboBox name="institutional_properties_name" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.NATURE_INSTITITION" style="margin-right:70px" width="200"/>
                            <a:comboBox name="enterprise_nature_name" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.ENTERPRISE_NATURE" width="200"/>
                            <div style="color:red;font-size:10px;"><![CDATA[注：请按照营业执照上的类型进行勾选]]></div>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:textField name="business_address" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.BUSINESS_ADDRESS" style="margin-right:0px" width="625"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:textField name="company_address" bindTarget="fnd_enterprise_ds" prompt="总公司地址" style="margin-right:0px" width="625"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px">
                            <a:textField name="agent_name" bindTarget="fnd_enterprise_ds" prompt="法人代表" style="margin-right:0px" width="625"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:10px;width:430px">
                            <a:upload id="fnd9100_upload_au" buttonWidth="75" downloadurl="../../../atm_download_free.svc" filetype="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="SRM平台操作授权证明(加盖章)" renderer="fnd9100_uploadAuthoriziLicenceFun_render" requireSession="false" sourcetype="FND_COPANY_REGISTED.COMPANY_AUTHORISE" text="附件上传" totalfilesize="10000"/>
                            <span id="fnd9100_upload_label_au" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                        </a:hBox>
                        <div style="margin-top:20px;position:relative">
                            <div id="fnd9100_three_showMessage_id" class="three-infor-showMessage">
                                <i class="icon-exclamation-sign"/>
                                <span class="exclamation"><![CDATA[${l:FND_COMPANY_REGISTED.REQUIRDE_ITEMS}]]></span>
                                <i class="icon-ok-sign"/>
                            </div>
                            <span class="three-infor"><![CDATA[${l:FND_COMPANY_REGISTED.CERTIFICATES_INFO}]]></span>
                            <div class="three-infor-set" onclick="fnd9100_three_infor_onclick(this)" style="border:1px solid #e76e70"><![CDATA[${l:FND_COMPANY_REGISTED.CLICK_TO_FILL}]]></div>
                            <div id="fnd9100_three_infor" class="three-infor-d active">
                                <div class="three-icon-close">
                                    <i class="icon-removes" onclick="fnd9100_three_close(this)"/>
                                </div>
                                <div class="three-row header-t-row">
                                    <a:hBox className="" labelWidth="140" style="margin-top:10px">
                                        <a:checkBox name="three_in_one_flag" bindTarget="fnd_enterprise_ds" width="60"/>
                                        <a:checkBox name="one_one_code_flag" bindTarget="fnd_enterprise_ds" width="60"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:10px">
                                        <a:textField name="unified_social_code" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.UNIFORM_CODE" width="260"/>
                                    </a:hBox>
                                </div>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:textField name="business_license_number" allowDecimals="false" allowNegative="false" bindTarget="fnd_enterprise_ds" width="260"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:textArea name="business_scope" bindTarget="fnd_enterprise_ds" width="260"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:datePicker name="business_license_end_date" bindTarget="fnd_enterprise_ds" style="margin-right:-75px" width="170"/>
                                    <a:checkBox name="business_license_forever" bindTarget="fnd_enterprise_ds" style="margin-right:20px;"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px;width:430px">
                                    <a:upload id="fnd9100_upload_4" buttonWidth="75" downloadurl="../../../atm_download_free.svc" filetype="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="FND_COMPANY_REGISTED.BUSINESS_LICENSE_ATTM" renderer="fnd9100_uploadBusinessLicenceFun_renderer" requireSession="false" sourcetype="FND_COPANY_REGISTED.BUSINESS_LICENSE" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_4_span" class="upload_icon"><![CDATA[附件上传]]></span> -->
                                    <span id="fnd9100_upload_label_4" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:comboBox name="registered_country_name" bindTarget="fnd_enterprise_ds" width="260"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <div style="font-size:14px;font-family:Microsoft YaHei;color:#666666;width:134px;text-align:right"><![CDATA[${l:FND_COMPANY_REGISTED.REGISTERED_AREA:}]]></div>
                                    <div name="handLocationPicker" id="registered_location_desc" load="fnd9100_handPickerLoad()" loadfunc="fnd9100_place_select()" require="true" use_flag="false" width="268"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:textField name="address" bindTarget="fnd_enterprise_ds" width="260"/>
                                </a:hBox>
                                <div class="three-row">
                                    <a:hBox labelWidth="140" style="margin-top:10px">
                                        <a:textField name="national_organization_code" bindTarget="fnd_enterprise_ds" emptyText="例：12345678-9" width="260"/>
                                        <div class=""/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin:10px 0;width:430px">
                                        <a:upload id="fnd9100_upload_5" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="组织代码扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.ORGANIZATION_CODE" text="附件上传" totalfilesize="10000"/>
                                        <!-- <span id="fnd9100_upload_5_span" class="upload_icon"><![CDATA[附件上传]]></span> -->
                                        <span id="fnd9100_upload_label_5" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                    </a:hBox>
                                </div>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:comboBox name="taxpayer_type_name" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.TAXPAYER_IDENTIFICATION" width="260"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px">
                                    <a:textField name="tax_id_number" bindTarget="fnd_enterprise_ds" width="260"/>
                                </a:hBox>
                                <a:hBox labelWidth="140" style="margin-top:10px;margin-bottom:20px;width:430px">
                                    <a:upload id="fnd9100_upload_6" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="税务登记扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.TAX_NUMBER" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_6_span" class="upload_icon"><![CDATA[附件上传]]></span> -->
                                    <span id="fnd9100_upload_label_6" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                            </div>
                            <div style="clear:both"/>
                        </div>
                    </div>
                    <a:hBox labelWidth="140" style="margin-top:20px">
                        <a:textArea name="supply_abstract" bindTarget="fnd_enterprise_ds" height="60" prompt="企业简介" style="margin-right:0px" width="625"/>
                    </a:hBox>
                    <a:hBox labelWidth="140" style="margin-top:10px;width:430px">
                        <a:upload id="fnd9100_upload_ab" buttonWidth="75" downloadurl="../../../atm_download_free.svc" filetype="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="企业简介附件" requireSession="false" sourcetype="FND_COPANY_REGISTED.SUPPLY_ABSTRACT" text="附件上传" totalfilesize="10000"/>
                        <span id="fnd9100_upload_label_ab" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                    </a:hBox>
                </div>
                <div class="registed_row" style="margin-top:0px;margin-bottom:20px;">
                    <div class="head-desc"><![CDATA[
                        ${l:FND_COMPANY_REGISTED.CONTACT_INFO}
                    ]]></div>
                    <div style="color:red;font-size:20px;"><![CDATA[注：业务负责人邮箱会在后续接收SRM登陆账号密码以及后续业务操作接收邮件，请正确填写！]]></div>
                    <a:screenBody>
                        <a:grid id="fnd9100_contract_grid" autoFocus="false" bindTarget="fnd9100_contract_ds" height="350" width="900">
                            <a:toolBar>
                                <a:button id="fnd_line_addBtn" type="add"/>
                                <a:button id="fnd_line_deleteBtn" click="fnd9100_vendor_contract_deteteFun" text="删除"/>
                            </a:toolBar>
                            <a:columns>
                                <a:column name="user_role" align="center" prompt="角色" width="100"/>
                                <a:column name="contact_name" align="center" editor="fnd1010_upload_tf" prompt="姓名" width="100"/>
                                <a:column name="position" align="center" editor="fnd1010_upload_tf" prompt="职位" width="100"/>
                                <a:column name="mobile_phone" align="center" editor="fnd1010_upload_nb" prompt="手机号码" width="120"/>
                                <a:column name="email" align="center" editor="fnd1010_upload_tf" prompt="电子邮箱" width="120"/>
                                <a:column name="id_type_name" align="center" editor="fnd1010_upload_cml" prompt="证件类型" width="150"/>
                                <a:column name="id_number" align="center" editor="fnd1010_upload_tf" prompt="证件编码" width="150"/>
                            </a:columns>
                            <a:editors>
                                <a:comboBox id="fnd1010_upload_cml"/>
                                <a:numberField id="fnd1010_upload_nb"/>
                                <a:dateTimePicker id="fnd1010_upload_dp"/>
                                <a:textField id="fnd1010_upload_tf"/>
                                <a:lov id="fnd1010_upload_lov"/>
                            </a:editors>
                        </a:grid>
                    </a:screenBody>
                    <div id="fnd9100_contact_set" class="registed-content contact" style="overflow:inherit;display:none">
                        <div class="registed-conatact-infor">
                            <div id="fnd9100_registed_contact_thum1" class="registed-contact-thumbnail" onclick="fnd9100_contact_show_infor(this)">
                                <div class="thumbnail-head">
                                    <span><![CDATA[总经理]]></span>
                                    <div id="fnd9100_contact_infor1" class="rightTop-tragnle-book"/>
                                    <div class="tranigle-contact">
                                        <div class="font-1"><![CDATA[${l:FND_COMPANY_REGISTED.ALREADY}]]></div>
                                        <div class="font-2"><![CDATA[${l:FND_COMPANY_REGISTED.FILLED}]]></div>
                                    </div>
                                </div>
                                <div class="thumbnail-content">
                                    <div class="thumbnail-name">
                                        <a:hBox labelWidth="0">
                                            <a:label name="legal_rep_name" bindTarget="fnd_enterprise_ds" prompt="" width="260"/>
                                        </a:hBox>
                                    </div>
                                    <a:hBox height="28" labelWidth="80" style="margin-top:10px;">
                                        <a:label name="legal_rep_phone" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="legal_rep_identity_type_desc" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="legal_rep_identity_num" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                </div>
                                <div class="thumbnail-mask">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.CLICK_TO_FILL}]]></span>
                                </div>
                            </div>
                            <div class="contact-row">
                                <div class="contact-head">
                                    <div id="fnd9100_contact_type1" class="circle-icon" onclick="fnd9100_contact_list(this,1,true)">
                                        <i class="icon-minus"/>
                                    </div>
                                    <div class="desc-title"><![CDATA[总经理]]></div>
                                    <div class="copy-contact">
                                        <div class="copy-desc"><![CDATA[${l:FND_COMPANY_REGISTED.COPY_TO:}]]></div>
                                        <div class="copy-btn" onclick="fnd9100_copyTo_businessMan(1)">
                                            <span style="font-size:16px;margin-left:5px;"><![CDATA[${l:FND_COMPANY_REGISTED.BUSINESS_LEADER}]]></span>
                                        </div>
                                        <div class="copy-btn" onclick="fnd9100_copyTo_financeMan(1)">
                                            <span style="font-size:16px;margin-left:5px;"><![CDATA[跟单员]]></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="contact-content">
                                    <a:hBox labelWidth="140" style="margin-top:0px;margin-left:0px">
                                        <a:textField name="legal_rep_name" bindTarget="fnd_enterprise_ds" prompt="总经理" style="margin-right:70px" width="200"/>
                                        <a:textField name="legal_rep_phone" bindTarget="fnd_enterprise_ds" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:0px">
                                        <a:comboBox name="legal_rep_identity_type_desc" bindTarget="fnd_enterprise_ds" style="margin-right:70px" width="200"/>
                                        <a:textField name="legal_rep_identity_num" bindTarget="fnd_enterprise_ds" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" padding="0" style="margin-top:20px;margin-left:0px;">
                                        <a:hBox labelWidth="140" width="430">
                                            <a:upload id="fnd9100_upload_7" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="正面图片" requireSession="false" sourcetype="FND_COPANY_REGISTED.LEGAL_REP_IDENTITY_FRONT" text="附件上传" totalfilesize="10000"/>
                                            <!-- <span id="fnd9100_upload_7_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                            <span id="fnd9100_upload_label_7" class="uplad" style="margin-left:-70px"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                        </a:hBox>
                                        <a:hBox labelWidth="132" width="430">
                                            <a:upload id="fnd9100_upload_8" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="背面图片" requireSession="false" sourcetype="FND_COPANY_REGISTED.LEGAL_REP_IDENTITY_BACK" text="附件上传" totalfilesize="10000"/>
                                            <!-- <span id="fnd9100_upload_8_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                            <span id="fnd9100_upload_label_8" class="uplad" style="margin-left:-78px"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                        </a:hBox>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:0px">
                                        <a:textField name="general_manager_mail" bindTarget="fnd_enterprise_ds" width="200"/>
                                    </a:hBox>
                                </div>
                            </div>
                        </div>
                        <div class="registed-conatact-infor">
                            <div id="fnd9100_registed_contact_thum2" class="registed-contact-thumbnail" onclick="fnd9100_contact_show_infor(this)">
                                <div class="thumbnail-head">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.BUSINESS_LEADER}]]></span>
                                    <div id="fnd9100_contact_infor2" class="rightTop-tragnle-book"/>
                                    <div class="tranigle-contact">
                                        <div class="font-1"><![CDATA[${l:FND_COMPANY_REGISTED.ALREADY}]]></div>
                                        <div class="font-2"><![CDATA[${l:FND_COMPANY_REGISTED.FILLED}]]></div>
                                    </div>
                                </div>
                                <div class="thumbnail-content">
                                    <div class="thumbnail-name">
                                        <a:hBox labelWidth="0">
                                            <a:label name="business_represent_name" bindTarget="fnd_enterprise_ds" prompt="" width="260"/>
                                        </a:hBox>
                                    </div>
                                    <a:hBox height="28" labelWidth="80" style="margin-top:10px;">
                                        <a:label name="business_represent_phone" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="business_rep_identity_desc" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="business_rep_identity_num" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                </div>
                                <div class="thumbnail-mask">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.CLICK_TO_FILL}]]></span>
                                </div>
                            </div>
                            <div class="contact-row">
                                <div class="contact-head">
                                    <div id="fnd9100_contact_type2" class="circle-icon" onclick="fnd9100_contact_list(this,2,true)">
                                        <i class="icon-minus"/>
                                    </div>
                                    <div class="desc-title"><![CDATA[${l:FND_COMPANY_REGISTED.BUSINESS_LEADER}]]></div>
                                    <div class="copy-contact" style="margin-right:130px">
                                        <div class="copy-desc"><![CDATA[${l:FND_COMPANY_REGISTED.COPY_TO:}]]></div>
                                        <div class="copy-btn" onclick="fnd9100_copyTo_financeMan(2)">
                                            <span style="font-size:16px;margin-left:5px;"><![CDATA[跟单员]]></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="contact-content">
                                    <a:hBox labelWidth="140" style="margin-top:0px;margin-left:10px">
                                        <a:textField name="business_represent_name" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.NAME" style="margin-right:70px" width="200"/>
                                        <a:textField name="business_rep_position" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.POSITION" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:10px">
                                        <a:comboBox name="business_rep_identity_desc" bindTarget="fnd_enterprise_ds" style="margin-right:70px" width="200"/>
                                        <a:textField name="business_rep_identity_num" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:10px">
                                        <a:textField name="business_represent_phone" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.PHONE" style="margin-right:70px" width="200"/>
                                        <a:textField name="business_represent_mail" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.EMAIL" width="200"/>
                                    </a:hBox>
                                </div>
                            </div>
                        </div>
                        <div class="registed-conatact-infor" style="margin-right:0">
                            <div id="fnd9100_registed_contact_thum3" class="registed-contact-thumbnail" onclick="fnd9100_contact_show_infor(this)">
                                <div class="thumbnail-head">
                                    <span><![CDATA[跟单员]]></span>
                                    <div id="fnd9100_contact_infor3" class="rightTop-tragnle-book"/>
                                    <div class="tranigle-contact">
                                        <div class="font-1"><![CDATA[${l:FND_COMPANY_REGISTED.ALREADY}]]></div>
                                        <div class="font-2"><![CDATA[${l:FND_COMPANY_REGISTED.FILLED}]]></div>
                                    </div>
                                </div>
                                <div class="thumbnail-content">
                                    <div class="thumbnail-name">
                                        <a:hBox labelWidth="0">
                                            <a:label name="financial_represent_name" bindTarget="fnd_enterprise_ds" prompt="" width="260"/>
                                        </a:hBox>
                                    </div>
                                    <a:hBox height="28" labelWidth="80" style="margin-top:10px;">
                                        <a:label name="financial_represent_phone" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="finance_rep_identity_desc" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                    <a:hBox height="28" labelWidth="80">
                                        <a:label name="finance_rep_identity_num" bindTarget="fnd_enterprise_ds" width="170"/>
                                    </a:hBox>
                                </div>
                                <div class="thumbnail-mask">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.CLICK_TO_FILL}]]></span>
                                </div>
                            </div>
                            <div class="contact-row">
                                <div class="contact-head">
                                    <div id="fnd9100_contact_type3" class="circle-icon" onclick="fnd9100_contact_list(this,3,true)">
                                        <i class="icon-minus"/>
                                    </div>
                                    <div class="desc-title"><![CDATA[跟单员]]></div>
                                </div>
                                <div class="contact-content">
                                    <a:hBox labelWidth="140" style="margin-top:0px;margin-left:10px">
                                        <a:textField name="financial_represent_name" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.NAME" style="margin-right:70px" width="200"/>
                                        <a:textField name="finance_rep_position" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.POSITION" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:10px">
                                        <a:comboBox name="finance_rep_identity_desc" bindTarget="fnd_enterprise_ds" style="margin-right:70px" width="200"/>
                                        <a:textField name="finance_rep_identity_num" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.IDENTITY_NUM" width="200"/>
                                    </a:hBox>
                                    <a:hBox labelWidth="140" style="margin-top:20px;margin-left:10px">
                                        <a:textField name="financial_represent_phone" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.PHONE" style="margin-right:70px" width="200"/>
                                        <a:textField name="financial_represent_mail" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.EMAIL" width="200"/>
                                    </a:hBox>
                                </div>
                            </div>
                        </div>
                        <div style="clear:both"/>
                    </div>
                </div>
                <div class="registed_row" style="margin-top:5px">
                    <div class="head-desc"><![CDATA[
                         ${l:FND_COMPANY_REGISTED.BUSINESS_INFO}
                    ]]></div>
                    <div class="registed-content" style="padding-top:30px;z-index:6">
                        <!-- <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:label prompt="FND_COMPANY_REGISTED.BUSINESS_DIRECTION" width="0"/>
                            <a:checkBox name="require_flag" bindTarget="fnd_enterprise_ds" width="0"/>
                            <a:checkBox name="supply_flag" bindTarget="fnd_enterprise_ds" width="0"/>
                             <a:checkBox name="service_flag" bindTarget="fnd_enterprise_ds" width="0"/> 
                        </a:hBox> -->
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:comboBox name="supplier_categroy_name" bindTarget="fnd_enterprise_ds" prompt="PUR_VENDORS.VENDOR_CATEGORY" style="margin-right:70px" width="200"/>
                            <!-- <a:comboBox name="industry_type_name" bindTarget="fnd_enterprise_ds" width="200"/> -->
                        </a:hBox>
                        <!-- <a:hBox id="fnd9100_upload_bo_hBox" labelWidth="140">
                            <p style="font-size:14px;color:#666666;margin-left:45px;"><![CDATA[环保资质证书:]]></p>
                            <a:hBox style="float:left">
                                <a:upload id="fnd9100_upload_bo" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf;" pkvalue="${/model/company_data/record/@company_registed_id}" requireSession="false" sourcetype="FND_COPANY_REGISTED.COMPANY_ENVIRONMENT" text="附件上传" totalfilesize="10000"/>
                                <span id="fnd9100_upload_label_bo" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                            </a:hBox>
                        </a:hBox> -->
                        <a:hBox id="fnd9100_upload_ag_hBox" labelWidth="140">
                            <p style="font-size:14px;color:#666666;margin-left:45px;"><![CDATA[代理授权证书:]]></p>
                            <a:hBox style="float:left">
                                <a:upload id="fnd9100_upload_ag" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf;" pkvalue="${/model/company_data/record/@company_registed_id}" requireSession="false" sourcetype="FND_COPANY_REGISTED.COMPANY_AGENT" text="附件上传" totalfilesize="10000"/>
                                <span id="fnd9100_upload_label_ag" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                            </a:hBox>
                            <!-- <span id="fnd9100_upload_15_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                        </a:hBox>
                        <a:hBox id="fnd9100_upload_Blowdown_hBox" labelWidth="140" style="margin-top:20px;">
                            <a:checkBox name="blowdown_flag" bindTarget="fnd_enterprise_ds" prompt="是否有排污许可证"/>
                            <a:hBox id="fnd9100_upload_Blowdown_id" style="float:left">
                                <a:upload id="fnd9100_upload_Blowdown" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf;" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="排污许可证书" requireSession="false" sourcetype="FND_COPANY_REGISTED.COMPANY_BLOWDOWN" text="附件上传" totalfilesize="10000"/>
                                <span id="fnd9100_upload_label_Blowdown" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                            </a:hBox>
                            <a:datePicker name="supply_time_Blowdown" bindTarget="fnd_enterprise_ds" dayRenderer="fnd9100_rendererDay" prompt="可提供时间" width="200"/>
                        </a:hBox>
                        <a:hBox id="fnd9100_upload_bo_hBox" labelWidth="140" style="margin-top:20px;">
                            <a:checkBox name="enviment_flag" bindTarget="fnd_enterprise_ds" prompt="是否有环评批复"/>
                            <!-- <p style="font-size:14px;color:#666666;margin-left:45px;"><![CDATA[环保资质证书:]]></p> -->
                            <a:hBox id="fnd9100_upload_bo_id" style="float:left">
                                <a:upload id="fnd9100_upload_bo" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf;" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="环评批复证书" requireSession="false" sourcetype="FND_COPANY_REGISTED.COMPANY_ENVIRONMENT" text="附件上传" totalfilesize="10000"/>
                                <span id="fnd9100_upload_label_bo" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                            </a:hBox>
                            <a:datePicker name="supply_time" bindTarget="fnd_enterprise_ds" dayRenderer="fnd9100_rendererDay_2" prompt="可提供时间" width="200"/>
                        </a:hBox>
                        <a:hBox id="fnd9100_upload_bo_hBox_tip" labelWidth="140" style="margin-top:20px;">
                            <div style="color:red;font-size:15px;"><![CDATA[注：请优先提供排污许可证，如无则提供环评批复；如两者都没有，请给出可以提供的计划时间！]]></div>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:textField name="main_category" bindTarget="fnd_enterprise_ds" prompt="主营品类" style="margin-right:68px" width="620"/>
                            <!-- <div name="HandRegisterCategory" id="fnd9100_handRegisted_category" load="fnd9100_handRegistedCate_load()" style="margin-right:68px"/> -->
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:textField name="main_category_percent" bindTarget="fnd_enterprise_ds" emptyText="请填写所选主营品类及占比(如:金属类(30%)、油墨(30%))" prompt="主营品类占比" style="margin-right:70px" width="300"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:comboBox name="factory_nature_name" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.FACTORY_NATURE" style="margin-right:70px" width="200"/>
                            <a:numberField name="factory_area" allowNegative="false" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.PLANT_AREA" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:textField name="partner_info" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.COOPERATIVE_ENTERPRICE" style="margin-right:70px" width="200"/>
                            <a:textField name="agent_brand" bindTarget="fnd_enterprise_ds" prompt="FND_COM_SUP_INFOS.AGENT_BRAND" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:checkBox name="iso14000_flag" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.ISO14000"/>
                            <a:checkBox name="iso9001_flag" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.ISO9001"/>
                            <!-- <a:checkBox name="qs9000_flag" bindTarget="fnd_enterprise_ds" prompt="QS9000认证"/> -->
                            <a:textField name="other_certificate" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.ORHER_CER" width="200"/>
                        </a:hBox>
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:hBox id="iso14000_flag_end_datepicker" labelWidth="132" style="display:none;" width="430">
                                <a:datePicker name="iso14000_flag_end_date" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.ISO14000_VALID_PERIOD" style="min-width:205px;"/>
                            </a:hBox>
                            <a:hBox id="iso9001_flag_end_datepicker" labelWidth="132" style="display:none;" width="430">
                                <a:datePicker name="iso9001_flag_end_date" bindTarget="fnd_enterprise_ds" prompt="FND_COMPANY_REGISTED.ISO9001_VALID_PERIOD" style="margin-right:25px;min-width:205px;"/>
                            </a:hBox>
                            <!--  <a:hBox id="qs9000_flag_end_datepicker" labelWidth="132" style="display:none;" width="430">
                                <a:datePicker name="qs9000_flag_end_date" bindTarget="fnd_enterprise_ds" prompt="QS9000有效期" style="margin-right:25px;min-width:205px;"/>
                            </a:hBox> -->
                        </a:hBox>
                        <!-- <a:hBox labelWidth="140" style="margin-top:20px;">
                        </a:hBox> -->
                        <a:hBox labelWidth="140" style="margin-top:20px;">
                            <a:hBox id="fnd9100_iso14000_hBox" labelWidth="125" width="430">
                                <p style="font-size:14px;color:#666666;margin-left:29px;"><![CDATA[${l:FND_COMPANY_REGISTED.ISO14000}:]]></p>
                                <div style="margin-top:-15px;">
                                    <a:hBox style="position:absolute;float:left">
                                        <a:upload id="fnd9100_upload_15" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" requireSession="false" sourcetype="FND_COPANY_REGISTED.ISO14000_CERTIFICATE" text="附件上传" totalfilesize="10000"/>
                                        <span id="fnd9100_upload_label_15" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                    </a:hBox>
                                    <!-- <span id="fnd9100_upload_15_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                </div>
                            </a:hBox>
                            <a:hBox id="fnd9100_iso9001_hBox" labelWidth="125" width="430">
                                <p style="font-size:14px;color:#666666;margin-left:29px;"><![CDATA[${l:FND_COMPANY_REGISTED.ISO9001}:]]></p>
                                <div style="margin-top:-15px;">
                                    <a:hBox style="position:absolute;float:left">
                                        <a:upload id="fnd9100_upload_16" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" requireSession="false" sourcetype="FND_COPANY_REGISTED.ISO9001_CERTIFICATE" text="附件上传" totalfilesize="10000"/>
                                        <span id="fnd9100_upload_label_16" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                    </a:hBox>
                                    <!-- <span id="fnd9100_upload_16_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                </div>
                            </a:hBox>
                            <!--  <a:hBox id="fnd9100_qs9000_hBox" labelWidth="125" width="430">
                                <p style="font-size:14px;color:#666666;margin-left:29px;"><![CDATA[QS9000认证]]></p>
                                <div style="margin-top:-15px;">
                                    <a:hBox style="position:absolute;float:left">
                                        <a:upload id="fnd9100_upload_17" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" requireSession="false" sourcetype="FND_COPANY_REGISTED.QS9000_CERTIFICATE" text="附件上传" totalfilesize="10000"/>
                                        <span id="fnd9100_upload_label_17" class="uplad_add"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                    </a:hBox>
                                     <span id="fnd9100_upload_16_span" class="upload_icon"><![CDATA[上传附件]]></span> 
                                </div>
                            </a:hBox> -->
                        </a:hBox>
                    </div>
                </div>
                <div class="registed_row" style="margin-top:50px;margin-bottom:100px">
                    <div class="head-desc"><![CDATA[
                        ${l:FND_COMPANY_REGISTED.LICENCE_INFO}
                    ]]></div>
                    <div id="fnd9100_license_content" class="registed-content" style="padding-top:30px;overflow:hidden">
                        <!-- <div>
                            <lable class="tishi"><![CDATA[注：材料类供应商需上传环保资质证书，工程商需提供《安全生产许可证》。]]></lable>
                        </div> -->
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file0" className="license-vBox-calss" labelWidth="140" style="display:block">
                                <i class="icon-remove" onclick="fnd9100_license_close(0)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen1_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_9" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE1" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_9_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_9" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file0_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file1" className="license-vBox-calss">
                                <i class="icon-remove" onclick="fnd9100_license_close(1)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen2_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_10" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE2" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_10_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_10" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file1_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file2" className="license-vBox-calss">
                                <i class="icon-remove" onclick="fnd9100_license_close(2)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen3_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_11" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE3" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_11_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_11" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file2_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file3" className="license-vBox-calss">
                                <i class="icon-remove" onclick="fnd9100_license_close(3)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen4_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_12" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE4" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_12_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_12" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file3_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file4" className="license-vBox-calss">
                                <i class="icon-remove" onclick="fnd9100_license_close(4)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen5_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_13" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE5" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_13_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_13" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file4_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <a:vBox id="fnd9100_upload_file5" className="license-vBox-calss">
                                <i class="icon-remove" onclick="fnd9100_license_close(5)"/>
                                <div class="license-row">
                                    <span><![CDATA[${l:FND_COMPANY_REGISTED.LICENCE_TYPE}:]]></span>
                                    <input id="fnd9100_licsen6_attachment_name"/>
                                </div>
                                <a:hBox labelWidth="100" width="389">
                                    <a:upload id="fnd9100_upload_14" buttonWidth="75" downloadurl="../../../atm_download_free.svc" fileType="*.jpg;*.png;*.bmp;*.jpeg;*.pdf" pkvalue="${/model/company_data/record/@company_registed_id}" prompt="许可证扫描件" requireSession="false" sourcetype="FND_COPANY_REGISTED.MORE_LICENSE6" text="附件上传" totalfilesize="10000"/>
                                    <!-- <span id="fnd9100_upload_14_span" class="upload_icon"><![CDATA[上传附件]]></span> -->
                                    <span id="fnd9100_upload_label_14" class="uplad"><![CDATA[${l:FND_COMPANY_REGISTED.UPLOAD}]]></span>
                                </a:hBox>
                                <a:hBox labelWidth="100" style="margin-top:10px;position:relative;">
                                    <a:datePicker name="invalid_date" id="fnd9100_upload_file5_3" prompt="FND_COMPANY_REGISTED.EXPIRE_DATE" width="200"/>
                                </a:hBox>
                            </a:vBox>
                        </div>
                        <div class="regist-license-box">
                            <div id="fnd9100_license_plus_id" class="license-vBox-calss plus" onclick="fnd9100_license_more(this)"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table height="150px;" style="margin-left:auto;margin-right:auto;margin-bottom:100px;" width="1200px;">
            <tr>
                <td width="600px">
                    <button class="login_btn" onclick="fnd9100_enterpriseRegister_last_page();" style="width:160px;height:32px;float:right;border-radius:5px;margin-right:50px;font-size:14px;"><![CDATA[${l:PROMPT.LAST_STEP}]]></button>
                </td>
                <td>
                    <button class="login_btn" onclick="fnd9100_enterpriseRegister_save();" style="width:160px;height:32px;float:left;margin-left:50px;border-radius:5px;font-size:14px;"><![CDATA[${l:PROMPT.NEXT_STEP}]]></button>
                </td>
            </tr>
        </table>
        <!--
            $Author: 李侃  
            $Date: 20170726  
            $Describe: 修改页面底部
        -->
        <!-- <div class="register-bottom text-center">
            <p style="margin-top:10px"><![CDATA[${l:HAND_COMPANY_SITE_INFO} ${l:HAND_COMPANY_CONTACT_INFO} ${l:HAND_COMPANY_ICP_INFO} Copyright Hand China Co.,Ltd.]]></p>
        </div> -->
        <div class="customization-info">
            <label><![CDATA[技术支持方：上海汉得信息技术股份有限公司]]></label>
            <label style="margin-left:25px;"><![CDATA[联系电话：400-900-9298]]></label>
            <label style="margin-left:25px;"><![CDATA[沪ICP备14039535号-1 © Copyright Hand China Co.,Ltd.]]></label>
        </div>
        <script><![CDATA[
            Aurora.onReady(function() {
                 
                 fnd9100Init();
                 console.log('----');
                for (var i = 4;i <= 16;i++) {
                    fnd9100_set_upload_init('fnd9100_upload_' + i, 205);
                    fnd9100_set_upload_label_init('fnd9100_upload_label_' + i, 'fnd9100_upload_' + i + '_btn', 'fnd9100_upload_' + i);
                }
                //初始化企业简介附件
                fnd9100_set_upload_init('fnd9100_upload_ab', 205);
                fnd9100_set_upload_label_init('fnd9100_upload_label_ab', 'fnd9100_upload_ab_btn', 'fnd9100_upload_ab');
                //初始化公司授权证明
                fnd9100_set_upload_init('fnd9100_upload_au', 205);
                fnd9100_set_upload_label_init('fnd9100_upload_label_au', 'fnd9100_upload_au_btn', 'fnd9100_upload_au');
                //初始化环保资质证明
                fnd9100_set_upload_init('fnd9100_upload_bo', 205);
                fnd9100_set_upload_label_init('fnd9100_upload_label_bo', 'fnd9100_upload_bo_btn', 'fnd9100_upload_bo');
                 //初始化排污许可证
                fnd9100_set_upload_init('fnd9100_upload_Blowdown', 205);
                fnd9100_set_upload_label_init('fnd9100_upload_label_Blowdown', 'fnd9100_upload_Blowdown_btn', 'fnd9100_upload_Blowdown');
                //贸易商环保资质证明
                // fnd9100_set_upload_init('fnd9100_upload_bo_2', 205);
                // fnd9100_set_upload_label_init('fnd9100_upload_label_bo_2', 'fnd9100_upload_bo_2_btn', 'fnd9100_upload_bo_2');
                //初始化代理商授权证明
                fnd9100_set_upload_init('fnd9100_upload_ag', 205);
                fnd9100_set_upload_label_init('fnd9100_upload_label_ag', 'fnd9100_upload_ag_btn', 'fnd9100_upload_ag');
                //初始化页面设置
                
            
                function fnd9100_set_upload_init(id, w) {
                    var div = document.getElementById(id);
                    if (div) {
                        div.children[1].style.minHeight = '32px';
                        div.children[1].style.minWidth = w + 'px';
                        div.children[1].style.border = '1px solid #dfe0e0';
                        div.children[0].children[0].style.opacity = '0';
                        div.children[0].children[0].style.height = '32px';
                        div.children[0].children[1].style.width = '58px';
                        div.children[0].children[1].style.height = '32px';
                        //李侃添加: 修改文件上传样式错乱
                        div.children[1].style.maxWidth = '200px';
                        div.children[0].style.display = 'none';
                        var span = document.getElementById(id + '_span');
                        if (span) {
                            span.parentNode.style.position = 'relative';
                        }
                    } else {
                        div = document.getElementById(id + '_ul').parentNode;
                        div.className = 'registed-ie-upload';
                        div.style.border = '1px solid #dfe0e0';
                        div.style.maxWidth = '200px';
                        div.previousSibling.className = 'registed-ie-upSpan';
                        //李侃添加:修改文件上传样式错乱
                        var divParent = div.parentNode;
                        divParent.style.display = 'table';
                        divParent.children[0].style.display = 'table-cell';
                        divParent.children[0].style.verticalAlign = 'middle';
                        divParent.children[0].style.position = 'relative';
                        divParent.children[0].style.left = '100%';
                        divParent.children[0].style.bottom = '14px';
                    }
                }
                //李侃添加
                //20170726
                //新增附件上传处理
            
                function fnd9100_set_upload_label_init(id, btnid, parId) {
                    var div = document.getElementById(id);
                    div.onclick = function() {
                        var newdiv = document.getElementById(btnid);
                        if (newdiv) {
                            newdiv.click();
                        }
                    };
            
                }
            });
                
        ]]></script>
    </a:view>
    <script src="${/request/@context_path}/component/handLocationPicker/handLocationPicker.js?v=1.2"/>
</a:screen>
