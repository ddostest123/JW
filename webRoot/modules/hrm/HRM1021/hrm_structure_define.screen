<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: wangcheng6595
    $Date: 2015-06-10 09:34:11
    $Revision: 1.0  
    $Purpose: 组织架构定义
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:init-procedure>
        <a:model-query model="hrm.HRM1021.hrm_structure_counts" rootPath="hrm1021_structure_counts"/>
    </a:init-procedure>
    <a:view>
        <a:link id="hrm1021_vendorBuRelation_link" url="${/request/@context_path}/modules/hrm/HRM1021/hrm_vendor_bu_relations.screen"/>
        <a:link id="hrm1021_purOrg_allocate_invOrg_link" url="${/request/@context_path}/modules/pur/PUR1110/pur_organizations_allocate_inv_org.screen"/>
        <a:link id="hrm1021_fnd_companies_disable_link" model="hrm.HRM1021.hrm_company" modelaction="delete"/>
        <a:link id="hrm1021_fnd_companies_enable_link" model="hrm.HRM1021.hrm_company" modelaction="execute"/>
        <a:link id="pur_organizations_allocate_all_inv_org_link" model="db.pur_organizations_pkg.allocate_all_inv_orgs" modelaction="batch_update"/>
        <a:link id="fnd9220_companySupplierEntering_link" url="${/request/@context_path}/modules/fnd/FND9220/fnd_9220_company_supplier_entering.screen"/>
        <a:link id="fnd9220_companySupplierInit_link" model="fnd.FND9220.fnd_9220_company_query" modelaction="execute"/>
        <a:link id="hrm1020_hr_unit_define_link" url="${/request/@context_path}/modules/hrm/HRM1020/hrm_unit_define.screen"/>
        <a:link id="hrm1021_comPurOrgRelations_link" url="${/request/@context_path}/modules/hrm/HRM1021/hrm_com_purorg_relations.screen"/>
        <a:link id="fnd9210_companyUpdateDetail_link" url="${/request/@context_path}/modules/fnd/FND9210/fnd_9210_company_detail_update.screen"/>
        <style><![CDATA[
        .select
    	{
    		background:#63B8FF;
    		color:white;
    	}
    
    	.unselect
    	{
    		background-color:#f4f4f4;
    		color:#63B8FF;
    	}
        
        ]]></style>
        <script><![CDATA[
            //各层级数量
            var companyCount = '${/model/hrm1021_structure_counts/record/@company_count}';
            var businessUnitCount = '${/model/hrm1021_structure_counts/record/@business_unit_count}';
            var invOrgCount = '${/model/hrm1021_structure_counts/record/@inv_org_count}';
            var invWarehouseCount = '${/model/hrm1021_structure_counts/record/@inv_warehouse_count}';
            var invLocationCount = '${/model/hrm1021_structure_counts/record/@inv_location_count}';
            var purOrgCount = '${/model/hrm1021_structure_counts/record/@pur_org_count}';
            var purBuyerCount = '${/model/hrm1021_structure_counts/record/@pur_buyer_count}';
            var hrmUnitCount = '${/model/hrm1021_structure_counts/record/@hrm_unit_count}';
            var hrmPositionCount = '${/model/hrm1021_structure_counts/record/@hrm_position_count}';
            // Aurora.onReady(function() {
            // document.getElementById("hrm1021_company").innerHTML = companyCount;
            // });
            
            //设置未选CSS
            
            function hrm1021_setUnselectedCss() {
                document.getElementById("hrm1021_business_group").style.background = "#f4f4f4";
                document.getElementById("hrm1021_business_group").style.color = "#63B8FF";
                document.getElementById("hrm1021_company").style.background = "#f4f4f4";
                document.getElementById("hrm1021_company").style.color = "#63B8FF";
                document.getElementById("hrm1021_business_unit").style.background = "#f4f4f4";
                document.getElementById("hrm1021_business_unit").style.color = "#63B8FF";
                document.getElementById("hrm1021_inv_organization").style.background = "#f4f4f4";
                document.getElementById("hrm1021_inv_organization").style.color = "#63B8FF";
                document.getElementById("hrm1021_inv_warehouse").style.background = "#f4f4f4";
                document.getElementById("hrm1021_inv_warehouse").style.color = "#63B8FF";
                document.getElementById("hrm1021_inv_location").style.background = "#f4f4f4";
                document.getElementById("hrm1021_inv_location").style.color = "#63B8FF";
                document.getElementById("hrm1021_unit").style.background = "#f4f4f4";
                document.getElementById("hrm1021_unit").style.color = "#63B8FF";
                document.getElementById("hrm1021_position").style.background = "#f4f4f4";
                document.getElementById("hrm1021_position").style.color = "#63B8FF";
                document.getElementById("hrm1021_pur_organization").style.background = "#f4f4f4";
                document.getElementById("hrm1021_pur_organization").style.color = "#63B8FF";
                document.getElementById("hrm1021_pur_buyer").style.background = "#f4f4f4";
                document.getElementById("hrm1021_pur_buyer").style.color = "#63B8FF";
            }
            
            //设置隐藏
            
            function hrm1021_setDivDisplayNone() {
                document.getElementById("hrm1021_business_group_div").style.display = "none";
                document.getElementById("hrm1021_company_div").style.display = "none";
                document.getElementById("hrm1021_business_unit_div").style.display = "none";
                document.getElementById("hrm1021_inv_organization_div").style.display = "none";
                document.getElementById("hrm1021_inv_warehouse_div").style.display = "none";
                document.getElementById("hrm1021_inv_location_div").style.display = "none";
                document.getElementById("hrm1021_unit_div").style.display = "none";
                document.getElementById("hrm1021_position_div").style.display = "none";
                document.getElementById("hrm1021_pur_organization_div").style.display = "none";
                document.getElementById("hrm1021_pur_buyer_div").style.display = "none";
            }
            
            function business_group() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_business_group").style.background = "#63B8FF";
                document.getElementById("hrm1021_business_group").style.color = "white";
                document.getElementById("hrm1021_business_group_div").style.display = "block";
            }
            
            function hrm1021_company() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_company").style.background = "#63B8FF";
                document.getElementById("hrm1021_company").style.color = "white";
                document.getElementById("hrm1021_company_div").style.display = "block";
            }
            
            function hrm1021_business_unit() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_business_unit").style.background = "#63B8FF";
                document.getElementById("hrm1021_business_unit").style.color = "white";
                document.getElementById("hrm1021_business_unit_div").style.display = "block";
            }
            
            function hrm1021_inv_organization() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_inv_organization").style.background = "#63B8FF";
                document.getElementById("hrm1021_inv_organization").style.color = "white";
                document.getElementById("hrm1021_inv_organization_div").style.display = "block";
            }
            
            function hrm1021_inv_warehouse() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_inv_warehouse").style.background = "#63B8FF";
                document.getElementById("hrm1021_inv_warehouse").style.color = "white";
                document.getElementById("hrm1021_inv_warehouse_div").style.display = "block";
            }
            
            function hrm1021_inv_location() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_inv_location").style.background = "#63B8FF";
                document.getElementById("hrm1021_inv_location").style.color = "white";
                document.getElementById("hrm1021_inv_location_div").style.display = "block";
            }
            
            function hrm1021_unit() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_unit").style.background = "#63B8FF";
                document.getElementById("hrm1021_unit").style.color = "white";
                document.getElementById("hrm1021_unit_div").style.display = "block";
            }
            
            function hrm1021_position() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_position").style.background = "#63B8FF";
                document.getElementById("hrm1021_position").style.color = "white";
                document.getElementById("hrm1021_position_div").style.display = "block";
            }
            
            
            function hrm1021_pur_organization() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_pur_organization").style.background = "#63B8FF";
                document.getElementById("hrm1021_pur_organization").style.color = "white";
                document.getElementById("hrm1021_pur_organization_div").style.display = "block";
            }
            
            function hrm1021_pur_buyer() {
                hrm1021_setUnselectedCss();
                hrm1021_setDivDisplayNone();
                document.getElementById("hrm1021_pur_buyer").style.background = "#63B8FF";
                document.getElementById("hrm1021_pur_buyer").style.color = "white";
                document.getElementById("hrm1021_pur_buyer_div").style.display = "block";
            }
            
            function hrm1021_businessUnitQueryFunction() {
                $('hrm1021_business_unit_result_ds').query();
            }
            
            function hrm1021_invOrganizationQueryFunction() {
                $('hrm1021_inv_organization_result_ds').query();
            }
            
            function hrm1021_invWarehouseQueryFunction() {
                $('hrm1021_inv_warehouse_result_ds').query();
            }
            
            function hrm1021_invLocationQueryFunction() {
                $('hrm1021_inv_location_result_ds').query();
            }
            
            function hrm1021_purOrganizationQueryFunction() {
                $('hrm1021_pur_organization_result_ds').query();
            }
            
            function hrm1021_purBuyerQueryFunction() {
                $('hrm1021_pur_buyer_result_ds').query();
            }
            
            function hrm1021_unitQueryFunction() {
                $('hrm1021_unit_result_ds').query();
            }
            
            //集团
            //公司
            
            
            function hrm1021_companiesResultDsQueryFunction() {
                $('hrm1021_companies_result_ds').query();
            }
            
            function hrm1021_companiesResultDsOnUpdate(ds, record, name, value, oldvalue) {
                var company_id = record.get('company_id');
                if (name == 'enabled_flag') {
                    if (value == 'Y') {
                        hrm1021_companiesResultDsGridRendererEnableCompany(company_id);
                    } else if (value == 'N') {
                        hrm1021_companiesResultDsGridRendererDisableCompany(company_id);
                    }
                }
            }
            
            function hrm1021_companiesResultDsGridRendererEnableCompany(company_id) {
                Aurora.showConfirm('${l:PROMPT}', '${l:HR_COMPANY.SURE_TO_ENABLE_COMPANY}', function() {
                    Aurora.request({
                        url: $('hrm1021_fnd_companies_enable_link').getUrl(),
                        para: {
                            company_id: company_id
                        },
                        success: function() {
                            hrm1021_companiesResultDsQueryFunction();
                        },
                        failure: function() {},
                        error: function() {},
                        scope: this
                    });
                }, function() {
                    hrm1021_companiesResultDsQueryFunction();
                }, 360, 120);
            }
            
            function hrm1021_companiesResultDsGridRendererDisableCompany(company_id) {
                Aurora.showConfirm('${l:PROMPT}', '${l:HR_COMPANY.SURE_TO_DISABLE_COMPANY}', function() {
                    Aurora.request({
                        url: $('hrm1021_fnd_companies_disable_link').getUrl(),
                        para: {
                            company_id: company_id
                        },
                        success: function() {
                            hrm1021_companiesResultDsQueryFunction();
                        },
                        failure: function() {},
                        error: function() {},
                        scope: this
                    });
                }, function() {
                    hrm1021_companiesResultDsQueryFunction();
                }, 360, 120);
            }
            
            function fnd9210_companyDetail_window(company_id) {
                new Aurora.Window({
                    id: 'fnd9210_company_update_window',
                    title: '${l:FND_COMPANIES.DETAIL_TITLE}',
                    url: $('fnd9210_companyUpdateDetail_link').getUrl() + '?company_id=' + company_id,
                    width: 930,
                    height: 550
                }).on('beforeclose', hrm1021_companiesResultDsQueryFunction);
            }
            
            function hrm1021_companiesResultDsGridRenderer(value, record, name) {
                var company_id = record.get('company_id');
                var enabled_flag = record.get('enabled_flag');
                if (name == 'company_supplier_entering' && record.get('company_id')) {
                    return '<a href="javascript:hrm1021_companySupplierEntering_openWindow(' + record.get('company_id') + ')">${l:FND9220.COMPANY_SUPPLIER_ENTERING}</a>';
                } else if (name == 'assignUnit') {
                    if (!Aurora.isEmpty(company_id) && enabled_flag == 'Y') {
                        return '<a href="javascript:hrm1020_companiesResultDsGridRendererAssignUnit(' + company_id + ')">${l:HRM.ASSIGN_UNIT}</a>';
                    }
                } else if (name == 'assignPurOrg') {
                    if (!Aurora.isEmpty(company_id) && enabled_flag == 'Y') {
                        return '<a href="javascript:hrm1020_companiesResultDsGridRendererAssignPurOrg(' + company_id + ')">${l:HRM.ASSIGN_PUR_ORG}</a>';
                    }
                } else if (name == 'company_code') {
                    /* return '<a href="javascript:fnd9210_companyDetail_window(' + company_id + ')">' + value + '</a>'; */
                    return '<a href="javascript:hrm1021_companySupplierEntering_openWindow(' + record.get('company_id') + ')">' + value + '</a>';
                }
            }
            
            
            
            function hrm1020_companiesResultDsGridRendererAssignUnit(company_id) {
                new Aurora.Window({
                    id: 'hrm1020_hr_unit_define_link_window',
                    title: '${l:HRM.ASSIGN_UNIT}',
                    url: $('hrm1020_hr_unit_define_link').getUrl() + '?company_id=' + company_id,
                    height: 550,
                    width: 1000
                });
            }
            
            function hrm1020_companiesResultDsGridRendererAssignPurOrg(company_id) {
                //window.parent.openFunction('modules/pur/PUR1110/pur_organizations.screen', '${l:MODULES/PUR/PUR1110/PUR_ORGANIZATIONS.SCREEN.TITLE}');
            	new Aurora.Window({
                    id: 'hrm1021_comPurOrgRelations_window',
                    title: '${l:PUR_ORGANIZATIONS.PUR_ORGANIZATION}',
                    url: $('hrm1021_comPurOrgRelations_link').getUrl() + '?company_id=' + company_id,
                    width: 785,
                    height: 500
                });
            }
            
            function hrm1021_companySupplierEntering_openWindow(company_id) {
                Aurora.Masker.mask(Ext.getBody(), '${l:LOADING}');
                Aurora.request({
                    url: $('fnd9220_companySupplierInit_link').getUrl(),
                    para: {
                        company_id: company_id
                    },
                    success: function(res) {
                        Aurora.Masker.unmask(Ext.getBody());
                        //var supplier_id = res.result.supplier_id;
                        new Aurora.Window({
                            id: 'fnd9220_company_supplier_entering_window',
                            title: '${l:FND9220.COMPANY_SUPPLIER_ENTERING}',
                            url: $('fnd9220_companySupplierEntering_link').getUrl() + '?company_id=' + company_id,
                            fullScreen: true
                        });
                    },
                    failure: function() {
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    error: function() {
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    scope: this
                });
            }
            
            //业务实体
            
            function hrm1021_businessUnitEditFunction(record, name) {
                if (record.isNew) {
                    if (name == 'display_code') {
                        return 'hrm1021_business_unit_grid_displayCode';
                    } else if (name == 'business_unit_name') {
                        return 'hrm1021_business_unit_grid_buDesc';
                    } else {
                        return '';
                    }
                }
            }
            
            function hrm1021_vendorBuRelationFunction(value, record, name) {
                if (record.get('business_unit_id')) {
                    return '<a href="javascript:hrm1021_vendorBuRelations_openWindow(' + record.get('business_unit_id') + ')">${l:HRM.ASSIGN_VENDOR}</a>';
                }
            }
            
            function hrm1021_vendorBuRelations_openWindow(business_unit_id) {
                new Aurora.Window({
                    id: 'hrm1021_vendorBuRelation_window',
                    title: '${l:HRM.ASSIGN_VENDOR}',
                    url: $('hrm1021_vendorBuRelation_link').getUrl() + '?business_unit_id=' + business_unit_id,
                    width: 785,
                    height: 500
                });
            }
            
            //库存组织
            
            function hrm1021_invOrganizationEditFunction(record, name) {
                if (name == 'inv_organization_code') {
                    if (record.isNew) {
                        return 'hrm1021_inv_organization_grid_invOrgCode';
                    } else {
                        return '';
                    }
                } else if (name == 'inv_organization_name') {
                    if (record.isNew || record.get('data_source') == 'SRM') {
                        return 'hrm1021_inv_organization_grid_invOrgName';
                    } else {
                        return '';
                    }
                }
            }
            
            function hrm1021_invOrganizationOnUpdate(ds, record, name, value, oldvalue) {
                var records = ds.getAll();
                if (name == 'primary_flag') {
                    if (value && value == 'Y') {
                        for (var i = 0;i < records.length;i++) {
                            if (ds.indexOf(record) != ds.indexOf(records[i])) {
                                records[i].set('primary_flag', 'N');
                            }
                        }
                    }
                }
            }
            
            //库房
            
            function hrm1021_invWarehouseEditFunction(record, name) {
                if (name == 'warehouse_code') {
                    if (record.isNew) {
                        return 'hrm1021_inv_warehouse_grid_invWarehouseCode';
                    }
                } else if (name == 'warehouse_name') {
                    if (record.isNew || record.get('data_source') == 'SRM') {
                        return 'hrm1021_inv_warehouse_grid_invWarehouseName';
                    }
                } else if (name == 'inv_organization_name') {
                    if (record.isNew || record.get('data_source') == 'SRM') {
                        return 'hrm1021_inv_organization_grid_invOrgLov';
                    }
                } else {
                    return '';
                }
            }
            
            //库位
            
            function hrm1021_invLocationhouseEditFunction(record, name) {
                if (name == 'location_code') {
                    if (record.isNew) {
                        return 'hrm1021_inv_location_grid_invLocationCode';
                    }
                } else if (name == 'location_name') {
                    if (record.isNew || record.get('data_source') == 'SRM') {
                        return 'hrm1021_inv_location_grid_invLocationName';
                    }
                } else if (name == 'warehouse_code_name') {
                    if (record.isNew || record.get('data_source') == 'SRM') {
                        return 'hrm1021_inv_location_grid_invWarehouseLov';
                    }
                } else {
                    return '';
                }
            }
            
            //部门
            //岗位
            //采购组织
            
            function hrm1021_purOrganizationEditFunction(record, name) {
                if (name == 'pur_organization_code') {
                    if (record.isNew) {
                        return 'hrm1021_pur_organization_grid_purOrgCode';
                    }
                } else {
                    return '';
                }
            }
            
            function hrm1021_allocateInvOrg(value, record, name) {
                if (!record.isNew) {
                    var purorgid = record.get('pur_organization_id');
                    var url = $('hrm1021_purOrg_allocate_invOrg_link').getUrl() + '?pur_organization_id=' + purorgid;
                    return '<a href="javascript:hrm1021_purOrgAllocateInvOrgFunction(\'' + url + '\')">${l:HRM.ASSIGN_INV_ORG}</a>';
                }
            }
            
            function hrm1021_purOrgAllocateInvOrgFunction(url) {
                new Aurora.Window({
                    id: 'pur_organizations_allocate_inv_org_window',
                    url: url,
                    title: '${l:HRM.ASSIGN_INV_ORG}',
                    height: 500,
                    width: 800
                });
            }
            
            function hrm1021_allocateAllInvOrg() {
                var para = [];
                var dataSet = $('hrm1021_pur_organization_result_ds');
                var selectedRecords = dataSet.getSelected();
                if (selectedRecords.length < 1) {
                    Aurora.showMessage('${l:PROMPT_MESSAGE}', '${l:PROMPT.PLEASE_SELECT}', null, 250, 100);
                    return false;
                } else {
            
                    for (var i = 0;i < selectedRecords.length;i++) {
                        if (selectedRecords[i].dirty || selectedRecords[i].isNew) {
                            Aurora.showMessage('${l:PROMPT_MESSAGE}', '${l:SYS_ALERT_RULES.SAVE_FIRST}', null, 250, 100);
                            return false;
                        }
                    }
            
                    for (var j = 0;j < selectedRecords.length;j++) {
            
                        selectedRecords[j].set('_status', 'update');
                        para.push(selectedRecords[j].data);
                    }
            
                    Aurora.showConfirm('${l:PROMPT}', '${l:PUR_ORGANIZATIONS.ASSIGNED_INVENTORY_ORGANIZATIONS}？', function() {
                        Aurora.request({
                            url: $('pur_organizations_allocate_all_inv_org_link').getUrl(),
                            para: para,
                            success: hrm1021_purOrganizationRequestSuccess,
                            scope: this
                        });
                    });
            
            
                }
            }
            
            function hrm1021_purOrganizationRequestSuccess() {
                Aurora.showMessage('${l:EXP1900_ASK_COMMIT}', '${l:BGT_STRUCTURE.OPERATE_SUCCESS}', null, 250, 100);
                $('hrm1021_pur_organization_result_ds').query();
            }
            //采购员
            
            function hrm1021_buyerEditFunction(record, name){
                if(name == 'buyer_name' && record.get('data_source') == 'SRM'){
                    return 'hrm1021_pur_buyer_grid_purBuyerName';
                }
                
                return '';
            }
        ]]></script>
        <a:dataSets>
            <!-- USER AUTHORITY COMPANY-->
            <a:dataSet id="hrm1021_userAuthorityCompany_ds" fetchAll="true" loadData="true" model="public.fnd_user_authority_company_query"/>
            <!-- 集团 -->
            <a:dataSet id="hrm1021_business_group_query_ds"/>
            <a:dataSet id="hrm1021_business_group_result_ds" autoQuery="true" model="hrm.HRM1021.hrm_business_group" selectable="true">
                <a:fields>
                    <a:field name="business_group_code" readOnly="true"/>
                    <a:field name="business_group_name" readOnly="true"/>
                </a:fields>
            </a:dataSet>
            <!-- 公司 -->
            <a:dataSet id="hrm1021_companies_query_ds"/>
            <a:dataSet id="hrm1021_companies_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_company" queryDataSet="hrm1021_companies_query_ds" selectable="true">
                <a:fields>
                    <a:field name="company_code" required="true" requiredMessage="${l:HR_COMPANY.COMPANY_CODE_NOT_NULL}"/>
                    <a:field name="company_short_name" required="true" requiredMessage="${l:HR_COMPANY.COMPANY_SHORT_NAME_NOT_NULL}"/>
                    <a:field name="company_full_name" required="true" requiredMessage="${l:HR_COMPANY.COMPANY_FULL_NAME_NOT_NULL}"/>
                    <a:field name="enabled_flag" checkedValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="hrm1021_companiesResultDsOnUpdate"/>
                </a:events>
            </a:dataSet>
            <!-- 业务实体 -->
            <a:dataSet id="hrm1021_business_unit_query_ds">
                <a:fields>
                    <a:field name="company_id"/>
                    <a:field name="company_name" displayField="company_full_name" options="hrm1021_userAuthorityCompany_ds" prompt="FND_COMPANIES.COMPANY" returnField="company_id" valueField="company_id"/>
                    <a:field name="business_unit_code"/>
                    <a:field name="business_unit_name"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="hrm1021_business_unit_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_business_units" queryDataSet="hrm1021_business_unit_query_ds" selectable="true">
                <a:fields>
                    <a:field name="company_id"/>
                    <a:field name="business_unit_name" required="true"/>
                    <a:field name="company_name" displayField="company_full_name" options="hrm1021_userAuthorityCompany_ds" prompt="FND_COMPANIES.COMPANY" required="true" returnField="company_id" valueField="company_id"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
            <!-- 库存组织 -->
            <a:dataSet id="hrm1021_inv_organization_query_ds">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_name" labelWidth="200" lovHeight="490" lovService="hrm.HRM1021.hrm_business_unit_lov" lovWidth="540" title="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="hrm1021_inv_organization_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_inv_organizations" queryDataSet="hrm1021_inv_organization_query_ds" selectable="true">
                <a:fields>
                    <a:field name="inv_organization_code" required="true"/>
                    <a:field name="inv_organization_name" required="true"/>
                    <a:field name="business_unit_id"/>
                    <a:field name="business_unit_code"/>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_name" labelWidth="200" lovHeight="490" lovService="hrm.HRM1021.hrm_business_unit_lov" lovWidth="540" required="true" title="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="data_source" defaultValue="SRM"/>
                    <a:field name="primary_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="hrm1021_invOrganizationOnUpdate"/>
                </a:events>
            </a:dataSet>
            <!-- 库房 -->
            <a:dataSet id="hrm1021_inv_warehouse_query_ds">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_name" labelWidth="200" lovHeight="490" lovService="hrm.HRM1021.hrm_business_unit_lov" lovWidth="540" title="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="hrm1021_inv_warehouse_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_inv_warehouses" queryDataSet="hrm1021_inv_warehouse_query_ds" selectable="true">
                <a:fields>
                    <a:field name="warehouse_code" required="true"/>
                    <a:field name="warehouse_name" required="true"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="inv_organization_name" autoComplete="true" autoCompleteField="inv_organization_name" lovHeight="510" lovLabelWidth="150" lovService="public.inv_organizations_lov" lovWidth="580" required="true" title="INV_ORGANIZATIONS.INV_ORGANIZATION">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_name"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="data_source" defaultValue="SRM"/>
                </a:fields>
            </a:dataSet>
            <!-- 库位 -->
            <a:dataSet id="hrm1021_inv_location_query_ds">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_name" labelWidth="200" lovHeight="490" lovService="hrm.HRM1021.hrm_business_unit_lov" lovWidth="540" title="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="hrm1021_inv_location_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_inv_locations" queryDataSet="hrm1021_inv_location_query_ds" selectable="true">
                <a:fields>
                    <a:field name="location_code" required="true"/>
                    <a:field name="location_name" required="true"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="warehouse_code_name" autoComplete="true" autoCompleteField="warehouse_code_name" lovHeight="500" lovService="public.inv_warehouse_lov" lovWidth="530" required="true" title="INV_WAREHOUSES.INV_WAREHOUSE">
                        <a:mapping>
                            <a:map from="warehouse_id" to="warehouse_id"/>
                            <a:map from="warehouse_code_name" to="warehouse_code_name"/>
                            <a:map from="warehouse_name" to="warehouse_name"/>
                            <a:map from="inv_organization_name" to="inv_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="data_source" defaultValue="SRM"/>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_name" labelWidth="200" lovHeight="490" lovService="hrm.HRM1021.hrm_business_unit_lov" lovWidth="540" required="true" title="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <!-- 部门 -->
            <a:dataSet id="hrm1021_unit_query_ds"/>
            <a:dataSet id="hrm1021_unit_result_ds" autoQuery="true" fetchAll="true" model="hrm.HRM1021.hrm_unit" queryDataSet="hrm1021_unit_query_ds" queryUrl="${/request/@context_path}/autocrud/hrm.HRM1021.hrm_unit/query?company_id=${/parameter/@company_id}">
                <a:fields>
                    <a:field name="unit_code" required="true" requiredMessage="${l:HR_UNIT.UNIT_CODE_NOT_NULL}"/>
                    <a:field name="unit_desc" required="true" requiredMessage="${l:HR_UNIT.UNIT_DESC_NOT_NULL}"/>
                </a:fields>
            </a:dataSet>
            <!-- 岗位 -->
            <a:dataSet id="hrm1021_position_query_ds"/>
            <a:dataSet id="hrm1021_position_result_ds" autoQuery="true" fetchAll="true" model="hrm.HRM1021.hrm_position" queryDataSet="hrm1021_position_query_ds" queryUrl="${/request/@context_path}/autocrud/hrm.HRM1021.hrm_position/query?company_id=${/parameter/@company_id}"/>
            <!-- 采购组织 -->
            <a:dataSet id="hrm1021_pur_organization_query_ds"/>
            <a:dataSet id="hrm1021_pur_organization_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_pur_organization" queryDataSet="hrm1021_pur_organization_query_ds" selectable="true">
                <a:fields>
                    <a:field name="pur_organization_code" required="true"/>
                    <a:field name="description" required="true"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
            <!-- 采购员 -->
            <a:dataSet id="hrm1021_pur_buyer_query_ds"/>
            <a:dataSet id="hrm1021_pur_buyer_result_ds" autoCount="true" autoPageSize="true" autoQuery="true" model="hrm.HRM1021.hrm_pur_buyers" queryDataSet="hrm1021_pur_buyer_query_ds" selectable="true">
                <a:fields>
                    <a:field name="buyer_name" required="true"/>
                    <a:field name="data_source" defaultValue="SRM"/>
                    <a:field name="enabled_flag" checkedValue="Y" defaultValue="Y" uncheckedValue="N"/>
                    <a:field name="user_name" autoComplete="true" autoCompleteField="user_id_name" autoCompleteSize="2" lovGridHeight="340" lovHeight="480" lovService="pur.PUR1310.pur_buyers_user_lov" lovWidth="520" title="PUR_BUYERS.APPOINT_USER">
                        <a:mapping>
                            <a:map from="user_name" to="user_name"/>
                            <a:map from="user_id" to="user_id"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <!-- div树结构 -->
        <div style="float: left;width:400px;margin-top:30px;margin-left:-20px;">
            <!-- 此处div暂占位隐藏 -->
            <div style="float: left;margin-top: 21px;margin-right: -51px;visibility:hidden;">
                <div style="width: 121px;height: 2px;background: #63B8FF;margin-top: 126px;margin-left:78px"/>
                <div style="width: 2px;height: 42px;background:#63B8FF;margin-left: 78px;"/>
                <div id="hrm1021_unit" onclick="hrm1021_unit()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;margin-left: 27px;"><![CDATA[${l:HRM.HRM_UNIT}(${/model/hrm1021_structure_counts/record/@hrm_unit_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 78px;"/>
                <div id="hrm1021_position" onclick="hrm1021_position()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;margin-left: 27px;"><![CDATA[${l:HRM.HRM_POSITION}(${/model/hrm1021_structure_counts/record/@hrm_position_count})]]></div>
            </div>
            <div style="float: left;">
                <div id="hrm1021_business_group" onclick="business_group()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background:#63B8FF;color:white;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:HRM.FND_BUSINESS_GROUP}]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 51px;"/>
                <div id="hrm1021_company" onclick="hrm1021_company()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:FND_COMPANIES.COMPAMY}(${/model/hrm1021_structure_counts/record/@company_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 51px;"/>
                <div id="hrm1021_business_unit" onclick="hrm1021_business_unit()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:FND_BUSINESS_UNITS.BUSINESS_UNIT}(${/model/hrm1021_structure_counts/record/@business_unit_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 51px;"/>
                <div id="hrm1021_inv_organization" onclick="hrm1021_inv_organization()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:INV_ORGANIZATIONS.INV_ORGANIZATION}(${/model/hrm1021_structure_counts/record/@inv_org_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 51px;"/>
                <div id="hrm1021_inv_warehouse" onclick="hrm1021_inv_warehouse()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:INV_WAREHOUSES.INV_WAREHOUSE}(${/model/hrm1021_structure_counts/record/@inv_warehouse_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 51px;"/>
                <div id="hrm1021_inv_location" onclick="hrm1021_inv_location()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;"><![CDATA[${l:INV_LOCATIONS.INV_LOCATION}(${/model/hrm1021_structure_counts/record/@inv_location_count})]]></div>
            </div>
            <div style="float: left;margin-top: 64px;margin-left:-10px;">
                <div style="width: 121px;height: 2px;background: #63B8FF;margin-left: -41px;;"/>
                <div style="width: 2px;height: 42px;background:#63B8FF;margin-left: 78px;"/>
                <div id="hrm1021_pur_organization" onclick="hrm1021_pur_organization()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;margin-left: 27px;"><![CDATA[${l:PUR_ORGANIZATIONS.PUR_ORGANIZATION}(${/model/hrm1021_structure_counts/record/@pur_org_count})]]></div>
                <div style="width: 2px;height: 40px;background:#63B8FF;margin-left: 78px;"/>
                <div id="hrm1021_pur_buyer" onclick="hrm1021_pur_buyer()" style="width: 100px;height: 40px;border:2px solid #63B8FF;background-color:#f4f4f4;color:#63B8FF;line-height:40px;text-align: center;font-size: 10;margin-left: 27px;"><![CDATA[${l:HRM.PUR_BUYER}(${/model/hrm1021_structure_counts/record/@pur_buyer_count})]]></div>
            </div>
        </div>
        <!-- 集团 -->
        <div id="hrm1021_business_group_div" style="float: left;margin-top:15px;">
            <a:hBox>
                <a:textField name="business_group_code" bindTarget="hrm1021_business_group_result_ds" prompt="HRM.FND_BUSINESS_GROUP_CODE" width="200"/>
            </a:hBox>
            <a:hBox>
                <a:textField name="business_group_name" bindTarget="hrm1021_business_group_result_ds" prompt="HRM.FND_BUSINESS_GROUP_NAME" width="200"/>
            </a:hBox>
        </div>
        <!-- 公司 -->
        <div id="hrm1021_company_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_companies_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_companies_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm id="hrm1021_companies_query_form" bindTarget="hrm1021_companies_query_ds" defaultQueryField="company_code_name" defaultQueryHint="HRM.FND_COMPANY_CODE_NAME" resultTarget="hrm1021_companies_result_ds" style="width:100%;border:none;margin-top:10px;"/>
            <a:grid id="hrm1021_companies_result_ds_grid" autoAppend="false" bindTarget="hrm1021_companies_result_ds" marginHeight="180" marginWidth="450" navBar="true" width="870">
                <a:columns>
                    <!-- <a:column name="company_supplier_entering" align="center" prompt="FND9220.COMPANY_SUPPLIER_ENTERING" renderer="hrm1021_companiesResultDsGridRenderer" width="80"/> -->
                    <a:column name="company_code" align="center" prompt="FND_COMPANIES.COMPANY_CODE" renderer="hrm1021_companiesResultDsGridRenderer" width="90"/>
                    <a:column name="company_short_name" align="left" editor="hrm1021_companies_result_ds_grid_tf" prompt="FND_COMPANIES.COMPANY_SHORT_NAME" width="100"/>
                    <a:column name="company_full_name" align="left" editor="hrm1021_companies_result_ds_grid_tf" prompt="FND_COMPANIES.COMPANY_FULL_NAME" width="180"/>
                    <a:column name="enabled_flag" align="center" editor="hrm1021_companies_result_ds_grid_cb" prompt="HRM.ENABLED_FLAG" width="40"/>
                    <a:column name="email" prompt="HRM.COMPANY_EMAIL" width="90"/>
                    <a:column name="default_user_name" align="center" prompt="HRM.COMPANY_DEFAULT_USER_NAME" width="70"/>
                    <a:column name="assignUnit" align="center" prompt="HRM.ASSIGN_UNIT" renderer="hrm1021_companiesResultDsGridRenderer" width="80"/>
                    <a:column name="assignPurOrg" align="center" prompt="HRM.ASSIGN_PUR_ORG" renderer="hrm1021_companiesResultDsGridRenderer" width="80"/>
                </a:columns>
                <a:editors>
                    <a:checkBox id="hrm1021_companies_result_ds_grid_cb"/>
                    <a:textField id="hrm1021_companies_result_ds_grid_tf"/>
                </a:editors>
            </a:grid>
        </div>
        <!-- 业务实体 -->
        <div id="hrm1021_business_unit_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_business_unit_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_business_unit_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_business_unit_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_business_unit_query_ds" resultTarget="hrm1021_business_unit_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="business_unit_code" bindTarget="hrm1021_business_unit_query_ds" prompt="HRM.BU_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_businessUnitQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="business_unit_name" bindTarget="hrm1021_business_unit_query_ds" prompt="HRM.BU_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_businessUnitQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:comboBox name="company_name" bindTarget="hrm1021_business_unit_query_ds" prompt="FND_COMPANIES.COMPAMY">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_businessUnitQueryFunction"/>
                        </a:events>
                    </a:comboBox>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_business_unit_result_ds_grid" bindTarget="hrm1021_business_unit_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="display_code" editor="hrm1021_business_unit_grid_displayCode" prompt="HRM.DISPLAY_CODE" width="100"/>
                    <a:column name="business_unit_code" prompt="HRM.PLATFORM_CODE" width="100"/>
                    <a:column name="business_unit_name" editorFunction="hrm1021_businessUnitEditFunction" prompt="HRM.BU_NAME" width="140"/>
                    <a:column name="company_name" editor="hrm1021_business_unit_grid_companyName" prompt="FND_COMPANIES.COMPAMY" width="140"/>
                    <a:column name="enabled_flag" editor="hrm1021_business_unit_grid_enbaledFlag" prompt="HRM.ENABLED_FLAG" width="60"/>
                    <a:column name="comments" editor="hrm1021_business_unit_grid_comments" prompt="HRM.NOTES" width="120"/>
                    <a:column prompt="HAP_OPERATION" renderer="hrm1021_vendorBuRelationFunction" width="80"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_business_unit_grid_displayCode"/>
                    <a:textField id="hrm1021_business_unit_grid_buDesc"/>
                    <a:checkBox id="hrm1021_business_unit_grid_enbaledFlag"/>
                    <a:comboBox id="hrm1021_business_unit_grid_companyName"/>
                    <a:textField id="hrm1021_business_unit_grid_comments"/>
                </a:editors>
            </a:grid>
        </div>
        <!-- 库存组织 -->
        <div id="hrm1021_inv_organization_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_inv_organization_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_inv_organization_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_inv_organization_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_inv_organization_query_ds" resultTarget="hrm1021_inv_organization_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="inv_organization_code" bindTarget="hrm1021_inv_organization_query_ds" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invOrganizationQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="inv_organization_name" bindTarget="hrm1021_inv_organization_query_ds" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invOrganizationQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:lov name="business_unit_name" bindTarget="hrm1021_inv_organization_query_ds" prompt="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invOrganizationQueryFunction"/>
                        </a:events>
                    </a:lov>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_inv_organization_result_ds_grid" bindTarget="hrm1021_inv_organization_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="inv_organization_code" editorFunction="hrm1021_invOrganizationEditFunction" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION_CODE" sortable="true" width="130"/>
                    <a:column name="inv_organization_name" editorFunction="hrm1021_invOrganizationEditFunction" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION_NAME" width="200"/>
                    <a:column name="business_unit_name" align="left" editor="hrm1021_inv_organization_grid_buLov" prompt="FND_BUSINESS_UNITS.BUSINESS_UNIT_NAME_ID" sortable="true" width="200"/>
                    <a:column name="data_source" align="left" prompt="HRM.DATA_SOURCE" width="60"/>
                    <a:column name="primary_flag" align="left" editor="hrm1021_inv_organization_grid_flag" prompt="HRM.PRIMARY_INV_ORG" sortable="true" width="60"/>
                    <a:column name="enabled_flag" align="left" editor="hrm1021_inv_organization_grid_flag" prompt="HRM.ENABLED_FLAG" sortable="true" width="60"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_inv_organization_grid_invOrgCode"/>
                    <a:textField id="hrm1021_inv_organization_grid_invOrgName"/>
                    <a:checkBox id="hrm1021_inv_organization_grid_flag"/>
                    <a:lov id="hrm1021_inv_organization_grid_buLov"/>
                </a:editors>
            </a:grid>
        </div>
        <!-- 库房 -->
        <div id="hrm1021_inv_warehouse_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_inv_warehouse_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_inv_warehouse_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_inv_warehouse_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_inv_warehouse_query_ds" resultTarget="hrm1021_inv_warehouse_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="warehouse_code" bindTarget="hrm1021_inv_warehouse_query_ds" prompt="INV_WAREHOUSES.WAREHOUSE_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invWarehouseQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="warehouse_name" bindTarget="hrm1021_inv_warehouse_query_ds" prompt="INV_WAREHOUSES.WAREHOUSE_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invWarehouseQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:lov name="business_unit_name" bindTarget="hrm1021_inv_warehouse_query_ds" prompt="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invWarehouseQueryFunction"/>
                        </a:events>
                    </a:lov>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_inv_warehouse_result_ds_grid" bindTarget="hrm1021_inv_warehouse_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="warehouse_code" editorFunction="hrm1021_invWarehouseEditFunction" prompt="INV_WAREHOUSES.WAREHOUSE_CODE" width="100"/>
                    <a:column name="warehouse_name" editorFunction="hrm1021_invWarehouseEditFunction" prompt="INV_WAREHOUSES.WAREHOUSE_NAME" width="150"/>
                    <a:column name="inv_organization_name" editorFunction="hrm1021_invWarehouseEditFunction" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION_NAME" width="150"/>
                    <a:column name="business_unit_name" align="left" prompt="HRM.BU_NAME" width="150"/>
                    <a:column name="data_source" align="left" prompt="HRM.DATA_SOURCE" width="60"/>
                    <a:column name="enabled_flag" align="left" editor="hrm1021_inv_warehouse_grid_flag" prompt="HRM.ENABLED_FLAG" width="60"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_inv_warehouse_grid_invWarehouseCode"/>
                    <a:textField id="hrm1021_inv_warehouse_grid_invWarehouseName"/>
                    <a:checkBox id="hrm1021_inv_warehouse_grid_flag"/>
                    <a:lov id="hrm1021_inv_organization_grid_invOrgLov"/>
                </a:editors>
            </a:grid>
        </div>
        <div id="hrm1021_inv_location_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_inv_location_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_inv_location_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_inv_location_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_inv_location_query_ds" resultTarget="hrm1021_inv_location_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="location_code" bindTarget="hrm1021_inv_location_query_ds" prompt="INV_LOCATIONS.LOCATION_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invLocationQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="location_name" bindTarget="hrm1021_inv_location_query_ds" prompt="INV_LOCATIONS.LOCATION_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invLocationQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:lov name="business_unit_name" bindTarget="hrm1021_inv_location_query_ds" prompt="FND_BUSINESS_UNITS.BUSINESS_UNIT">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_invLocationQueryFunction"/>
                        </a:events>
                    </a:lov>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_inv_location_result_ds_grid" bindTarget="hrm1021_inv_location_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="location_code" align="left" editorFunction="hrm1021_invLocationhouseEditFunction" prompt="INV_LOCATIONS.LOCATION_CODE" width="100"/>
                    <a:column name="location_name" align="left" editorFunction="hrm1021_invLocationhouseEditFunction" prompt="INV_LOCATIONS.LOCATION_NAME" width="120"/>
                    <a:column name="warehouse_code_name" align="left" editorFunction="hrm1021_invLocationhouseEditFunction" prompt="INV_WAREHOUSES.INV_WAREHOUSE" width="120"/>
                    <a:column name="inv_organization_name" align="left" prompt="INV_ORGANIZATIONS.INV_ORGANIZATION" width="150"/>
                    <a:column name="business_unit_name" align="left" editor="hrm1021_inv_location_grid_invWarehouseLov" prompt="HRM.BU_NAME" width="150"/>
                    <a:column name="data_source" align="left" prompt="HRM.DATA_SOURCE" width="60"/>
                    <a:column name="enabled_flag" align="left" editor="hrm1021_inv_location_grid_flag" prompt="HRM.ENABLED_FLAG" width="60"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_inv_location_grid_invLocationCode"/>
                    <a:textField id="hrm1021_inv_location_grid_invLocationName"/>
                    <a:checkBox id="hrm1021_inv_location_grid_flag"/>
                    <a:lov id="hrm1021_inv_location_grid_invWarehouseLov"/>
                </a:editors>
            </a:grid>
        </div>
        <!-- 部门 -->
        <div id="hrm1021_unit_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton click="hrm1020_createRootUnit" text="HR_UNIT.CREATE_UNIT" width="100"/>
                <a:gridButton click="hrm1020_saveUnit" text="HAP_SAVE" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_unit_query_ds" resultTarget="hrm1021_unit_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="unit_code" bindTarget="hrm1021_unit_query_ds" prompt="HRM.HRM_UNIT_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_unitQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="unit_desc" bindTarget="hrm1021_unit_query_ds" prompt="HRM.HRM_UNIT_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_unitQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:comboBox name="company_name" bindTarget="hrm1021_unit_query_ds" prompt="FND_COMPANIES.COMPANY">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_unitQueryFunction"/>
                        </a:events>
                    </a:comboBox>
                </a:formToolBar>
            </a:queryForm>
            <a:treeGrid id="hrm1021_unit_result_ds_grid" bindTarget="hrm1021_unit_result_ds" expandField="expand_flag" height="400" idField="unit_id" navBar="false" parentField="parent_unit_id" width="700">
                <a:columns>
                    <a:column name="unit_code" align="center" prompt="HRM.HRM_UNIT_CODE" width="190"/>
                    <a:column name="sequence" align="center" prompt="HRM.SORT_NUM" width="50"/>
                    <a:column name="unit_desc" align="left" prompt="HRM.HRM_UNIT_NAME" width="180"/>
                    <a:column name="operation" prompt="HAP_OPERATION">
                        <a:column name="addChird" align="center" width="50"/>
                        <a:column name="removeUnit" align="center" width="40"/>
                    </a:column>
                    <a:column name="assignPosition" align="center" prompt="HRM.ASSIGN_POSITION" width="80"/>
                    <a:column name="assignInvOrg" align="center" prompt="HRM.ASSIGN_INV_ORG" width="80"/>
                </a:columns>
            </a:treeGrid>
        </div>
        <div id="hrm1021_position_div" style="display:none;float: left;">
            <a:treeGrid id="hrm1021_position_result_ds_grid" bindTarget="hrm1021_position_result_ds" expandField="expand_flag" height="400" idField="position_id" navBar="false" parentField="parent_position_id" width="700">
                <a:columns>
                    <a:column name="position_code" align="center" prompt="HRM.HRM_POSITION_CODE" width="240"/>
                    <a:column name="sequence" align="center" prompt="HRM.SORT_NUM" width="50"/>
                    <a:column name="position_desc" align="left" prompt="HRM.HRM_POSITION_CODE" width="200"/>
                    <a:column name="operation" prompt="HAP_OPERATION">
                        <a:column name="addChird" align="center" width="50"/>
                        <a:column name="removePosition" align="center" width="40"/>
                    </a:column>
                    <a:column name="assignemployee" align="left" prompt="HRM.ASSIGN_EMPLOYEE" width="80"/>
                </a:columns>
            </a:treeGrid>
        </div>
        <!-- 采购组织 -->
        <div id="hrm1021_pur_organization_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_pur_organization_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_pur_organization_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_pur_organization_result_ds_grid" type="clear" width="100"/>
                <!-- <a:toolbarButton click="hrm1021_allocateAllInvOrg" text="分配至所有库存组织" width="100"/> -->
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_pur_organization_query_ds" resultTarget="hrm1021_pur_organization_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="pur_organization_code" bindTarget="hrm1021_pur_organization_query_ds" prompt="PUR_ORGANIZATIONS.PUR_ORG_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_purOrganizationQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="description" bindTarget="hrm1021_pur_organization_query_ds" prompt="PUR_ORGANIZATIONS.PUR_ORG_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_purOrganizationQueryFunction"/>
                        </a:events>
                    </a:textField>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_pur_organization_result_ds_grid" bindTarget="hrm1021_pur_organization_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="pur_organization_code" editorFunction="hrm1021_purOrganizationEditFunction" prompt="PUR_ORGANIZATIONS.PUR_ORG_CODE" width="180"/>
                    <a:column name="description" editor="hrm1021_pur_organization_grid_purOrgName" prompt="PUR_ORGANIZATIONS.PUR_ORG_NAME" width="180"/>
                    <a:column name="enabled_flag" editor="hrm1021_pur_organization_grid_flag" prompt="HRM.ENABLED_FLAG" width="60"/>
                    <a:column name="org_renderer" align="center" prompt="HRM.ASSIGN_INV_ORG" renderer="hrm1021_allocateInvOrg" width="100"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_pur_organization_grid_purOrgCode"/>
                    <a:textField id="hrm1021_pur_organization_grid_purOrgName"/>
                    <a:checkBox id="hrm1021_pur_organization_grid_flag"/>
                </a:editors>
            </a:grid>
        </div>
        <!-- 采购员 -->
        <div id="hrm1021_pur_buyer_div" style="display:none;float: left;margin-top:15px;">
            <a:screenTopToolbar>
                <a:gridButton bind="hrm1021_pur_buyer_result_ds_grid" type="add" width="100"/>
                <a:gridButton bind="hrm1021_pur_buyer_result_ds_grid" type="save" width="100"/>
                <a:gridButton bind="hrm1021_pur_buyer_result_ds_grid" type="clear" width="100"/>
            </a:screenTopToolbar>
            <a:queryForm bindTarget="hrm1021_pur_buyer_query_ds" resultTarget="hrm1021_pur_buyer_result_ds" style="width:100%;border:none;margin-top:10px;">
                <a:formToolBar>
                    <a:textField name="display_code" bindTarget="hrm1021_pur_buyer_query_ds" prompt="HRM.DISPLAY_CODE">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_purBuyerQueryFunction"/>
                        </a:events>
                    </a:textField>
                    <a:textField name="buyer_name" bindTarget="hrm1021_pur_buyer_query_ds" prompt="PUR_BUYERS.BUYER_NAME">
                        <a:events>
                            <a:event name="enterdown" handler="hrm1021_purBuyerQueryFunction"/>
                        </a:events>
                    </a:textField>
                </a:formToolBar>
            </a:queryForm>
            <a:grid id="hrm1021_pur_buyer_result_ds_grid" bindTarget="hrm1021_pur_buyer_result_ds" marginHeight="180" marginWidth="450" navBar="true">
                <a:columns>
                    <a:column name="display_code" align="center" editor="hrm1021_pur_buyer_grid_purBuyerCode" prompt="HRM.DISPLAY_CODE" sortable="true" width="80"/>
                    <a:column name="buyer_code" align="center" prompt="HRM.PLATFORM_CODE" sortable="true" width="150"/>
                    <a:column name="buyer_name" align="center" editorFunction="hrm1021_buyerEditFunction" prompt="PUR_BUYERS.BUYER_NAME" width="150"/>
                    <a:column name="contact_information" align="center" prompt="PUR_REQUISITION_LNS.CONTACT_WAY" width="100"/>
                    <a:column name="user_name" align="center" editor="hrm1021_pur_buyer_grid_userNameLov" prompt="PUR_BUYERS.APPOINT_USER" width="150"/>
                    <a:column name="enabled_flag" align="center" editor="hrm1021_pur_buyer_grid_flag" prompt="HRM.ENABLED_FLAG"/>
                </a:columns>
                <a:editors>
                    <a:textField id="hrm1021_pur_buyer_grid_purBuyerCode"/>
                    <a:textField id="hrm1021_pur_buyer_grid_purBuyerName"/>
                    <a:lov id="hrm1021_pur_buyer_grid_userNameLov"/>
                    <a:checkBox id="hrm1021_pur_buyer_grid_flag"/>
                </a:editors>
            </a:grid>
        </div>
    </a:view>
</a:screen>
