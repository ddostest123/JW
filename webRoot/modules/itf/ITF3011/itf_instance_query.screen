<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author:  wangcheng
    $Date: 2015-06-25 下午2:16:47 
    $Revision: 1.0
    $Purpose: 接口实例查询
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <!--     <a:init-procedure>
    	<a:model-query fetchAll="false" autoCount="true" queryOrderBy="ii.itf_interface_id desc" model="itf.ITF3010.itf_instance_all_of_client_query"/>
    </a:init-procedure> -->
    <a:view package="aurora.ui.std" template="default">
        <!--                 <a:link id="itf3010_instance_standard_link" url="${/request/@context_path}/modules/itf/public/itf_instance_standard_view.screen"/>
        <a:link id="itf3010_instance_custom_link" url="${/request/@context_path}/modules/itf/public/itf_instance_standard_view.screen"/>
        <a:link id="itf3010_transaction_list_link" url="${/request/@context_path}/modules/itf/public/itf_transaction_list.screen"/> -->
        <a:link id="itf3010_itf_execute_link" model="itf.ITF3010.itf_execute" modelaction="execute"/>
        <a:link id="itf3010_itf_ignore_instance" model="itf.ITF3010.itf_ignore_instance" modelaction="execute"/>
        <a:link id="itf3010_itf_cancel_ignore_instance" model="itf.ITF3010.itf_cancel_ignore_instance" modelaction="execute"/>
        <a:link id="itf3010_instance_details_link" url="${/request/@context_path}/modules/itf/ITF3010/itf_instance_details.screen"/>
        <a:link id="itf3010_itf_standard_storages_link" url="${/request/@context_path}/modules/itf/ITF3010/itf_standard_storages.screen"/>
        <a:link id="itf3010_pur_po_header_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_po_header_itf.screen"/>
        <a:link id="itf3010_pur_rcv_trx_header_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_rcv_trx_header_itf.screen"/>
        <a:link id="itf3010_inv_trx_headers_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_trx_headers_itf.screen"/>
        <a:link id="itf3010_inv_onhand_quantities_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_onhand_quantities_itf.screen"/>
        <a:link id="itf3010_pur_vendor_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_vendor_interface.screen"/>
        <a:link id="itf3010_pur_vendor_site_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_vendor_site_itf.screen"/>
        <a:link id="itf3010_pur_vendor_contact_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_vendor_contact_itf.screen"/>
        <a:link id="itf3010_pur_po_location_direct_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_po_location_direct_itf.screen"/>
        <a:link id="itf3010_pur_po_asl_list_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_po_asl_list_itf.screen"/>
        <a:link id="itf3010_erp_ap_invoice_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/erp_ap_invoice_header_itf.screen"/>
        <a:link id="itf3010_erp_ap_payment_checks_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/erp_ap_payment_checks_itf.screen"/>
        <a:link id="itf3010_inv_asn_pur_itf_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_pur_imp_hd_itf.screen"/>
        <a:link id="itf3010_inv_asn_pur_feedback_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_pur_feedback_itf.screen"/>
        <a:link id="itf3010_inv_asn_cancel_feedback_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_cancel_feedback_itf.screen"/>
        <a:link id="itf3010_inv_asn_purchase_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_purchase_header_itf.screen"/>
        <a:link id="itf3010_inv_asn_pur_cancel_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_pur_cancel_itf.screen"/>
        <a:link id="itf3010_ws_request_compare_link" url="${/request/@context_path}/modules/itf/ITF3010/ws_request_compare_info_itf.screen"/>
        <a:link id="itf3010_fnd_tax_type_link" url="${/request/@context_path}/modules/itf/ITF3010/fnd_tax_type_itf.screen"/>
        <a:link id="itf3010_pur_po_header_rls_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_po_header_rls_itf.screen"/>
        <a:link id="itf3010_inv_asn_supply_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_asn_supply_header_itf.screen"/>
        <a:link id="itf3010_pur_po_header_erp_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_po_header_erp_itf.screen"/>
        <a:link id="itf3010_pur_trx_header_agent_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_trx_header_agent_itf.screen"/>
        <a:link id="itf3010_fnd_business_units_link" url="${/request/@context_path}/modules/itf/ITF3010/fnd_business_units_itf.screen"/>
        <a:link id="itf3010_inv_organizations_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_organizations_itf.screen"/>
        <a:link id="itf3010_inv_warehouses_units_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_warehouses_itf.screen"/>
        <a:link id="itf3010_inv_locations_link" url="${/request/@context_path}/modules/itf/ITF3010/inv_locations_itf.screen"/>
        <a:link id="itf3010_pur_buyers_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_buyers_itf.screen"/>
        <a:link id="itf3010_fnd_uom_classes_link" url="${/request/@context_path}/modules/itf/ITF3010/fnd_uom_classes_itf.screen"/>
        <a:link id="itf3010_fnd_uom_codes_link" url="${/request/@context_path}/modules/itf/ITF3010/fnd_uom_codes_itf.screen"/>
        <a:link id="itf3010_mtl_system_items_units_link" url="${/request/@context_path}/modules/itf/ITF3010/mtl_system_items_itf.screen"/>
        <a:link id="itf3010_fnd_locations_link" url="${/request/@context_path}/modules/itf/ITF3010/fnd_locations_itf.screen"/>
        <a:link id="itf3010_pur_organizations_link" url="${/request/@context_path}/modules/itf/ITF3010/pur_organizations_itf.screen"/>
        <a:link id="itf3010_ap_invoice_exp_link" url="${/request/@context_path}/modules/itf/ITF3010/erp_ap_invoice_hd_exp_itf.screen"/>
        <a:link id="itf3010_ap_invoice_exp_fd_link" url="${/request/@context_path}/modules/itf/ITF3010/erp_ap_invoice_exp_feedback_itf.screen"/>
        <a:link id="itf3010_dz_inv_notice_import_link" url="${/request/@context_path}/modules/itf/ITF3010/dz_inv_arrival_notices_itf.screen"/>
        <a:link id="itf3010_wz_pur_po_header_link" url="${/request/@context_path}/modules/itf/ITF3010/wz_pur_po_header_itf.screen"/>
        <div/>
        <script><![CDATA[
            var itf3010_tree_div = [];
            var c_parameter = '';
            //查询
            
            function itf3010_interfacesQuery() {
                $('itf3010_instance_result_ds').query();
            }
            
            //查看接口数据
            
            function itf3010_instances_link(value, record, name) {
                if (name == 'instance_details') {
                    if (!Aurora.isEmpty(record.get('itf_instance_id'))) {
                        return '<a href="javascript:itf3010_instance_details(' + record.get('itf_instance_id') + ');">${l:ITF_INTERFACES_QUERY.LOG}</a>';
                    }
                } else if (name == 'table_name') {
                    if (!Aurora.isEmpty(record.get('itf_instance_id')) && !Aurora.isEmpty(record.get('interface_table_name'))) {
                        return '<a href="javascript:itf3010_interface_data(' + record.get('itf_instance_id') + ',\'' + record.get('interface_code') + '\');">${l:ITF_INTERFACES_QUERY.INTERFACE_TABLE}</a>';
                    }
                } 
            }
            
            function itf3010_instance_details(itf_instance_id) {
                new Aurora.Window({
                    id: 'itf3010_instance_details_window',
                    title: '${l:ITF_INTERFACES_QUERY.LOG}',
                    url: $('itf3010_instance_details_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                    fullScreen: true
                });
            }
            
            function itf3010_interface_data(itf_instance_id, interface_code) {
                if (interface_code.toUpperCase() == 'PUR_PO_APPROVED') {
                    new Aurora.Window({
                        id: 'itf3010_pur_po_header_itf_window',
                        title: '${l:ITF_INTERFACES_QUERY.PURCHASE_ORDER_INTERFACE_DATA}',
                        url: $('itf3010_pur_po_header_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_RCV') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_rcv_trx_window',
                        title: '${l:ITF_INTERFACES_QUERY.PROCUREMENT_TRANSACTION_INTERFACE_DATA}',
                        url: $('itf3010_pur_rcv_trx_header_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_TRX_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_inv_trx_headers_window',
                        title: '${l:ITF_INTERFACES_QUERY.INVENTORY_TRANSACTION_INTERFACE_DATA}',
                        url: $('itf3010_inv_trx_headers_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ONHAND_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_inv_onhand_quantities_window',
                        title: '${l:ITF_INTERFACES_QUERY.INVENTORY_AVAILABLE_INTERFACE_DATA}',
                        url: $('itf3010_inv_onhand_quantities_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_VENDOR_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_vendor_window',
                        title: '${l:ITF_INTERFACES_QUERY.SUPPLIER_INTERFACE_DATA}',
                        url: $('itf3010_pur_vendor_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_VENDOR_SITE_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_vendor_site_window',
                        title: '${l:ITF_INTERFACES_QUERY.SUPPLIER_SITE_INTERFACE_DATA}',
                        url: $('itf3010_pur_vendor_site_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_VENDOR_CONTACT_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_vendor_contact_window',
                        title: '${l:ITF_INTERFACES_QUERY.VENDOR_CONTACT_INTERFACE_DATA}',
                        url: $('itf3010_pur_vendor_contact_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PO_LOC_CHG') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_po_location_direct_window',
                        title: '${l:ITF_INTERFACES_QUERY.UPDATE_THE_CONTACT_INTERFACE_DATA_FOR_THE_ORDER}',
                        url: $('itf3010_pur_po_location_direct_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_ASL_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_pur_po_asl_list_window',
                        title: '${l:ITF_INTERFACES_QUERY.APPROVED_VENDOR_LIST_INTERFACE_DATA}',
                        url: $('itf3010_pur_po_asl_list_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'ERP_AP_INVOICE_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_erp_ap_invoice_window',
                        title: '${l:ITF_INTERFACES_QUERY.ERP_INVOICE_INTERFACE_DATA}',
                        url: $('itf3010_erp_ap_invoice_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'ERP_AP_PAYMENT_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_erp_ap_payment_checks_window',
                        title: '${l:ITF_INTERFACES_QUERY.PAYMENT_INFORMATION_INTERFACE_DATA}',
                        url: $('itf3010_erp_ap_payment_checks_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_PUR_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_itf_inv_asn_pur_window',
                        title: '${l:ITF_INTERFACES_QUERY.ASN_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_pur_itf_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_PUR_FEEDBACK') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_pur_feedback_window',
                        title: '${l:ITF_INTERFACES_QUERY.ERP_FEEDBACK_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_pur_feedback_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_PUR_FD_ASSIST_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_pur_feedback_window',
                        title: '${l:ITF_INTERFACES_QUERY.ERP_FEEDBACK_AUXILIARY_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_pur_feedback_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_CANCEL_FEEDBACK_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_cancel_feedback_window',
                        title: '${l:ITF_INTERFACES_QUERY.DELIVERY_ORDER_CANCELLATION_FEEDBACK_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_cancel_feedback_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_CANCEL_FD_ASSIST_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_cancel_feedback_window',
                        title: '${l:ITF_INTERFACES_QUERY.DELIVERY_ORDER_CANCELLATION_FEEDBACK_AUXILIARY_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_cancel_feedback_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_EXPORT') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_purchase_window',
                        title: '${l:ITF_INTERFACES_QUERY.DELIVERY_LIST_TO_ERP_INTERFACE_DATA}',
                        url: $('itf3010_inv_asn_purchase_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_PUR_CANCEL_EXPORT') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_pur_cancel_window',
                        title: '${l:ITF_INTERFACES_QUERY.EXPORT_INTERFACE_DATA_FOR_SHIPPING}',
                        url: $('itf3010_inv_asn_pur_cancel_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'WS_BATCH_COMPARE') {
                    new Aurora.Window({
                        id: 'itf3010_ws_request_compare_window',
                        title: '${l:ITF_INTERFACES_QUERY.WS_REQUEST_BATCH_CONTRAST_INTERFACE_DATA}',
                        url: $('itf3010_ws_request_compare_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'TAX_TYPE_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_fnd_tax_type_window',
                        title: '${l:ITF_INTERFACES_QUERY.TAX_RATE_IMPORT_INTERFACE_DATA}',
                        url: $('itf3010_fnd_tax_type_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_PO_EXPORT') {
                    new Aurora.Window({
                        id: 'itf3010_pur_po_header_rls_window',
                        title: '${l:ITF_INTERFACES_QUERY.EXPORT_ORDERS_EXPORT_INTERFACE_DATA}',
                        url: $('itf3010_pur_po_header_rls_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ASN_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_inv_asn_supply_window',
                        title: '${l:ITF_INTERFACES_QUERY.IMPORT_INTERFACE_DATA_FOR_SHIPPING}',
                        url: $('itf3010_inv_asn_supply_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_PO_CLOUD_TO_PUR') {
                    new Aurora.Window({
                        id: 'itf3010_pur_po_header_erp_window',
                        title: '${l:ITF_INTERFACES_QUERY.DELIVERY_DATA}',
                        url: $('itf3010_pur_po_header_erp_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_RCV_TRX_AGENT_EXPORT') {
                    new Aurora.Window({
                        id: 'itf3010_pur_trx_header_agent_window',
                        title: '${l:ITF_INTERFACES_QUERY.PROXY_TRANSACTION_EXPORT_INTERFACE_DATA}',
                        url: $('itf3010_pur_trx_header_agent_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'BUSINESS_UNIT_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_fnd_business_units_window',
                        title: '${l:ITF_INTERFACES_QUERY.BUSINESS_ENTITY_INTERFACE_DATA}',
                        url: $('itf3010_fnd_business_units_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ORG_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_inv_organizations_window',
                        title: '${l:ITF_INTERFACES_QUERY.INVENTORY_DATA}',
                        url: $('itf3010_inv_organizations_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_WAREHOUSE_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_inv_warehouses_window',
                        title: '${l:ITF_INTERFACES_QUERY.WAREHOUSE_INTERFACE_DATA}',
                        url: $('itf3010_inv_warehouses_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_LOCATION_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_inv_locations_window',
                        title: '${l:ITF_INTERFACES_QUERY.STORAGE_LOCATION_INTERFACE_DATA}',
                        url: $('itf3010_inv_locations_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'UOM_CLASS_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_fnd_uom_classes_window',
                        title: '${l:ITF_INTERFACES_QUERY.UNIT_CLASS_INTERFACE_DATA}',
                        url: $('itf3010_fnd_uom_classes_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'UOM_CODE_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_fnd_uom_codes_window',
                        title: '${l:ITF_INTERFACES_QUERY.UNIT_INTERFACE_DATA}',
                        url: $('itf3010_fnd_uom_codes_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'INV_ITEM_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_mtl_system_items_window',
                        title: '${l:ITF_INTERFACES_QUERY.MATERIAL_INTERFACE_DATA}',
                        url: $('itf3010_mtl_system_items_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'FND_LOCATIONS_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_fnd_locations_window',
                        title: '${l:ITF_INTERFACES_QUERY.ADDRESS_INTERFACE_DATA}',
                        url: $('itf3010_fnd_locations_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_BUYER_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_pur_buyers_window',
                        title: '${l:ITF_INTERFACES_QUERY.BUYER_INTERFACE_DATA}',
                        url: $('itf3010_pur_buyers_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'PUR_ORG_IMP') {
                    new Aurora.Window({
                        id: 'itf3010_pur_organizations_window',
                        title: '${l:ITF_INTERFACES_QUERY.INVENTORY_DATA}',
                        url: $('itf3010_pur_organizations_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'ERP_AP_INVOICE_EXPORT') {
                    new Aurora.Window({
                        id: 'itf3010_ap_invoice_hd_exp_window',
                        title: '${l:ITF_INTERFACES_QUERY.EXPORT_INVOICE_HEADER_INTERFACE_DATA}',
                        url: $('itf3010_ap_invoice_exp_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'ERP_AP_INVOICE_FEEDBACK_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_ap_invoice_exp_fd_window',
                        title: '${l:ITF_INTERFACES_QUERY.EXPORT_FEEDBACK}',
                        url: $('itf3010_ap_invoice_exp_fd_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'CUX_DZ_INV_NOTICE_IMPORT') {
                    new Aurora.Window({
                        id: 'itf3010_dz_inv_notice_import_window',
                        title: '${l:ITF_INTERFACES_QUERY.DZ_INV_NOTICE_IMPORT}',
                        url: $('itf3010_dz_inv_notice_import_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else if (interface_code.toUpperCase() == 'CUX_WZ_PUR_PO') {
                    new Aurora.Window({
                        id: 'itf3010_wz_pur_po_header_window',
                        title: '五征订单接口查询',
                        url: $('itf3010_wz_pur_po_header_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                        fullScreen: true
                    });
                } else {
                    // new Aurora.Window({
                    // id: 'itf3010_itf_standard_storages_window',
                    // title: '通用杂项接口数据',
                    // url: $('itf3010_itf_standard_storages_link').getUrl() + '?itf_instance_id=' + itf_instance_id,
                    // fullScreen: true
                    // });
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.INTERFACE_TYPE_NO_RELEVANT_DATE}', function() {
                        return;
                    });
            
                }
            }
            
            function itf3010_treeGrid_renderer(value, record, name) {
                var index = $('itf3010_instance_query_parameter_ds').indexOf(record);
                var id = 'itf3010_' + index;
                itf3010_tree_div.push(id);
                return '<div id="' + id + '">' + value + '</div>';
            }
            
            function itf3010_set_query_null() {
                var query_ds;
                query_ds = $('itf3010_instance_query_ds').getAt(0);
                query_ds.set('need_confirm_flag', '');
                query_ds.set('running_error_flag', '');
                query_ds.set('business_error_flag', '');
                query_ds.set('master_error_flag', '');
                query_ds.set('ignored_flag', '');
                query_ds.set('error_flag', '');
            }
            
            function itf_3010_tree_click(grid, row, record) {
                var query_ds;
                var id;
                c_parameter = record.get('query_code');
                query_ds = $('itf3010_instance_query_ds').getAt(0);
                id = 'itf3010_' + $('itf3010_instance_query_parameter_ds').indexOf(record);
            
                //设置被选中div背景色为红色
                document.getElementById(id).style.color = "#FF0000";
            
                //设置未被选中的div背景色为黑色
                for (i = 0;i < itf3010_tree_div.length;i++) {
                    if (itf3010_tree_div[i] != id) {
                        document.getElementById(itf3010_tree_div[i]).style.color = "#000000";
                    }
                }
                //设置查询条件为空
                itf3010_set_query_null();
                if (record.get('query_code') == 'ALL') {
                    $('itf3010_execute_btn').disable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                if (record.get('query_code') == 'NEED_CONFIRM') {
                    query_ds.set('need_confirm_flag', 'Y');
                    query_ds.set('ignored_flag', 'N');
                    $('itf3010_execute_btn').disable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                if (record.get('query_code') == 'IGNORED') {
                    query_ds.set('ignored_flag', 'Y');
                    $('itf3010_execute_btn').disable();
                    $('itf3010_ignore_btn').disable();
                    $('itf3010_cancel_ignore_btn').enable();
                }
                if (record.get('query_code') == 'ERROR') {
                    query_ds.set('error_flag', 'Y');
                    query_ds.set('ignored_flag', 'N');
                    $('itf3010_execute_btn').enable();
                    $('itf3010_ignore_btn').enable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                if (record.get('query_code') == 'RUNNING_ERROR') {
                    query_ds.set('running_error_flag', 'Y');
                    query_ds.set('ignored_flag', 'N');
                    $('itf3010_execute_btn').enable();
                    $('itf3010_ignore_btn').enable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                if (record.get('query_code') == 'BUSINESS_ERROR') {
                    query_ds.set('business_error_flag', 'Y');
                    query_ds.set('ignored_flag', 'N');
                    $('itf3010_execute_btn').enable();
                    $('itf3010_ignore_btn').enable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                if (record.get('query_code') == 'MASTER_ERROR') {
                    query_ds.set('master_error_flag', 'Y');
                    query_ds.set('ignored_flag', 'N');
                    $('itf3010_execute_btn').enable();
                    $('itf3010_ignore_btn').enable();
                    $('itf3010_cancel_ignore_btn').disable();
                }
                $('itf3010_instance_result_ds').query();
            }
            
            function itf3010_execute_result(value, record, name) {
                var execute_result = record.get('data_execute_result');
                var execute_result_desc = record.get('data_execute_result_desc');
                if (execute_result == 'FAULT') {
                    return "<div style='background-color:#FF3333'>" + execute_result_desc + "</div>";
                } else if (execute_result == 'PART') {
                    return "<div style='background-color:#FFFF33'>" + execute_result_desc + "</div>";
                } else {
                    return execute_result_desc;
                }
            }
            
            function itf3010_instance_execute() {
                var records = $('itf3010_instance_result_ds').getSelected();
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.PLEASE_ONE}');
                    return;
                }
                var itf_instance_id = '';
                var error_type = '';
                if (c_parameter == 'RUNNING_ERROR') {
                    error_type = 'RUNNING_ERROR';
                }
                if (c_parameter == 'BUSINESS_ERROR') {
                    error_type = 'BUSINESS_ERROR';
                }
                if (c_parameter == 'MASTER_ERROR') {
                    error_type = 'MASTER_ERROR';
                }
                Aurora.showConfirm('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.CONFIRM_EXECUTION}', function() {
                    Aurora.Masker.mask(Ext.getBody(), '${l:ITF_INTERFACES_QUERY.EXECUTING}');
                    for (var i = 0;i < records.length;i++) {
                        itf_instance_id = records[i].get('itf_instance_id');
                        Aurora.request({
                            url: $('itf3010_itf_execute_link').getUrl(),
                            para: {
                                'itf_instance_id': itf_instance_id,
                                'error_type': error_type
                            },
                            scope: this,
                            sync: true
                        });
                    }
                    Aurora.Masker.unmask(Ext.getBody());
                    $('itf3010_instance_result_ds').query();
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.EXECUTE_SUCCESSFUL}');
                });
            }
            
            function itf3010_instance_ignore() {
                var records = $('itf3010_instance_result_ds').getSelected();
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.PLEASE_ONE}');
                    return;
                }
                var itf_instance_id = '';
                Aurora.showConfirm('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.SURE_TO_IGNORE}', function() {
                    Aurora.Masker.mask(Ext.getBody(), '${l:ITF_INTERFACES_QUERY.EXECUTING}');
                    for (var i = 0;i < records.length;i++) {
                        itf_instance_id = records[i].get('itf_instance_id');
                        Aurora.request({
                            url: $('itf3010_itf_ignore_instance').getUrl(),
                            para: {
                                'itf_instance_id': itf_instance_id
                            },
                            scope: this,
                            sync: true
                        });
                    }
                    Aurora.Masker.unmask(Ext.getBody());
                    $('itf3010_instance_result_ds').query();
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.EXECUTE_SUCCESSFUL}');
                });
            }
            
            function itf3010_cancel_instance_ignore() {
                var records = $('itf3010_instance_result_ds').getSelected();
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.PLEASE_ONE}');
                    return;
                }
                var itf_instance_id = '';
                Aurora.showConfirm('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.SURE_TO_CANCEL_IGNORE}', function() {
                    Aurora.Masker.mask(Ext.getBody(), '${l:ITF_INTERFACES_QUERY.EXECUTING}');
                    for (var i = 0;i < records.length;i++) {
                        itf_instance_id = records[i].get('itf_instance_id');
                        Aurora.request({
                            url: $('itf3010_itf_cancel_ignore_instance').getUrl(),
                            para: {
                                'itf_instance_id': itf_instance_id
                            },
                            scope: this,
                            sync: true
                        });
                    }
                    Aurora.Masker.unmask(Ext.getBody());
                    $('itf3010_instance_result_ds').query();
                    Aurora.showMessage('${l:PROMPT}', '${l:ITF_INTERFACES_QUERY.EXECUTE_SUCCESSFUL}');
                });
            }
        ]]></script>
        <a:dataSets>
            <!-- 状态 -->
            <a:dataSet id="itf3010_instance_status_ds" lookupCode="ITF_INSTANCE_STATUS"/>
            <!-- 动作 -->
            <a:dataSet id="itf3010_instance_action_ds" lookupCode="ITF_INSTANCE_ACTION"/>
            <!-- 执行结果状态 -->
            <a:dataSet id="itf3010_dat_execute_result_ds" lookupCode="ITF_DATA_EXECUTE_RESULT"/>
            <!-- 查询ds -->
            <a:dataSet id="itf3010_instance_query_parameter_ds" loadData="true" model="itf.ITF3010.itf_instances_query_parameter_tree"/>
            <a:dataSet id="itf3010_instance_query_ds" model="itf.ITF3010.itf_instance_all_of_client_query">
                <a:fields>
                    <a:field name="status_desc" displayField="code_value_name" options="itf3010_instance_status_ds" returnField="status" valueField="code_value"/>
                    <a:field name="action_desc" displayField="code_value_name" options="itf3010_instance_action_ds" returnField="action" valueField="code_value"/>
                    <a:field name="interface_category_id"/>
                    <a:field name="interface_category_code"/>
                    <a:field name="interface_category_desc" lovGridHeight="320" lovHeight="450" lovService="itf.ITF3010.itf_interface_categories_lov" lovWidth="500" title="ITF_INTERFACE_CATEGORIES.INTERFACE_CATEGORY">
                        <a:mapping>
                            <a:map from="interface_category_id" to="interface_category_id"/>
                            <a:map from="interface_category_code" to="interface_category_code"/>
                            <a:map from="interface_category_desc" to="interface_category_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="interface_desc" lovGridHeight="320" lovHeight="450" lovService="itf.ITF3010.itf_system_interface_lov" lovWidth="500" title="ITF_INTERFACE.INTERFACE">
                        <a:mapping>
                            <a:map from="interface_desc" to="interface_desc"/>
                            <a:map from="interface_id" to="interface_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="data_execute_result_desc" displayField="code_value_name" options="itf3010_dat_execute_result_ds" returnField="data_execute_result" valueField="code_value"/>
                    <a:field name="error_flag" defaultValue=""/>
                </a:fields>
            </a:dataSet>
            <!-- 结果ds -->
            <a:dataSet id="itf3010_instance_result_ds" autoCount="true" autoPageSize="true" model="itf.ITF3011.itf_instance_all_of_client_query" queryDataSet="itf3010_instance_query_ds" selectable="true">
                <a:fields>
                    <a:field name="finished_flag" checkedValue="Y" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:hBox>
                <a:vBox>
                    <a:treeGrid id="itf3010_instance_query_parameter_tree_grid" bindTarget="itf3010_instance_query_parameter_ds" expandField="expand" idField="query_code" marginHeight="92" parentField="parent_query_code" sequenceField="sequence" showCheckBox="false" width="200">
                        <a:columns>
                            <a:column name="query_name" align="left" prompt="STATUS" renderer="itf3010_treeGrid_renderer" width="180"/>
                        </a:columns>
                        <a:events>
                            <a:event name="rowclick" handler="itf_3010_tree_click"/>
                        </a:events>
                    </a:treeGrid>
                </a:vBox>
                <a:vBox>
                    <!-- <a:hBox style="margin-top:10px;margin-left:20px">
                        <a:toolbarButton id="itf3010_execute_btn" click="itf3010_instance_execute" text="实例执行" width="100"/>
                        <a:toolbarButton id="itf3010_ignore_btn" click="itf3010_instance_ignore" text="实例忽略" width="100"/>
                        <a:toolbarButton id="itf3010_cancel_ignore_btn" click="itf3010_cancel_instance_ignore" text="取消忽略" width="100"/>
                    </a:hBox> -->
                    <a:queryForm bindTarget="itf3010_instance_query_ds" resultTarget="itf3010_instance_result_ds" style="width:100%;border:none">
                        <a:formToolBar>
                            <a:hBox labelWidth="100">
                                <a:lov name="interface_category_desc" bindTarget="itf3010_instance_query_ds" prompt="ITF_INTERFACE_CATEGORIES.INTERFACE_CATEGORY">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:lov>
                                <a:lov name="interface_desc" bindTarget="itf3010_instance_query_ds" prompt="ITF_INTERFACE.INTERFACE">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:lov>
                                <a:textField name="batch_num" bindTarget="itf3010_instance_query_ds" prompt="ITF_INTERFACES_QUERY.BATCH_NO">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:textField>
                            </a:hBox>
                        </a:formToolBar>
                        <a:formBody>
                            <a:hBox labelWidth="100">
                                <a:comboBox name="action_desc" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.ACTION">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:comboBox>
                                <a:textField name="lot_id" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.LOT_ID">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:textField>
                                <a:comboBox name="data_execute_result_desc" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.DATA_EXECUTE_RESULT">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:comboBox>
                                <a:comboBox name="status_desc" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.STATUS">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:comboBox>
                            </a:hBox>
                            <a:hBox labelWidth="100">
                                <a:dateTimePicker name="instance_start_time_from" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.INSTANCE_START_TIME_FROM">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:dateTimePicker>
                                <a:dateTimePicker name="instance_start_time_to" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.INSTANCE_START_TIME_TO">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:dateTimePicker>
                                <a:dateTimePicker name="instance_end_time_from" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.INSTANCE_END_TIME_FROM">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:dateTimePicker>
                                <a:dateTimePicker name="instance_end_time_to" bindTarget="itf3010_instance_query_ds" prompt="ITF_INSTANCES.INSTANCE_END_TIME_TO">
                                    <a:events>
                                        <a:event name="enterdown" handler="itf3010_interfacesQuery"/>
                                    </a:events>
                                </a:dateTimePicker>
                            </a:hBox>
                        </a:formBody>
                    </a:queryForm>
                    <a:grid id="itf3010_interfaces_result_grid" autoAppend="false" bindTarget="itf3010_instance_result_ds" marginHeight="150" marginWidth="294" navBar="true" style="margin-top:5px;">
                        <a:columns>
                            <a:column name="interface_desc" align="center" lock="true" prompt="ITF_INTERFACES.INTERFACE_DESC" sortable="true" width="80"/>
                            <a:column name="business_group" align="center" lock="true" prompt="ITF_INTERFACES_QUERY.BUSINESS_GROUP" sortable="true" width="60"/>
                            <a:column name="itf_instance_id" align="center" lock="true" prompt="ITF_INTERFACES_QUERY.EXAMPLE" sortable="true" width="60"/>
                            <a:column name="batch_num" align="center" lock="true" prompt="ITF_INTERFACES_QUERY.BATCH" sortable="true" width="60"/>
                            <a:column name="seg_num" align="center" prompt="ITF_INTERFACES_QUERY.SEGMENT" width="30"/>
                            <a:column name="status_desc" align="center" prompt="ITF_INTERFACES_QUERY.INSTANCE_STATE" sortable="true" width="50"/>
                            <a:column name="action_desc" align="center" prompt="ITF_INTERFACES_QUERY.INSTANCE_ACTION" sortable="true" width="50"/>
                            <a:column name="data_execute_result_desc" prompt="ITF_INTERFACES_QUERY.RESULT" renderer="itf3010_execute_result" sortable="true" width="70"/>
                            <a:column name="instance_start_time_desc" align="center" prompt="ITF_INSTANCES.INSTANCE_START_TIME" renderer="Aurora.formatDate" sortable="true" width="95"/>
                            <a:column name="instance_end_time_desc" align="center" prompt="ITF_INSTANCES.INSTANCE_END_TIME" renderer="Aurora.formatDate" sortable="true" width="95"/>
                            <a:column name="finished_flag" align="center" prompt="ITF_INSTANCES.FINISHED_FLAG" sortable="true" width="50"/>
                            <a:column name="instance_details" align="center" prompt="ITF_INTERFACES_QUERY.LOG" renderer="itf3010_instances_link" width="35"/>
                            <a:column name="table_name" align="center" prompt="ITF_INTERFACES_QUERY.INTERFACE_TABLE" renderer="itf3010_instances_link" width="45"/>
                        </a:columns>
                    </a:grid>
                </a:vBox>
            </a:hBox>
        </a:screenBody>
    </a:view>
</a:screen>
