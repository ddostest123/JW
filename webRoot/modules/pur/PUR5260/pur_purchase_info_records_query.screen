<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: IsaacF  
    $Date: 2013-6-28 下午3:10:34  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure>
        <a:model-query fetchAll="true" model="pur.public.pur_rfx_types_source" rootPath="pur5260_rfx_types_source"/>
    </a:init-procedure>
    <a:view>
        <a:link id="pur5260_rfx_details_link" url="${/request/@context_path}/modules/pur/PUR7110/pur_rfx_details.screen"/>
        <a:link id="pur5260_bid_details_link" url="${/request/@context_path}/modules/bid/BID7030/bid_entrustment_detail_include_expert.screen"/>
        <a:link id="pur5260_purchase_info_record_export_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_purchase_info_records_export.svc"/>
        <a:link id="pur5260_quote_info_record_export_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_quote_info_records_export.svc"/>
        <a:link id="pur5260_pur_req_info_record_export_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_req_info_records_export.svc"/>
        <a:link id="pur5260_purchase_info_record_write_link" model="pur.PUR5260.pur_write_purchase_info_records" modelaction="execute"/>
        <a:link id="pur5260_rfx_item_note_view_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_rfx_item_note_view.screen"/>
        <a:link id="pur5260_purchase_info_record_abandon_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_purchase_info_records_abandon.svc"/>
        <a:link id="pur5260_quote_info_record_abandon_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_quote_info_records_abandon.svc"/>
        <a:link id="pur5260_pur_req_record_abandon_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_req_records_abandon.svc"/>
        <a:link id="pur5260_rfxLadderQuotationView_link" url="${/request/@context_path}/modules/pur/SACPUR5210/pur_rfx_ladder_quotation_view.screen"/>
        <!-- added by zhenwei.yin -->
        <a:link id="pur5260_erpinv_export_link" url="${/request/@context_path}/modules/pur/PUR5260/pur_erpinv_records_export.svc"/>
        <script><![CDATA[
            function pur5260_source_document_rfx_detail(document_id) {
                new Aurora.Window({
                    url: $('pur5260_rfx_details_link').getUrl() + '?rfx_header_id=' + document_id,
                    title: '${l:MODULES/PUR/PUR7110/PUR_RFX_DETAILS.SCREEN.TITLE}',
                    id: 'pur71101_rfx_details_window',
                    fullScreen: true
                }).on('beforeclose', pur5260_purchase_info_record_query_fun);
            }
            
            function pur5260_source_document_bid_detail(document_id){
                new Aurora.Window({
                    url: $('pur5260_bid_details_link').getUrl() + '?entrustment_header_id=' + document_id,
                    title: '${l:MODULES/PUR/BID7030/PUR_BID_DETAILS.SCREEN.TITLE}',
                    id: 'pur71101_rfx_details_window',
                    fullScreen: true
                }).on('beforeclose', pur5260_purchase_info_record_query_fun);
            }
            
            function pur5260_purchase_info_record_query_fun() {
                $('pur5260_purchase_info_record_result_ds').query();
            }
            
            function pur5260_pur_req_record_query_fun() {
                $('pur5260_pur_req_record_result_ds').query();
            }
            
            function pur5260_ebs_quote_query_fun() {
                $('pur5260_ebs_quote_result_ds').query();
            }
            
            function pur5260_purchase_info_record_query_updateFun(ds, record, name, value, oldvalue) {
                if (name == 'item_category_desc') {
                    if (Aurora.isEmpty(value)) {
                        record.set('item_category_id', '');
                    }
                }
            }
  
  
            
            function pur5260_purchase_info_record_result_rendererFun(value, record, name) {
                if (name == 'exchange_rate') {
                    if(record.get('source_from') == 'BID' && record.get('currency_code') != 'CNY'){
                        if(value < 0){
                            record.set('exchange_rate',Aurora.formatNumber(value, 8));
                            value = 0 - value;
                        }
                        return Aurora.formatNumber(value, 8);
                    }else{
                        return Aurora.formatNumber(value, 8);
                    }
                } else if (name == 'document_number') {
                    var document_id = record.get('document_id');
                    if(record.get('source_from') == 'BID'){
                        return '<a href="javascript:pur5260_source_document_bid_detail(' + document_id + ')">' + value + '</a>';
                    }else{
                    	return '<a href="javascript:pur5260_source_document_rfx_detail(' + document_id + ')">' + value + '</a>';
                    }
                }            
	    }
	    
	    
	                
            function pur5260_purchase_info_record_result_loadFun(ds) {
                var records = ds.getAll();
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    var vendor_maintain_flag = record.get('vendor_maintain_flag');
                    if (vendor_maintain_flag == 'N') {
                        record.getField('vendor_name').setReadOnly(true);
                    }
            
                    var item_maintain_flag = record.get('item_maintain_flag');
                    if (item_maintain_flag == 'N') {
                        //record.getField('item_code').setReadOnly(true);
                    }
            
                    var export_status = record.get('export_status');
                    if (export_status == 'SUCCESSED') {
                        record.getField('info_type_desc').setReadOnly(true);
                    }
                }
            }
            
            //Export
            
            
            function pur5260_exportToErp_fun() {
                var records = $('pur5260_purchase_info_record_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    if (Ext.isEmpty(record.get('info_type_code'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5260.PLEASE_SELECT_THE_INFORMATION_CATEGORY}');
                        return false;
                    }
            
                    if (Ext.isEmpty(record.get('item_code'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5260.PLEASE_FILL_IN_THE_ITEM_CODE}');
                        return false;
                    }
            
                    if (Ext.isEmpty(record.get('vendor_id'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5130.PLEASE_CHOOSE_VENDOR}');
                        return false;
                    }
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.DO_YOU_CONFIRM_IMPORT}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_purchase_info_record_export_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_purchase_info_record_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            }
            
            function pur5260_recordWrite_fun() {
                Aurora.Masker.mask(Ext.getBody());
                Aurora.request({
                    url: $('pur5260_purchase_info_record_write_link').getUrl(),
                    para: {},
                    success: function(res) {
                        $('pur5260_purchase_info_record_result_ds').query();
                        $('pur5260_pur_req_record_result_ds').query();
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    failure: function(res) {
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    error: function(res) {
                        Aurora.Masker.unmask(Ext.getBody());
                    },
                    scope: this
                });
            }
            
            //放弃
            
            function pur5260_abandonInfoRecord_fun() {
                var records = $('pur5260_purchase_info_record_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.ARE_YOU_SURE_TO_GIVE_UP}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_purchase_info_record_abandon_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_purchase_info_record_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            }
            
            //Tree Click
            
            
            function pur5260_export_status_tree_clickFun(grid, row, record) {
                var query_rec = $('pur5260_purchase_info_record_query_ds').getAt(0);
                query_rec.set('export_status', record.get('export_status'));
                $('pur5260_purchase_info_record_result_ds').query();
            }
            
            function pur5260_req_export_status_tree_clickFun(grid, row, record) {
                var query_rec = $('pur5260_pur_req_record_query_ds').getAt(0);
                query_rec.set('export_status', record.get('export_status'));
                $('pur5260_pur_req_record_result_ds').query();
            }
            
            function pur5260_quote_export_status_tree_clickFun(grid, row, record) {
                var query_rec = $('pur5260_ebs_quote_query_ds').getAt(0);
                query_rec.set('export_status', record.get('export_status'));
                $('pur5260_ebs_quote_result_ds').query();
            }
            
            
            
            function pur5260_purchase_info_record_result_grid_cellclick(grid, row, name, record) {
                if (name == 'vendor_name') {
                    record.getField('vendor_name').setLovPara('coop_business_group', record.get('coop_business_group'));
                    record.getField('vendor_name').setLovPara('coop_company_id', record.get('coop_company_id'));
                }
            }
            
            function pur5260_purchaseInfoRecordEditorFunction(record, name) {
                var export_status = record.get('export_status');
                if (name == "pur_organization_name") {
                    if (export_status == 'FAILED' || export_status == 'NON' || export_status == 'INCOMPLETED') {
                        return 'pur5260_purchase_info_record_result_lov';
                    }
                }
            }
            
            function pur5260_purchase_info_record_result_nf(record, name) {
                var export_status = record.get('export_status');
                if (name == "price_batch_quantity") {
                    if (export_status == 'FAILED' || export_status == 'NON' || export_status == 'INCOMPLETED') {
                        return 'pur5260_purchase_info_record_result_nf';
                    }
                }
            }
            
            
            
            function pur52601_exportToErp_fun() {
                var records = $('pur5260_pur_req_record_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    if (Ext.isEmpty(record.get('info_type_code'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5260.PLEASE_SELECT_THE_INFORMATION_CATEGORY}');
                        return false;
                    }
            
                    if (Ext.isEmpty(record.get('item_code'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5260.PLEASE_FILL_IN_THE_ITEM_CODE}');
                        return false;
                    }
            
                    if (Ext.isEmpty(record.get('vendor_id'))) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PUR5130.PLEASE_CHOOSE_VENDOR}');
                        return false;
                    }
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.DO_YOU_CONFIRM_IMPORT}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_pur_req_info_record_export_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_pur_req_record_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            }
            
            //放弃
            
            function pur52601_abandonInfoRecord_fun() {
                var records = $('pur5260_pur_req_record_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.ARE_YOU_SURE_TO_GIVE_UP}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_pur_req_record_abandon_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_pur_req_record_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            }
            
            function pur5260_rfxLnItemsGridRenderer(value, record, name) {
                if (name == "item_note") {
                    if (!Aurora.isEmpty(value) && value.length > 20) {
                        return '<a href="javascript:pur5260_rfxLnItemsView()">' + value + '</a>';
                    } else if (!Aurora.isEmpty(value) && value.length <= 20) {
                        return '<div>' + value + '</div>';
                    } else {
                        return '';
                    }
                }
            }
            
            function pur5260_rfxLnItemsView() {
                new Aurora.Window({
                    url: $('pur5260_rfx_item_note_view_link').getUrl(),
                    title: '${l:SACPUR5210.VIEW_MATERIAL_DESCRIPTION}',
                    id: 'pur5260_rfx_item_note_view_link_window',
                    width: 500,
                    height: 400
                });
            }
            
            function pur52202_rfxLadderQuotationRenderViewFun(value, record, name) {
                if (name == 'ladder_quotation') {
                    if(record.get('source_from') == 'BID'){
                        return '';
                    }else{
                        return '<a href="javascript:pur5220_rfxLadderQuotationViewFunction(' + record.get('feedback_line_id') + ')">${l:SACPUR5210.LADDER_QUOTES}</a>';
                    }
                }
            }
            
            function pur5220_rfxLadderQuotationViewFunction(feedback_line_id) {
                new Aurora.Window({
                    url: $('pur5260_rfxLadderQuotationView_link').getUrl() + '?feedback_line_id=' + feedback_line_id,
                    title: '${l:SACPUR5210.LADDER_QUOTES}',
                    id: 'pur5220_rfxLadderQuotationView_window',
                    width: 500,
                    height: 300
                });
            }
            
            function pur_buyer_name_edit_fn(record, name) {
                var export_status = record.get('export_status');
                if (export_status == 'PLANNING' || export_status == 'SUCCESSED') {
                    return '';
                } else {
                    return 'pur5260_purchase_info_record_result_lov';
                }
            
            }
            
            function planned_delivery_date_edit_fn(record, name) {
                var export_status = record.get('export_status');
                if (export_status == 'PLANNING' || export_status == 'SUCCESSED') {
                    return '';
                } else {
                    return 'pur5260_purchase_info_record_result_nf2';
                }
            
            }
            
            function item_note_edit_fn(record, name) {
                var export_status = record.get('export_status');
                if (export_status == 'PLANNING' || export_status == 'SUCCESSED') {
                    return '';
                } else {
                    return 'pur5260_purchase_info_record_result_tf';
                }
            
            }
            
            function pur5260_exportToEbs_fun() {
            
                var records = $('pur5260_ebs_quote_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
            
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.DO_YOU_CONFIRM_IMPORT}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_quote_info_record_export_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_ebs_quote_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            
            }
            function pur5260_exportToEbs_Import_fun() {
            
                var records = $('pur5260_ebs_quote_be_import_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
            
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.DO_YOU_CONFIRM_IMPORT}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_quote_info_record_export_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_ebs_quote_be_import_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            
            }
            
            function pur5260_abandon_quote_fun() {
                var records = $('pur5260_ebs_quote_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '${l:PUR5260.ARE_YOU_SURE_TO_GIVE_UP}', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_quote_info_record_abandon_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_ebs_quote_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            }
            
            //added by zhenwei.yin
            function pur5260_erpinv_status_tree_clickFun(grid, row, record) {
                var query_rec = $('pur5260_erpinv_query_ds').getAt(0);
                query_rec.set('export_status', record.get('export_status'));
                $('pur5260_erpinv_result_ds').query();
            }
            //added by zhenwei.yin
            function pur5260_erpinv_query_fun() {
                $('pur5260_erpinv_result_ds').query();
            }
            //added by zhenwei.yin
            function pur5260_exportToErpinv_fun() {
            
                var records = $('pur5260_erpinv_result_ds').getSelected();
                var datas = [];
                if (records.length == 0) {
                    Aurora.showMessage('${l:PROMPT}', '${l:CHOOSE_ONE_RECORD}');
                    return;
                }
            
                for (var i = 0;i < records.length;i++) {
                    var record = records[i];
            
                    var data = records[i].data;
                    datas.push(data);
                }
            
                Aurora.showConfirm('${l:PROMPT}', '是否确认导入?', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('pur5260_erpinv_export_link').getUrl(),
                        para: datas,
                        success: function(res) {
                            $('pur5260_erpinv_result_ds').query();
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        error: function(res) {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                });
            
            }
                        
            //浮点数乘法
            
            function pur5240_accMul(arg1, arg2) {
                var m = 0,
                    s1 = arg1.toString(),
                    s2 = arg2.toString();
                try {
                    m += s1.split(".")[1].length;
                } catch (e) {}
                try {
                    m += s2.split(".")[1].length;
                } catch (e) {}
                return Number(s1.replace(".", "")) * Number(s2.replace(".", "")) / Math.pow(10, m);
            }
            
            function pur5260_purchase_info_record_result_updateFun(ds, record, name, value, oldvalue) {
            
                if (name == 'price_batch_quantity') {
                    if (isNaN(value)) {
                        record.set('batch_quantity_price', '');
                    } else {
                        record.set('batch_quantity_price', pur5240_accMul(value, record.get('unit_price')));
                    }
            
                }
            }
            
            function pur5260_purchase_info_record_result_fun(record,name){
                
                if(name == 'item_code'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_tf';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'exchange_rate'){
                    if(record.get('source_from') == 'BID' && record.get('currency_code') != 'CNY'){
                        return 'pur5260_purchase_info_record_result_nf';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'feedback_expiry_date_from'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_dp';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'feedback_expiry_date_to'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_dp';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'source_type_desc'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_cb';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'price_category_desc'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_cb';
                    }else{
                        return '';
                    }
                }
                
                if(name == 'min_package'){
                    if(record.get('source_from') == 'BID'){
                        return 'pur5260_purchase_info_record_result_nf';
                    }else{
                        return '';
                    }
                }
            }
            
        ]]></script>
        <a:dataSets>
            <!-- 导入接口状态-->
            <a:dataSet id="pur5260_export_status_list" loadData="true" model="pur.PUR5260.pur_purchase_info_record_status_tree_query"/>
            <!--信息类别-->
            <a:dataSet id="pur5260_info_record_type_list" lookupCode="PUR_INFO_RECORD_TYPE"/>
            <!-- 寻源类型 -->
            <a:dataSet id="ur5260_rfx_source_type_list" lookupCode="PUR_RFX_SOURCE_TYPE"/>
            <a:dataSet id="pur5260_price_category_ds" lookupCode="PUR_RFX_PRICE_CATEGORY"/>
            <a:dataSet id="pur5260_source_from_ds" lookupCode="PUR_PURCHASE_SOURCE_FROM"/>
            <a:dataSet id="pur5260_rfx_types_ds" autoCreate="true" loadData="true">
                <a:datas dataSource="/model/pur5260_rfx_types_source"/>
            </a:dataSet>
            <a:dataSet id="pur5260_purchase_info_record_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="PUR7130.OU_QUERY">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="510" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                    <a:field name="source_from_desc" displayField="code_value_name" options="pur5260_source_from_ds" returnField="source_from" valueField="code_value"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="pur5260_purchase_info_record_query_updateFun"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="pur5260_purchase_info_record_result_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_purchase_info_records_query" queryDataSet="pur5260_purchase_info_record_query_ds" selectable="true">
                <a:fields>
                    <a:field name="info_type_desc" displayField="code_value_name" options="pur5260_info_record_type_list" required="true" returnField="info_type_code" valueField="code_value"/>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" required="true" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_code" required="true"/>
                    <a:field name="pur_buyer_name" autoComplete="true" autoCompleteField="buyer_code" lovHeight="480" lovService="pur.PUR5260.pur_buyers_lov" lovWidth="500" title="PUR_PURCHASE_INFO_RECORDS.PUR_ORGANIZATION_NAME">
                        <a:mapping>
                            <a:map from="buyer_id" to="buyer_id"/>
                            <a:map from="buyer_code" to="pur_buyer_code"/>
                            <a:map from="description" to="pur_buyer_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="planned_delivery_date"/>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                    <a:field name="price_category_desc" displayField="code_value_name" options="pur5260_price_category_ds" returnField="price_category" valueField="code_value"/>
                    <a:field name="source_from_desc" displayField="code_value_name" options="pur5260_source_from_ds" returnField="source_from" valueField="code_value"/>
                </a:fields>
                <a:events>
                    <a:event name="load" handler="pur5260_purchase_info_record_result_loadFun"/>
                    <a:event name="update" handler="pur5260_purchase_info_record_result_updateFun"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="pur5260_pur_req_record_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="PUR7130.OU_QUERY">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="510" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_ebs_quote_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="PUR7130.OU_QUERY">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="rfx_type_desc" displayField="rfx_type_desc" options="pur5260_rfx_types_ds" returnField="rfx_type_id" valueField="rfx_type_id">
                        <a:mapping>
                            <a:map from="rfx_type_id" to="rfx_type_id"/>
                            <a:map from="rfx_type_desc" to="rfx_type_desc"/>
                            <a:map from="rfx_category" to="rfx_category"/>
                            <a:map from="rfx_category_desc" to="rfx_category_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovGridHeight="320" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="650" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_ebs_ImportSuccess_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="PUR7130.OU_QUERY">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="rfx_type_desc" displayField="rfx_type_desc" options="pur5260_rfx_types_ds" returnField="rfx_type_id" valueField="rfx_type_id">
                        <a:mapping>
                            <a:map from="rfx_type_id" to="rfx_type_id"/>
                            <a:map from="rfx_type_desc" to="rfx_type_desc"/>
                            <a:map from="rfx_category" to="rfx_category"/>
                            <a:map from="rfx_category_desc" to="rfx_category_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovGridHeight="320" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="650" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_ebs_quote_BeSuccess_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="PUR7130.OU_QUERY">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="rfx_type_desc" displayField="rfx_type_desc" options="pur5260_rfx_types_ds" returnField="rfx_type_id" valueField="rfx_type_id">
                        <a:mapping>
                            <a:map from="rfx_type_id" to="rfx_type_id"/>
                            <a:map from="rfx_type_desc" to="rfx_type_desc"/>
                            <a:map from="rfx_category" to="rfx_category"/>
                            <a:map from="rfx_category_desc" to="rfx_category_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovGridHeight="320" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="650" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_pur_req_record_result_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_req_info_records_query" queryDataSet="pur5260_pur_req_record_query_ds" selectable="true">
                <a:fields>
                    <a:field name="info_type_desc" displayField="code_value_name" options="pur5260_info_record_type_list" required="true" returnField="info_type_code" valueField="code_value"/>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="vendor_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" required="true" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_code" required="true"/>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_ebs_quote_be_import_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_rfx_results_BeImport" queryDataSet="pur5260_ebs_quote_BeSuccess_query_ds" selectable="true"/>
            <a:dataSet id="pur5260_ebs_quote_import_success_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_Import_success" queryDataSet="pur5260_ebs_ImportSuccess_query_ds" selectable="true"/>
            <a:dataSet id="pur5260_ebs_quote_result_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_rfx_results_quote" queryDataSet="pur5260_ebs_quote_query_ds" selectable="true">
                <a:fields>
                    <a:field name="info_type_desc" displayField="code_value_name" options="pur5260_info_record_type_list" required="true" returnField="info_type_code" valueField="code_value"/>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="vendor_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" required="true" title="PUR_VENDORS.VENDOR">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_code" required="true"/>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                </a:fields>
            </a:dataSet>
            <!-- added by zhenwei.yin  -->
            <a:dataSet id="pur5260_erpinv_export_status_list" loadData="true" model="pur.PUR5260.pur_erpinv_purchase_info_record_status_tree_query"/>
            <a:dataSet id="pur5260_erpinv_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="business_unit_name" autoComplete="true" autoCompleteField="business_unit_code_name" lovHeight="480" lovService="public.fnd_business_unit_lov" lovWidth="500" title="业务实体查询">
                        <a:mapping>
                            <a:map from="business_unit_id" to="business_unit_id"/>
                            <a:map from="business_unit_code" to="business_unit_code"/>
                            <a:map from="business_unit_name" to="business_unit_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="rfx_type_desc" displayField="rfx_type_desc" options="pur5260_rfx_types_ds" returnField="rfx_type_id" valueField="rfx_type_id">
                        <a:mapping>
                            <a:map from="rfx_type_id" to="rfx_type_id"/>
                            <a:map from="rfx_type_desc" to="rfx_type_desc"/>
                            <a:map from="rfx_category" to="rfx_category"/>
                            <a:map from="rfx_category_desc" to="rfx_category_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="vendor_name" autoComplete="true" autoCompleteField="code_name" lovHeight="480" lovService="pur.PUR5260.pur_vendors_by_user_authority_lov" lovWidth="500" title="供应商">
                        <a:mapping>
                            <a:map from="vendor_id" to="vendor_id"/>
                            <a:map from="vendor_name" to="vendor_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="item_category_id"/>
                    <a:field name="item_category_desc" autoComplete="true" autoCompleteField="category_code_name" lovHeight="480" lovService="pur.PUR5130.mtl_categories_user_defined_vl" lovWidth="510" title="PUR_REQUISITION_LNS.ITEM_CATEGORY_ID">
                        <a:mapping>
                            <a:map from="category_name" to="item_category_desc"/>
                            <a:map from="category_udf_id" to="item_category_id"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="inv_organization_id"/>
                    <a:field name="inv_organization_desc" autoComplete="true" autoCompleteField="organization_code_name" lovGridHeight="320" lovHeight="480" lovService="public.inv_organizations_lov" lovWidth="650" title="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID">
                        <a:mapping>
                            <a:map from="inv_organization_id" to="inv_organization_id"/>
                            <a:map from="inv_organization_name" to="inv_organization_desc"/>
                        </a:mapping>
                    </a:field>
                    <!-- 采购组织 -->
                    <a:field name="pur_organization_name" autoComplete="true" autoCompleteField="pur_organization_code_name" lovHeight="480" lovService="public.pur_organization_lov" lovWidth="510" requiredMessage="${l:PUR_RFX_HEADERS.CHOOSE_ORG}" title="PUR_ORGANIZATIONS.PUR_ORGANIZATION">
                        <a:mapping>
                            <a:map from="pur_organization_id" to="pur_organization_id"/>
                            <a:map from="pur_organization_code" to="pur_organization_code"/>
                            <a:map from="pur_organization_name" to="pur_organization_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="source_type_desc" displayField="code_value_name" options="ur5260_rfx_source_type_list" returnField="source_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="pur5260_erpinv_result_ds" autoCount="true" autoPageSize="true" model="pur.PUR5260.pur_erpinv_purchase_info_records_query" queryDataSet="pur5260_erpinv_query_ds" selectable="true">
                <a:fields>
                    <a:field name="tax_included_flag" checkedValue="Y" readOnly="true" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:tabPanel marginHeight="80" marginWidth="60">
                <a:tabs>
                    <a:tab prompt="PUR5260.PURCHASING_INFORMATION_RECORDS" width="130">
                        <a:screenTopToolbar>
                            <a:toolbarButton click="pur5260_exportToErp_fun" text="PROMPT.IMPORT" width="100"/>
                            <a:gridButton bind="pur5260_purchase_info_record_result_grid" style="margin-left:20px;" type="excel" width="100"/>
                            <a:toolbarButton click="pur5260_abandonInfoRecord_fun" text="PUR5610.ABANDON" width="100"/>
                            <a:toolbarButton click="pur5260_recordWrite_fun" text="PROMPT.REFRESH" width="100"/>
                            <label style="margin-top:10px;margin-left:10px;"><![CDATA[${l:PUR5260.PLEASE_CLICK_THE_REFRESH_BUTTON_BEFORE_INQUIRY}]]></label>
                        </a:screenTopToolbar>
                        <a:hBox>
                            <a:vBox>
                                <a:treeGrid id="pur5260_export_status_tree" bindTarget="pur5260_export_status_list" expandField="expand" idField="export_status" marginHeight="165" parentField="parent_export_status" sequenceField="sequence" showCheckBox="false" width="150">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="left" prompt="PUR5710.STATUS_DESC" width="140"/>
                                    </a:columns>
                                    <a:events>
                                        <a:event name="rowclick" handler="pur5260_export_status_tree_clickFun"/>
                                    </a:events>
                                </a:treeGrid>
                            </a:vBox>
                            <a:vBox>
                                <a:queryForm bindTarget="pur5260_purchase_info_record_query_ds" resultTarget="pur5260_purchase_info_record_result_ds">
                                    <a:formToolBar>
                                        <a:hBox labelWidth="100">
                                            <a:textField name="item_code" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_ORDER_LINES.ITEM_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:lov name="vendor_name" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PROMPT.VENDOR">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="item_category_desc" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_RFX_LN_ITEMS.ITEM_CATEGORY_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                        </a:hBox>
                                    </a:formToolBar>
                                    <a:formBody>
                                        <a:hBox labelWidth="100">
                                            <a:lov name="business_unit_name" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_REQUISITION_HDS.BUSINESS_UNIT_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="inv_organization_desc" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PROMPT.INV_ORGANIZATION">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:textField name="document_number" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.DOCUMENT_NUMBER">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                        </a:hBox>
                                        <a:hBox labelWidth="100">
                                            <a:comboBox name="source_type_desc" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_RFX_HEADERS.SOURCE_TYPE">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:comboBox>
                                            <a:datePicker name="create_date_from" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.COMPLETION_DATE_FROM">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                            <a:datePicker name="create_date_to" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.COMPLETION_DATE_TO">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                        </a:hBox>
                                        <a:hBox labelWidth="100">
                                            <a:comboBox name="source_from_desc" bindTarget="pur5260_purchase_info_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.SOURCE_FROM">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_purchase_info_record_query_fun"/>
                                                </a:events>
                                            </a:comboBox>
                                        </a:hBox>
                                    </a:formBody>
                                </a:queryForm>
                                <a:grid id="pur5260_purchase_info_record_result_grid" autoAppend="false" bindTarget="pur5260_purchase_info_record_result_ds" marginHeight="215" marginWidth="250" navBar="true">
                                    <a:columns>
                                        <a:column name="export_status_desc" prompt="PUR5260.IMPORT_STATUS" sortable="true" width="60"/>
                                        <a:column name="erp_number" prompt="PUR_PURCHASE_INFO_RECORDS.ERP_NUMBER" sortable="true" width="80"/>
                                        <a:column name="error_message" prompt="PUR_LINE_LOCATIONS_ALL.VENDOR_DESC" sortable="true" width="100"/>
                                        <a:column name="planned_delivery_date" editorFunction="planned_delivery_date_edit_fn" prompt="PUR_PURCHASE_INFO_RECORDS.PLANNED_DELIVERY_DATE" sortable="true" width="80"/>
                                        <a:column name="pur_buyer_name" editorFunction="pur_buyer_name_edit_fn" prompt="PUR_PURCHASE_INFO_RECORDS.PUR_ORGANIZATION_NAME" sortable="true" width="80"/>
                                        <a:column name="pur_organization_code" prompt="PUR_ORGANIZATIONS.PUR_ORG_CODE" sortable="true" width="100"/>
                                        <a:column name="pur_organization_name" editorFunction="pur5260_purchaseInfoRecordEditorFunction" prompt="PUR_ORGANIZATIONS.PUR_ORG_NAME" sortable="true" width="120"/>
                                        <a:column name="business_unit_name" prompt="PUR2620.OU" sortable="true" width="80"/>
                                        <a:column name="inv_organization_name" prompt="ACP_BILL_DETAILS.ORGANIZATION_ID" sortable="true" width="80"/>
                                        <a:column name="vendor_name" editor="pur5260_purchase_info_record_result_lov" prompt="PUR_VENDORS.VENDOR" sortable="true" width="100"/>
                                        <a:column name="info_type_desc" editor="pur5260_purchase_info_record_result_cb" prompt="PUR_PURCHASE_INFO_RECORDS.INFO_TYPE_DESC" sortable="true" width="60"/>
                                        <a:column name="item_category_name" prompt="PUR_LINES_ALL.ITEM_TYPE" sortable="true" width="80"/>
                                        <a:column name="item_code" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_LN_ITEMS.ITEM_CODE" sortable="true" width="80"/>
                                        <a:column name="item_name" prompt="PUR_REQUISITION_LNS.ITEM_DESC" sortable="true" width="80"/>
                                        <a:column name="unit_price" prompt="PUR_RFX_VENDOR_QUOTE_LNS.PRICE" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="price_batch_quantity" editorFunction="pur5260_purchase_info_record_result_nf" prompt="PUR_PURCHASE_INFO_RECORDS.PRICE_BATCH_QUANTITY" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="batch_quantity_price" prompt="PUR_PURCHASE_INFO_RECORDS.BATCH_QUANTITY_PRICE" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="tax_type_code" prompt="PUR_ORDER_LINES.TAX_TYPE_ID" sortable="true" width="60"/>
                                        <a:column name="tax_type_rate" prompt="PUR_RFX_HEADERS.TAX_TYPE_RATE" sortable="true" width="60"/>
                                        <a:column name="currency_name" prompt="PUR_RFX_HEADERS.CURRENCY_CODE" sortable="true" width="60"/>
                                        <a:column name="exchange_rate" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_HEADERS.EXCHANGE_RATE" renderer="pur5260_purchase_info_record_result_rendererFun" sortable="true" width="60"/>
                                        <a:column name="feedback_expiry_date_from" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_FILING_POOL.FEEDBACK_EXPIRY_DATE_FROM" renderer="Aurora.formatDate" sortable="true" width="60"/>
                                        <a:column name="feedback_expiry_date_to" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_FILING_POOL.FEEDBACK_EXPIRY_DATE_TO" renderer="Aurora.formatDate" sortable="true" width="60"/>
                                        <a:column name="source_type_desc" align="center" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_HEADERS.SOURCE_TYPE" sortable="true" width="60"/>
                                        <a:column name="price_category_desc" align="center" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_HEADERS.PRICE_CATEGORY" sortable="true" width="60"/>
                                        <a:column name="document_number" prompt="PUR_PURCHASE_INFO_RECORDS.DOCUMENT_NUMBER" renderer="pur5260_purchase_info_record_result_rendererFun" sortable="true" width="100"/>
                                        <a:column name="line_number" align="center" prompt="PUR_LINES_ALL.LINE_NUM" width="40"/>
                                        <a:column name="item_note" editorFunction="item_note_edit_fn" prompt="PUR_RFX_LN_ITEMS.ITEM_NOTE" renderer="pur5260_rfxLnItemsGridRenderer"/>
                                        <a:column name="min_package" editorFunction="pur5260_purchase_info_record_result_fun" prompt="PUR_RFX_FEEDBACK_LINES.MIN_PACKAGE" width="80"/>
                                        <a:column name="ladder_quotation" align="center" prompt="SACPUR5210.LADDER_QUOTES" renderer="pur52202_rfxLadderQuotationRenderViewFun" width="50"/>
                                        <a:column name="user_desc" prompt="PUR_RFX_LN_ITEMS.CREATED_BY" sortable="true" width="60"/>
                                        <a:column name="creation_date_desc" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE" width="80"/>
                                        <a:column name="source_from_desc" align="center" prompt="PUR_PURCHASE_INFO_RECORDS.SOURCE_FROM" width="60"/>
                                        <!-- <a:column name="operation_list" prompt="操作记录" width="80" renderer="pur5260_purchase_info_record_result_rendererFun" /> -->
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="pur5260_purchase_info_record_result_lov"/>
                                        <a:comboBox id="pur5260_purchase_info_record_result_cb"/>
                                        <a:textField id="pur5260_purchase_info_record_result_tf"/>
                                        <a:numberField id="pur5260_purchase_info_record_result_nf2" allowDecimals="false" allowNegative="false"/>
                                        <a:numberField id="pur5260_purchase_info_record_result_nf" allowNegative="false" decimalPrecision="2"/>
                                        <a:datePicker id="pur5260_purchase_info_record_result_dp"/>
                                    </a:editors>
                                    <a:events>
                                        <a:event name="cellclick" handler="pur5260_purchase_info_record_result_grid_cellclick"/>
                                    </a:events>
                                </a:grid>
                            </a:vBox>
                        </a:hBox>
                    </a:tab>
                    <a:tab prompt="PUR5260.PR" width="130">
                        <a:screenTopToolbar>
                            <a:toolbarButton click="pur52601_exportToErp_fun" text="PROMPT.IMPORT" width="100"/>
                            <a:gridButton bind="pur5260_pur_req_record_result_grid" style="margin-left:20px;" type="excel" width="100"/>
                            <a:toolbarButton click="pur52601_abandonInfoRecord_fun" text="PUR5610.ABANDON" width="100"/>
                            <a:toolbarButton click="pur5260_recordWrite_fun" text="PROMPT.REFRESH" width="100"/>
                            <label style="margin-top:10px;margin-left:10px;"><![CDATA[${l:PUR5260.PLEASE_CLICK_THE_REFRESH_BUTTON_BEFORE_INQUIRY}]]></label>
                        </a:screenTopToolbar>
                        <a:hBox>
                            <a:vBox>
                                <a:treeGrid id="pur5260_req_export_status_tree" bindTarget="pur5260_export_status_list" expandField="expand" idField="export_status" marginHeight="165" parentField="parent_export_status" sequenceField="sequence" showCheckBox="false" width="150">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="left" prompt="PUR5710.STATUS_DESC" width="140"/>
                                    </a:columns>
                                    <a:events>
                                        <a:event name="rowclick" handler="pur5260_req_export_status_tree_clickFun"/>
                                    </a:events>
                                </a:treeGrid>
                            </a:vBox>
                            <a:vBox>
                                <a:queryForm bindTarget="pur5260_pur_req_record_query_ds" resultTarget="pur5260_pur_req_record_result_ds">
                                    <a:formToolBar>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="item_code" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_ORDER_LINES.ITEM_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:lov name="vendor_name" bindTarget="pur5260_pur_req_record_query_ds" prompt="PROMPT.VENDOR">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="item_category_desc" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_RFX_LN_ITEMS.ITEM_CATEGORY_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                        </a:hBox>
                                    </a:formToolBar>
                                    <a:formBody>
                                        <a:hBox labelWidth="120">
                                            <a:lov name="business_unit_name" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR2620.OU">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="inv_organization_desc" bindTarget="pur5260_pur_req_record_query_ds" prompt="PROMPT.INV_ORGANIZATION">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:textField name="document_number" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.DOCUMENT_NUMBER">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                        </a:hBox>
                                        <a:hBox labelWidth="120">
                                            <a:comboBox name="source_type_desc" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_RFX_HEADERS.SOURCE_TYPE">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:comboBox>
                                            <a:datePicker name="create_date_from" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.COMPLETION_DATE_FROM">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                            <a:datePicker name="create_date_to" bindTarget="pur5260_pur_req_record_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.COMPLETION_DATE_TO">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_pur_req_record_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                        </a:hBox>
                                    </a:formBody>
                                </a:queryForm>
                                <a:grid id="pur5260_pur_req_record_result_grid" autoAppend="false" bindTarget="pur5260_pur_req_record_result_ds" marginHeight="215" marginWidth="250" navBar="true">
                                    <a:columns>
                                        <a:column name="req_export_status_desc" prompt="PUR5260.IMPORT_STATUS" sortable="true" width="60"/>
                                        <a:column name="req_error_message" prompt="PUR_LINE_LOCATIONS_ALL.VENDOR_DESC" sortable="true" width="100"/>
                                        <a:column name="req_number" prompt="PUR_RFX_LN_ITEMS.REQ_NUMBER" sortable="true" width="80"/>
                                        <a:column name="req_line_num" prompt="PUR5260.APPLICATION_LINE_NUMBER" sortable="true" width="60"/>
                                        <a:column name="pur_organization_code" prompt="PUR_ORGANIZATIONS.PUR_ORG_CODE" sortable="true" width="100"/>
                                        <a:column name="pur_organization_name" editorFunction="pur5260_purchaseInfoRecordEditorFunction" prompt="PUR_ORGANIZATIONS.PUR_ORG_NAME" sortable="true" width="120"/>
                                        <a:column name="business_unit_name" prompt="PUR2620.OU" sortable="true" width="80"/>
                                        <a:column name="inv_organization_name" prompt="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID" sortable="true" width="80"/>
                                        <a:column name="vendor_name" editor="pur5260_purchase_info_record_result_lov2" prompt="PUR_VENDORS.VENDOR" sortable="true" width="100"/>
                                        <a:column name="info_type_desc" editor="pur5260_purchase_info_record_result_cb2" prompt="PUR_PURCHASE_INFO_RECORDS.INFO_TYPE_DESC" sortable="true" width="60"/>
                                        <a:column name="item_category_name" prompt="PUR_LINES_ALL.ITEM_TYPE" sortable="true" width="80"/>
                                        <a:column name="item_code" editor="pur5260_purchase_info_record_result_tf2" prompt="PUR_RFX_LN_ITEMS.ITEM_CODE" sortable="true" width="80"/>
                                        <a:column name="item_name" prompt="PUR_REQUISITION_LNS.ITEM_DESC" sortable="true" width="80"/>
                                        <a:column name="unit_price" prompt="PUR_RFX_VENDOR_QUOTE_LNS.PRICE" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="price_batch_quantity" prompt="PUR_PURCHASE_INFO_RECORDS.PRICE_BATCH_QUANTITY" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="batch_quantity_price" prompt="PUR_PURCHASE_INFO_RECORDS.BATCH_QUANTITY_PRICE" renderer="Aurora.formatNumber" sortable="true" width="60"/>
                                        <a:column name="tax_type_code" prompt="PUR_ORDER_LINES.TAX_TYPE_ID" sortable="true" width="60"/>
                                        <a:column name="tax_type_rate" prompt="PUR_RFX_HEADERS.TAX_TYPE_RATE" sortable="true" width="60"/>
                                        <a:column name="currency_name" prompt="PUR_RFX_HEADERS.CURRENCY_CODE" sortable="true" width="60"/>
                                        <a:column name="exchange_rate" prompt="PUR_RFX_HEADERS.EXCHANGE_RATE" renderer="pur5260_purchase_info_record_result_rendererFun" sortable="true" width="60"/>
                                        <a:column name="feedback_expiry_date_from" prompt="PUR_RFX_FILING_POOL.FEEDBACK_EXPIRY_DATE_FROM" renderer="Aurora.formatDate" sortable="true" width="60"/>
                                        <a:column name="feedback_expiry_date_to" prompt="PUR_RFX_FILING_POOL.FEEDBACK_EXPIRY_DATE_TO" renderer="Aurora.formatDate" sortable="true" width="60"/>
                                        <a:column name="source_type_desc" prompt="PUR_RFX_HEADERS.SOURCE_TYPE" sortable="true" width="60"/>
                                        <a:column name="document_number" prompt="PUR_PURCHASE_INFO_RECORDS.DOCUMENT_NUMBER" renderer="pur5260_purchase_info_record_result_rendererFun" sortable="true" width="100"/>
                                        <a:column name="user_desc" prompt="PUR_RFX_LN_ITEMS.CREATED_BY" sortable="true" width="60"/>
                                        <a:column name="creation_date_desc" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE" width="80"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:lov id="pur5260_purchase_info_record_result_lov2"/>
                                        <a:comboBox id="pur5260_purchase_info_record_result_cb2"/>
                                        <a:textField id="pur5260_purchase_info_record_result_tf2"/>
                                    </a:editors>
                                    <!--  <a:events>
                                    <a:event name="cellclick" handler="pur5260_purchase_info_record_result_grid_cellclick"/>
                                </a:events> -->
                                </a:grid>
                            </a:vBox>
                        </a:hBox>
                    </a:tab>
                    <a:tab prompt="PUR5260.EBS_QUOTATION" width="130">
                        <a:screenTopToolbar>
                            <a:toolbarButton click="pur5260_exportToEbs_fun" text="PROMPT.IMPORT" width="100"/>
                            <a:gridButton bind="pur5260_ebs_quote_result_grid" style="margin-left:20px;" type="excel" width="100"/>
                            <a:toolbarButton click="pur5260_abandon_quote_fun" text="PUR5610.ABANDON" width="100"/>
                        </a:screenTopToolbar>
                        <a:hBox>
                            <a:vBox>
                                <a:treeGrid id="pur5260_quote_export_status_tree" bindTarget="pur5260_export_status_list" expandField="expand" idField="export_status" marginHeight="165" parentField="parent_export_status" sequenceField="sequence" showCheckBox="false" width="150">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="left" prompt="PUR5710.STATUS_DESC" width="140"/>
                                    </a:columns>
                                    <a:events>
                                        <a:event name="rowclick" handler="pur5260_quote_export_status_tree_clickFun"/>
                                    </a:events>
                                </a:treeGrid>
                            </a:vBox>
                            <a:vBox>
                                <a:queryForm bindTarget="pur5260_ebs_quote_query_ds" resultTarget="pur5260_ebs_quote_result_ds">
                                    <a:formToolBar>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="item_code" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR_ORDER_LINES.ITEM_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:lov name="vendor_name" bindTarget="pur5260_ebs_quote_query_ds" prompt="PROMPT.VENDOR">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="item_category_desc" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR_RFX_LN_ITEMS.ITEM_CATEGORY_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                        </a:hBox>
                                    </a:formToolBar>
                                    <a:formBody>
                                        <a:hBox labelWidth="120">
                                            <a:lov name="business_unit_name" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR2620.OU">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="inv_organization_desc" bindTarget="pur5260_ebs_quote_query_ds" prompt="PROMPT.INV_ORGANIZATION">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:textField name="rfx_number" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR_RFX_HEADERS.RFX_NUMBER">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                        </a:hBox>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="line_num" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR_RFX_HEADERS.QUOTE_QUOTATION_LINE_NUMBER">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:comboBox name="rfx_type_desc" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR71101.RFX_TYPE">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:comboBox>
                                            <a:datePicker name="finish_date" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                        </a:hBox>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="line_num" bindTarget="pur5260_ebs_quote_query_ds" prompt="PUR5710.CREATED_BY_DESC">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                        </a:hBox>
                                    </a:formBody>
                                </a:queryForm>
                                <a:grid id="pur5260_ebs_quote_result_grid" autoAppend="false" bindTarget="pur5260_ebs_quote_result_ds" marginHeight="215" marginWidth="250" navBar="true">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="center" prompt="PUR5260.IMPORT_STATUS" sortable="true" width="50"/>
                                        <a:column name="vendor_full_name" prompt="PUR_VENDORS.VENDOR" sortable="true" width="100"/>
                                        <a:column name="display_vendor_code" prompt="PUR_VENDORS.VENDER_CODE" sortable="true" width="80"/>
                                        <a:column name="item_code" prompt="PUR_LINES_ALL.ITEM_CODE" sortable="true" width="60"/>
                                        <a:column name="item_name" prompt="PUR_LINES_ALL.ITEM_DESCRIPTION" sortable="true" width="100"/>
                                        <a:column name="item_category_name" prompt="PUR_RFX_LN_ITEMS.ITEM_CATEGORY_ID" sortable="true" width="80"/>
                                        <a:column name="unit_price" prompt="PUR_RFX_HEADERS.QUOTE" sortable="true" width="60"/>
                                        <a:column name="rfx_number" prompt="PUR_RFX_HEADERS.RFX_NUMBER" sortable="true" width="80"/>
                                        <a:column name="line_num" prompt="PUR_RFX_HEADERS.QUOTE_QUOTATION_LINE_NUMBER" sortable="true" width="60"/>
                                        <a:column name="rfx_type_desc" prompt="PUR71101.RFX_TYPE" sortable="true" width="60"/>
                                        <a:column name="finish_date" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE" sortable="true" width="60"/>
                                        <a:column name="created_by_name" prompt="PUR_VENDORS.CREATED_BY" sortable="true" width="60"/>
                                        <a:column name="submitted_by_name" prompt="PUR_RFX_HEADERS.SUBMITTED_BY" sortable="true" width="60"/>
                                        <a:column name="business_unit_name" prompt="PUR2620.OU" sortable="true" width="80"/>
                                        <a:column name="inv_orgainzation_name" prompt="PUR_RFX_LN_ITEMS.INV_ORGANIZATION_ID" sortable="true" width="60"/>
                                        <a:column name="currency_name" prompt="PUR_RFX_HEADERS.CURRENCY_CODE" sortable="true" width="60"/>
                                        <a:column name="tax_type_code" prompt="PUR_RFX_HEADERS.TAX_TYPE_RATE" sortable="true" width="60"/>
                                        <a:column name="suggested_note" prompt="PUR_RFX_FEEDBACK_LINES.SUGGESTED_NOTE" sortable="true" width="100"/>
                                    </a:columns>
                                </a:grid>
                            </a:vBox>
                        </a:hBox>
                    </a:tab>
                    <a:tab prompt="PUR5620.BPA" width="130">
                        <a:tabPanel marginHeight="115" marginWidth="50">
                            <a:tabs>
                                <a:tab prompt="PUR5620.TO_BEIMPORT" width="130">
                                    <a:screenTopToolbar>
                                        <a:toolbarButton click="pur5260_exportToEbs_Import_fun" text="PROMPT.IMPORT" width="100"/>
                                    </a:screenTopToolbar>
                                    <a:hBox>
                                        <a:vBox>
                                            <a:queryForm bindTarget="pur5260_ebs_quote_BeSuccess_query_ds" resultTarget="pur5260_ebs_quote_be_import_ds">
                                                <a:formToolBar>
                                                    <a:hBox labelWidth="120">
                                                        <a:textField name="item_code" bindTarget="pur5260_ebs_quote_BeSuccess_query_ds" prompt="PUR_LINES_ALL.ITEM_DESCRIPTION">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:textField>
                                                        <a:lov name="vendor_name" bindTarget="pur5260_ebs_quote_BeSuccess_query_ds" prompt="PROMPT.VENDOR">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                        <a:lov name="business_unit_name" bindTarget="pur5260_ebs_quote_BeSuccess_query_ds" prompt="PUR2620.OU">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                        <a:lov name="item_category_desc" bindTarget="pur5260_ebs_quote_BeSuccess_query_ds" prompt="PUR5620.MATERIAL_CATEGORY">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                    </a:hBox>
                                                </a:formToolBar>
                                            </a:queryForm>
                                            <a:grid id="pur5260_ebs_package_agreemen_result_grid" autoAppend="false" bindTarget="pur5260_ebs_quote_be_import_ds" marginHeight="260" marginWidth="85" navBar="true">
                                                <a:columns>
                                                    <a:column name="export_status_desc" align="center" prompt="PUR5260.IMPORT_STATUS" sortable="true" width="80"/>
                                                    <a:column name="error_message" prompt="PUR5620.IMPORT_INFORMATION" sortable="true" width="100"/>
                                                    <a:column name="package_agreement_number" prompt="PUR5620.PACKAGE_AGREEMENT_NUMBER" sortable="true" width="90"/>
                                                    <a:column name="vendor_full_name" prompt="PUR_VENDORS.VENDOR" sortable="true" width="100"/>
                                                    <a:column name="display_vendor_code" prompt="PUR_VENDORS.VENDER_CODE" sortable="true" width="70"/>
                                                    <a:column name="business_unit_name" prompt="PUR2620.OU" sortable="true" width="100"/>
                                                    <a:column name="currency_name" prompt="PUR_RFX_HEADERS.CURRENCY_CODE" sortable="true" width="70"/>
                                                    <a:column name="item_code" prompt="PUR_LINES_ALL.ITEM_CODE" sortable="true" width="100"/>
                                                    <a:column name="item_name" prompt="PUR_LINES_ALL.ITEM_DESCRIPTION" sortable="true" width="100"/>
                                                    <a:column name="item_category_name" prompt="PUR5620.MATERIAL_CATEGORY" sortable="true" width="100"/>
                                                    <a:column name="uom_desc" prompt="PUR_RFX_FEEDBACK_LINES.UOM_CODE" sortable="true" width="70"/>
                                                    <a:column name="tax_type_code" prompt="PUR5620.THE_TAX_CODE" sortable="true" width="70"/>
                                                    <a:column name="unit_price" prompt="PUR5620.TAX_INCLUDED_PRICE" sortable="true" width="70"/>
                                                    <a:column name="price_without_tax" prompt="PUR5620.PRICE_WITHOUT_TAX" sortable="true" width="80"/>
                                                    <a:column name="rfx_type_desc" prompt="PUR71101.RFX_TYPE" sortable="true" width="70"/>
                                                    <a:column name="finish_date" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE" sortable="true" width="70"/>
                                                    <a:column name="created_by_name" prompt="PUR_VENDORS.CREATED_BY" sortable="true" width="70"/>
                                                </a:columns>
                                            </a:grid>
                                        </a:vBox>
                                    </a:hBox>
                                </a:tab>
                                <a:tab prompt="PUR5620.IMPORT_SUCCESS" width="130">
                                    <a:hBox>
                                        <a:vBox>
                                            <a:queryForm bindTarget="pur5260_ebs_ImportSuccess_query_ds" resultTarget="pur5260_ebs_quote_import_success_ds">
                                                <a:formToolBar>
                                                    <a:hBox labelWidth="120">
                                                        <a:textField name="item_code" bindTarget="pur5260_ebs_ImportSuccess_query_ds" prompt="PUR_LINES_ALL.ITEM_DESCRIPTION">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:textField>
                                                        <a:lov name="vendor_name" bindTarget="pur5260_ebs_ImportSuccess_query_ds" prompt="PROMPT.VENDOR">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                        <a:lov name="business_unit_name" bindTarget="pur5260_ebs_ImportSuccess_query_ds" prompt="PUR2620.OU">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                        <a:lov name="item_category_desc" bindTarget="pur5260_ebs_ImportSuccess_query_ds" prompt="PUR5620.MATERIAL_CATEGORY">
                                                            <a:events>
                                                                <a:event name="enterdown" handler="pur5260_ebs_quote_query_fun"/>
                                                            </a:events>
                                                        </a:lov>
                                                    </a:hBox>
                                                </a:formToolBar>
                                            </a:queryForm>
                                            <a:grid id="pur5260_ebs_package_agreemen_succuss_grid" autoAppend="false" bindTarget="pur5260_ebs_quote_import_success_ds" marginHeight="215" marginWidth="85" navBar="true">
                                                <a:columns>
                                                    <a:column name="export_status_desc" align="center" prompt="PUR5260.IMPORT_STATUS" sortable="true" width="80"/>
                                                    <a:column name="error_message" prompt="PUR5620.IMPORT_INFORMATION" sortable="true" width="100"/>
                                                    <a:column name="package_agreement_number" prompt="PUR5620.PACKAGE_AGREEMENT_NUMBER" sortable="true" width="90"/>
                                                    <a:column name="vendor_full_name" prompt="PUR_VENDORS.VENDOR" sortable="true" width="100"/>
                                                    <a:column name="display_vendor_code" prompt="PUR_VENDORS.VENDER_CODE" sortable="true" width="70"/>
                                                    <a:column name="business_unit_name" prompt="PUR2620.OU" sortable="true" width="100"/>
                                                    <a:column name="currency_name" prompt="PUR_RFX_HEADERS.CURRENCY_CODE" sortable="true" width="70"/>
                                                    <a:column name="item_code" prompt="PUR_LINES_ALL.ITEM_CODE" sortable="true" width="100"/>
                                                    <a:column name="item_name" prompt="PUR_LINES_ALL.ITEM_DESCRIPTION" sortable="true" width="100"/>
                                                    <a:column name="item_category_name" prompt="PUR5620.MATERIAL_CATEGORY" sortable="true" width="100"/>
                                                    <a:column name="uom_desc" prompt="PUR_RFX_FEEDBACK_LINES.UOM_CODE" sortable="true" width="70"/>
                                                    <a:column name="tax_type_code" prompt="PUR5620.THE_TAX_CODE" sortable="true" width="70"/>
                                                    <a:column name="unit_price" prompt="PUR5620.TAX_INCLUDED_PRICE" sortable="true" width="70"/>
                                                    <a:column name="price_without_tax" prompt="PUR5620.PRICE_WITHOUT_TAX" sortable="true" width="80"/>
                                                    <a:column name="rfx_type_desc" prompt="PUR71101.RFX_TYPE" sortable="true" width="70"/>
                                                    <a:column name="finish_date" prompt="PUR_PURCHASE_INFO_RECORDS.CREATION_DATE" sortable="true" width="70"/>
                                                    <a:column name="created_by_name" prompt="PUR_VENDORS.CREATED_BY" sortable="true" width="70"/>
                                                </a:columns>
                                            </a:grid>
                                        </a:vBox>
                                    </a:hBox>
                                </a:tab>
                            </a:tabs>
                        </a:tabPanel>
                    </a:tab>
                    <a:tab prompt="进销存" width="130">
                        <a:screenTopToolbar>
                            <a:toolbarButton click="pur5260_exportToErpinv_fun" text="导入" width="100"/>
                            <a:gridButton bind="pur5260_erpinv_result_grid" style="margin-left:20px;" type="excel" width="100"/>
                            <!-- <a:toolbarButton click="pur5260_abandon_quote_fun" text="放弃" width="100"/> -->
                        </a:screenTopToolbar>
                        <a:hBox>
                            <a:vBox>
                                <a:treeGrid id="pur5260_erpinv_status_tree" bindTarget="pur5260_erpinv_export_status_list" expandField="expand" idField="export_status" marginHeight="165" parentField="parent_export_status" sequenceField="sequence" showCheckBox="false" width="150">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="left" prompt="状态" width="140"/>
                                    </a:columns>
                                    <a:events>
                                        <a:event name="rowclick" handler="pur5260_erpinv_status_tree_clickFun"/>
                                    </a:events>
                                </a:treeGrid>
                            </a:vBox>
                            <a:vBox>
                                <a:queryForm bindTarget="pur5260_erpinv_query_ds" resultTarget="pur5260_erpinv_result_ds">
                                    <a:formToolBar>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="item_code" bindTarget="pur5260_erpinv_query_ds" prompt="PUR_ORDER_LINES.ITEM_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:lov name="vendor_name" bindTarget="pur5260_erpinv_query_ds" prompt="PROMPT.VENDOR">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="item_category_desc" bindTarget="pur5260_erpinv_query_ds" prompt="PUR_RFX_LN_ITEMS.ITEM_CATEGORY_ID">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                        </a:hBox>
                                    </a:formToolBar>
                                    <a:formBody>
                                        <a:hBox labelWidth="120">
                                            <a:lov name="business_unit_name" bindTarget="pur5260_erpinv_query_ds" prompt="业务实体">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:lov name="inv_organization_desc" bindTarget="pur5260_erpinv_query_ds" prompt="PROMPT.INV_ORGANIZATION">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:lov>
                                            <a:textField name="rfx_number" bindTarget="pur5260_erpinv_query_ds" prompt="询报价单号">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                        </a:hBox>
                                        <a:hBox labelWidth="120">
                                            <a:textField name="line_num" bindTarget="pur5260_erpinv_query_ds" prompt="询报价行号">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:textField>
                                            <a:comboBox name="rfx_type_desc" bindTarget="pur5260_erpinv_query_ds" prompt="PUR71101.RFX_TYPE">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:comboBox>
                                            <a:datePicker name="finish_date" bindTarget="pur5260_erpinv_query_ds" prompt="完成日期">
                                                <a:events>
                                                    <a:event name="enterdown" handler="pur5260_erpinv_query_fun"/>
                                                </a:events>
                                            </a:datePicker>
                                        </a:hBox>
                                    </a:formBody>
                                </a:queryForm>
                                <a:grid id="pur5260_erpinv_result_grid" autoAppend="false" bindTarget="pur5260_erpinv_result_ds" marginHeight="215" marginWidth="250" navBar="true">
                                    <a:columns>
                                        <a:column name="export_status_desc" align="center" prompt="导入状态" sortable="true" width="50"/>
                                        <a:column name="display_vendor_code" prompt="供应商编码" sortable="true" width="80"/>
                                        <a:column name="vendor_full_name" prompt="供应商" sortable="true" width="120"/>
                                        <a:column name="item_code" prompt="物料编码" sortable="true" width="60"/>
                                        <a:column name="item_desc" prompt="物料描述" sortable="true" width="100"/>
                                        <a:column name="item_category_name" prompt="物品分类" sortable="true" width="80"/>
                                        <a:column name="valid_fb_retail_price" prompt="单价" sortable="true" width="60"/>
                                        <a:column name="rfx_number" prompt="询报价单号" sortable="true" width="100"/>
                                        <a:column name="line_num" prompt="询报价行号" sortable="true" width="60"/>
                                        <a:column name="rfx_type_desc" prompt="询报价类型" sortable="true" width="60"/>
                                        <a:column name="finish_date" prompt="完成日期" sortable="true" width="60"/>
                                        <a:column name="submitted_by_name" prompt="核价人" sortable="true" width="60"/>
                                        <a:column name="currency_name" prompt="币种" sortable="true" width="60"/>
                                        <a:column name="tax_included_flag" prompt="是否含税" sortable="true" width="60"/>
                                        <a:column name="tax_type_rate" prompt="税率" sortable="true" width="60"/>
                                        <a:column name="business_unit_name" prompt="业务实体" sortable="true" width="100"/>
                                        <a:column name="inv_orgainzation_name" prompt="库存组织" sortable="true" width="100"/>
                                    </a:columns>
                                    <a:editors>
                                        <a:checkBox id="pur5260_erpinv_grid_checkbox"/>
                                    </a:editors>
                                </a:grid>
                            </a:vBox>
                        </a:hBox>
                    </a:tab>
                </a:tabs>
            </a:tabPanel>
        </a:screenBody>
    </a:view>
</a:screen>
