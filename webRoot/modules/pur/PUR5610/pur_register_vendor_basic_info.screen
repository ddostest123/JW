<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: wangshihua  
    $Date: 2013-8-14 下午6:37:28  
    $Revision: 1.0  
    $Purpose: 
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application" trace="true">
    <a:init-procedure/>
    <a:view template="default">
        <a:link id="pur5610_register_vendor_statement_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_vendor_register_statement.screen"/>
        <a:link id="pur5610_register_vendor_detail_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_register_vendor_detail_info.screen"/>
        <a:link id="pur5610_register_vendor_basic_save_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_register_vendor_basic_info_save.svc"/>
        <a:link id="pur5610_register_vendor_finance_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_register_vendor_finance.screen"/>
        <a:link id="pur5610_register_vendor_finance_edit_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_register_vendor_finance_edit.screen"/>
        <a:link id="pur5610_register_vendor_finance_delete_link" model="pur.PUR5610.pur_register_vendor_finance" modelaction="delete"/>
        <a:link id="pur5610_finance_edit_link" url="${/request/@context_path}/modules/pur/PUR5610/pur_register_vendor_finance_save.svc"/>
        <link href="${/request/@context_path}/index/css/css.css" rel="stylesheet"/>
        <link href="${/request/@context_path}/index/js/menu.js" rel="stylesheet"/>
        <style type="text/css"><![CDATA[
html {
    background:#fff;
}        
        
body {
    font-family:"微软雅黑";
    font-size:12px;
    background:#fff;
}

.add_td {
    text-align:right;
}


.head {
    margin:10px auto;
    height:70px;
    width:970px;
}

.logo {
    float:left;
    height:80px;
    width:290px;
}

.hr_top {
    float:left;
    margin-right:15px;
    width:970px;
}

#main {
    height: auto;
    margin-left: auto;
    margin-right: auto;
    width: 970px;
    text-align:center;
}

.main_top {
    border-bottom: 1px dashed #333333;
    float: left;
    margin-left: 15px;
    margin-right: 15px;
    padding-left: 40px;
    text-align: left;
    width: 890px;
}

.main_title {
    float:left;
    color: #000000;
    font-size: 14px;
    font-weight: bold;
    line-height: 30px;
}

.main_content {
    float: left;
    margin-left: 15px;
    margin-right: 15px;
    padding-bottom: 20px;
    padding-left: 40px;
    padding-top: 20px;
    text-align: left;
    width: 890px;
}

.main_hbox {
    margin-left:0px;
    padding-left:0px;
}

.add_finance {
    float:left;
    margin-left:10px;
    width:200px;
    height:30px;
}   

.skip {
    float: left;
    margin-left: 15px;
    margin-right: 15px;
    margin-bottom:15px;
    padding-left: 40px;
    text-align: left;
    width: 890px;
}

.hr_footer {
    float:left;
    margin-top:10px;
    width:970px;
}

.footer {
    float:left;
    width:970px;
    margin-bottom:5px;
    height:85px;
    font-size:10px;
    color:#787676;
}

#progress_form {
    float:left;
    width:940px;
    margin-left:15px;
    margin-right:15px;
    text-align:center;
    height:100px;
}

#progress_bar {
    margin-bottom:30px;
    overflow:hidden;
    counter-reset:step;
    height:100px;
    width:930px;
}

#progress_bar li {
    list-style-type:none;
    color:#575757;
    text-transform:uppercase;
    font-size:14px;
    width:130px;
    float:left;
    position:relative;
    heigth:30px;
}

.before {
    content:counter(step);
    counter-increment:step;
    width:30px;
    height:20px;
    line-heigth:20px;
    display:block;
    font-size:12px;
    color:#333;
    background:#F0F0F0;
    border-radius:50px;
    margin:5px auto;
    padding-top:5px;
    padding-bottom:5px;
}

.after {
    content:'';
    width:102px;
    height:10px;
    background:#F0F0F0;
    position:absolute;
    left:79px;
    top:15px;
    z-index:1;
}

.before_finished {
    content:counter(step);
    counter-increment:step;
    width:30px;
    height:20px;
    line-heigth:20px;
    display:block;
    font-size:12px;
    color:#333;
    background:#43CD80;
    border-radius:50px;
    margin:5px auto;
    padding-top:5px;
    padding-bottom:5px;
    color:#F0F0F0;
}

.after_finished {
    content:'';
    width:102px;
    height:10px;
    background:#43CD80;
    position:absolute;
    left:79px;
    top:15px;
    z-index:1;
    color:#F0F0F0;
}

#pur5610_finance_table td {
    border:1px solid;
    margin:0;
    padding:0 5px 0 0;
    text-align:right;
}

.td_canot_edit {
    
}   
        ]]></style>
        <script><![CDATA[
            var modified_flag = false;
            
            //载入处理
            
            function pur5610_load_handler(ds) {
                var record = ds.getCurrentRecord();
                if (record.get('registered_country_code') == 'CHN') {
                    record.getField("national_organization_code").setRequired(true);
                } else {
                    record.getField("national_organization_code").setRequired(false);
                }
                //国家、地区、城市级联更新
                if (Ext.isEmpty(record.get('country_name')) || record.get('country_name') == undefined) {
                    record.set('country_code', '');
                    record.getField("province_name").setLovService('');
                    record.getField("city_name").setLovService('');
                } else {
                    var temp_string = record.get('country_code');
                    record.getField("city_name").setLovService('');
                    record.getField("province_name").setLovService('pur.PUR5610.fnd_region_province_lov');
                    record.getField("province_name").setLovPara('country_code', temp_string);
                    record.getField("province_name").setLovPara('vendor_register_id', '${/parameter/@vendor_register_id}');
                }
            
                if (Ext.isEmpty(record.get('province_name')) || record.get('province_name') == undefined) {
                    record.set('province_id', '');
                    record.getField("city_name").setLovService('');
                } else {
                    record.getField("city_name").setLovService('pur.PUR5610.fnd_region_city_lov');
                    record.getField("city_name").setLovPara('province_id', record.get('province_id'));
                    record.getField("city_name").setLovPara('vendor_register_id', '${/parameter/@vendor_register_id}');
                }
                
                //根据用户营业执照类型标识设置到期日
                if(record.get('business_license_type') == 'Y'){
                    record.set('business_license_end_date','');
                    record.getField('business_license_end_date').setRequired(false);
                    record.getField('business_license_end_date').setReadOnly(true);
                }else{
                    record.getField('business_license_end_date').setReadOnly(false);
                    record.getField('business_license_end_date').setRequired(true);
                }
                
                //国家、地区、城市级联更新
                if (Ext.isEmpty(record.get('registered_country_code')) || record.get('registered_country_code') == undefined) {
                    record.set('registered_province_id', '');
                    record.set('registered_province_desc','');
                    record.getField("registered_province_desc").setReadOnly(true);
                    record.getField("registered_province_desc").setRequired(false);
                    record.getField("registered_province_desc").setLovPara('country_code', -1);
            
                    record.set('registered_city_id', '');
                    record.set('registered_city_desc','');
                    record.getField("registered_city_desc").setReadOnly(true);
                    record.getField("registered_city_desc").setRequired(false);
                    record.getField("registered_city_desc").setLovPara('registered_province_id', -1);
                } else {
                    record.getField("registered_province_desc").setReadOnly(false);
                    record.getField("registered_province_desc").setRequired(true);
                    record.getField("registered_province_desc").setLovPara('country_code', record.get('registered_country_code'));
                }
            
                if (Ext.isEmpty(record.get('registered_province_id')) || record.get('registered_province_id') == undefined) {
                    record.set('registered_city_id', '');
                    record.set('registered_city_desc','');
                    record.getField("registered_city_desc").setReadOnly(true);
                    record.getField("registered_city_desc").setRequired(false);
                    record.getField("registered_city_desc").setLovPara('province_id', -1);
                } else {
                    record.getField("registered_city_desc").setReadOnly(false);
                    record.getField("registered_city_desc").setRequired(true);
                    record.getField("registered_city_desc").setLovPara('province_id', record.get('registered_province_id'));
                }
            
            }
            
            //自动查询处理
            
            function pur5610_query_handler(ds) {
                var record = ds.getCurrentRecord();
                var vendor_register_id = record.get('vendor_register_id');
                Aurora.request({
                    url: '${/request/@context_path}/autocrud/pur.PUR5610.pur_register_vendor_init/execute',
                    para: record.data,
                    success: function(res) {
                        var visit_feedback = res.result.visit_feedback;
                        if (visit_feedback == 'SUCCESS') {
                            return '';
                        } else if (visit_feedback == 'ERROR') {
                            var win = Aurora.showMessage('${l:PROMPT.ERROR}', '${l:PUR5610.ILLEGAL_VISIT_GO_TO_INDEX}', function() {
                                window.location.href = '${/request/@context_path}';
                            });
                            setTimeout(function() {
                                win.close();
                                window.location.href = '${/request/@context_path}';
                            }, 3000);
                        }
                    },
                    scope: this
                });
            }
            
            //国家、地区、城市级联更新
            
            function pur5610_register_vendor_update_handler(ds, record, name, value, oldvalue) {
                //注册国家和组织机构代码级联更新
                if (name == 'registered_country_name') {
                    if (record.get('registered_country_code') == 'CHN') {
                        record.getField("national_organization_code").setRequired(true);
                    } else {
                        record.getField("national_organization_code").setRequired(false);
                    }
                } else if (name == 'business_license_type') {
                    //根据用户营业执照类型标识设置到期日
                    if (record.get('business_license_type') == 'Y') {
                        record.set('business_license_end_date', '');
                        record.getField('business_license_end_date').setRequired(false);
                        record.getField('business_license_end_date').setReadOnly(true);
                    } else {
                        record.getField('business_license_end_date').setReadOnly(false);
                        record.getField('business_license_end_date').setRequired(true);
                    }
                }else if (name == 'registered_country_code') {
                    if (Ext.isEmpty(record.get('registered_country_code')) || record.get('registered_country_code') == undefined) {
                        record.set('registered_province_id', '');
                        record.set('registered_province_desc','');
                        record.getField("registered_province_desc").setReadOnly(true);
                        record.getField("registered_province_desc").setRequired(false);
                        record.getField("registered_province_desc").setLovPara('country_code', -1);
            
                        record.set('registered_city_id', '');
                        record.set('registered_city_desc','');
                        record.getField("registered_city_desc").setReadOnly(true);
                        record.getField("registered_city_desc").setRequired(false);
                        record.getField("registered_city_desc").setLovPara('province_id', -1);
                    } else {
                        record.getField("registered_province_desc").setReadOnly(false);
                        record.getField("registered_province_desc").setRequired(true);
                        record.getField("registered_province_desc").setLovPara('country_code', record.get('registered_country_code'));
                    }
                } else if (name == 'registered_province_id') {
                    if (Ext.isEmpty(record.get('registered_province_id')) || record.get('registered_province_id') == undefined) {
                        record.set('registered_city_id', '');
                        record.set('registered_city_desc','');
                        record.getField("registered_city_desc").setReadOnly(true);
                        record.getField("registered_city_desc").setRequired(false);
                        record.getField("registered_city_desc").setLovPara('province_id', -1);
                    } else {
                        record.getField("registered_city_desc").setReadOnly(false);
                        record.getField("registered_city_desc").setRequired(true);
                        record.getField("registered_city_desc").setLovPara('province_id', record.get('registered_province_id'));
                    }
                }
                modified_flag = true;
            }
            
            //上一步
            
            
            function pur5610_basic_last_page() {
                //window.location.href = $('pur5610_register_vendor_statement_link').getUrl() + location.search;
                var param = {};
                param['vendor_register_id'] = '${/parameter/@vendor_register_id}';
                Aurora.post($('pur5610_register_vendor_statement_link').getUrl(), param);
            }
            
            
            //保存
            
            
            function pur5610_basic_save() {
                var ds = $('pur5610_register_vendor_ds');
                if (ds.validate()) {
                    finance_save();
                    var record = ds.getCurrentRecord();
                    var data = record.data;
                    Aurora.request({
                        url: $('pur5610_register_vendor_basic_save_link').getUrl(),
                        para: data,
                        success: function(result) {
                            var win = Aurora.showMessage('${l:PROMPT}', '${l:PROMPT.SAVE_SUCCESS}');
                            setTimeout(function() {
                                win.close();
                            }, 1000);
                            modified_flag = false;
                        },
                        scope: this
                    });
                }
            }
            
            //下一步
            
            function pur5610_basic_next_page() {
                var ds = $('pur5610_register_vendor_ds');
                if (ds.validate()) {
                    finance_save();
                    if (modified_flag) {
                        Aurora.showMessage('${l:PROMPT}', '${l:PROMPT.PLEASE_SAVE}');
                    } else {
                        //window.location.href = $('pur5610_register_vendor_detail_link').getUrl() + location.search;
                        var param = {};
                        param['vendor_register_id'] = '${/parameter/@vendor_register_id}';
                        Aurora.post($('pur5610_register_vendor_detail_link').getUrl(), param);
                    }
                }
            }
            
            //财务信息初始化
            
            function pur5610_editCell(event) {
                var currentCell;
            
                if (event == null) {
                    currentCell = window.event.srcElement;
                } else {
                    currentCell = event.target;
                }
            
                if (currentCell.tagName.toLowerCase() == "td" && currentCell.className != 'td_canot_edit') {
                    var input = document.createElement("input");
                    input.type = 'text';
                    //input.setAttribute('class', 'editable');
                    input.value = currentCell.innerHTML;
                    input.width = currentCell.style.width;
            
                    input.onfocus = function() {
                        this.select();
                    };
            
                    input.onblur = function() {
                        currentCell.innerHTML = input.value;
                        //currentCell.removeChild(input);
                    };
                    input.onkeydown = function(event) {
                        if (event.keyCode == 13) {
                            input.blur();
                        }
                    };
            
                    currentCell.innerHTML = '';
                    currentCell.appendChild(input);
                    input.focus();
                }
            }
            
            function finance_save() {
                var ds = $('pur5610_vendor_finance_ds');
                var table = document.getElementById('pur5610_finance_table');
                var data = [];
                for (var i = 1;i < 5;i++) {
                    var record = ds.getAt(i - 1);
                    record.set('year_period', parseFloat(table.rows[0].cells[i].innerHTML.split(',').join("")));
                    record.set('total_assets', parseFloat(table.rows[1].cells[i].innerHTML.split(',').join("")));
                    record.set('total_liabilities', parseFloat(table.rows[2].cells[i].innerHTML.split(',').join("")));
                    record.set('current_assets', parseFloat(table.rows[3].cells[i].innerHTML.split(',').join("")));
                    record.set('current_liabilities', parseFloat(table.rows[4].cells[i].innerHTML.split(',').join("")));
                    record.set('revenue', parseFloat(table.rows[5].cells[i].innerHTML.split(',').join("")));
                    record.set('net_profit', parseFloat(table.rows[6].cells[i].innerHTML.split(',').join("")));
                    data.push(record.data);
                }
                Aurora.request({
                    url: $('pur5610_finance_edit_link').getUrl(),
                    para: data,
                    success: function(res) {
                        $('pur5610_vendor_finance_ds').query();
                    }
                });
            }
            
            function pur5610_setToEditable(tableid) {
                var ds = $('pur5610_vendor_finance_ds');
                var len = ds.getAll().length;
                var year_ds = $('pur5610_year_period_ds');
                var table = document.getElementById(tableid);
                var year_recs = year_ds.getAll();
                if (len == 0) {
                    for (var m = 1;m < 5;m++) {
                        var new_record = ds.create();
                        new_record.set('vendor_id', '${/parameter/@vendor_register_id}');
                        var new_year_rec = year_recs[m - 1];
                        table.rows[0].cells[m].innerHTML = Aurora.formatNumber(new_year_rec.get('current_year'), 0);
                    }
                } else {
                    for (var n = 1;n < 5;n++) {
                        var record = ds.getAt(n - 1);
                        table.rows[0].cells[n].innerHTML = Aurora.formatNumber(record.get('year_period'), 0);
                        table.rows[1].cells[n].innerHTML = Aurora.formatNumber(record.get('total_assets'), 2);
                        table.rows[2].cells[n].innerHTML = Aurora.formatNumber(record.get('total_liabilities'), 2);
                        table.rows[3].cells[n].innerHTML = Aurora.formatNumber(record.get('current_assets'), 2);
                        table.rows[4].cells[n].innerHTML = Aurora.formatNumber(record.get('current_liabilities'), 2);
                        table.rows[5].cells[n].innerHTML = Aurora.formatNumber(record.get('revenue'), 2);
                        table.rows[6].cells[n].innerHTML = Aurora.formatNumber(record.get('net_profit'), 2);
                    }
            
                }
                document.getElementById(tableid).onclick = pur5610_editCell;
            }
            
            function pur5610_finance_init(ds) {
            
                pur5610_setToEditable('pur5610_finance_table');
            
            
            }
            
            //比较两个日期的大小
            
            function pur5610_compareDate(start, end) {
            
                if (typeof(start) == 'string') {
                    start = new Date(start.replace(/-/g, "/"));
                }
            
                if (typeof(end) == 'string') {
                    end = new Date(end.replace(/-/g, "/"));
                }
            
                if (start > end) {
                    return false;
                }
                return true;
            }
            
            //营业执照到期日校验
            
            function business_license_validate(record, name, value) {
                if (name == 'business_license_end_date') {
                    var end = record.get('business_license_end_date');
                    var sysdate = new Date();
                    sysdate.toLocaleDateString();
                    if ( !! end) {
                        if (!pur5610_compareDate(sysdate, end)) {
                            return '${l:PUR5610_VENDOR_REG.LICENSE_EXPIRATION_DATE_ERROR}';
                        }
                    }
                    return true;
                }
            }
            
            //经营许可证到期日校验
            
            function operating_license_validate(record, name, value) {
                if (name == 'operating_license_end_date') {
                    var end = record.get('operating_license_end_date');
                    var sysdate = new Date();
                    sysdate.toLocaleDateString();
                    if ( !! end) {
                        if (!pur5610_compareDate(sysdate, end)) {
                            return '${l:PUR5610_VENDOR_REG.PERMITION_EXPIRATION_DATE_ERROR}';
                        }
                    }
                    return true;
                }
            }
            
            //邮箱格式校验
            
            function pur5610_email_validator(record, name, value) {
            
                if (value) {
                    var myReg = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/;
                    if (myReg.test(value)) {
                        return true;
                    }
                    return '${l:PROMPT.INCORRECT_EMAIL_FORMAT}';
                }
                return true;
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="pur5610_year_period_ds" loadData="true" model="pur.PUR5610.pur_recent_years"/>
            <a:dataSet id="pur5610_register_vendor_type_ds" loadData="true" model="public.pur_sys_vendor_type_lov"/>
            <a:dataSet id="pur5610_vendor_category_ds" lookupCode="PUR_VENDOR_CATEGORY"/>
            <a:dataSet id="pur5610_enterprise_nature_ds" lookupCode="PUR_ENTERPRISE_NATURE"/>
            <a:dataSet id="pur5610_taxpayer_type_ds" lookupCode="PUR_TAXPAY_IDENTIFIED"/>
            <a:dataSet id="pur5610_factory_nature_ds" lookupCode="PUR_FACTORY_NATURE"/>
            <a:dataSet id="pur5610_certificate_ds" lookupCode="PUR_REGISTER_VENDOR_CERTIFICATE"/>
            <a:dataSet id="pur5610_vendor_finance_ds" autoQuery="true" model="pur.PUR5610.pur_reigster_vendor_finance_query" queryUrl="${/request/@context_path}/autocrud/pur.PUR5610.pur_reigster_vendor_finance_query/query?vendor_id=${/parameter/@vendor_register_id}">
                <a:events>
                    <a:event name="load" handler="pur5610_finance_init"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="pur5610_register_vendor_ds" autoCreate="true" autoQuery="true" model="pur.PUR5610.pur_register_vendors" queryUrl="${/request/@context_path}/autocrud/pur.PUR5610.pur_register_vendors/query?vendor_register_id=${/parameter/@vendor_register_id}">
                <a:fields>
                    <a:field name="vendor_register_id" defaultValue="${/parameter/@vendor_register_id}"/>
                    <a:field name="full_name" required="true"/>
                    <a:field name="vendor_category"/>
                    <a:field name="vendor_category_name" displayField="code_value_name" options="pur5610_vendor_category_ds" required="true" returnField="vendor_category" valueField="code_value"/>
                    <a:field name="vendor_register_id" defaultValue="${/parameter/@vendor_register_id}"/>
                    <a:field name="vendor_type_id"/>
                    <a:field name="vendor_type_name" displayField="description" options="pur5610_register_vendor_type_ds" required="true" returnField="vendor_type_id" valueField="vender_type_id"/>
                    <a:field name="enterprise_nature"/>
                    <a:field name="enterprise_nature_name" displayField="code_value_name" options="pur5610_enterprise_nature_ds" required="true" returnField="enterprise_nature" valueField="code_value"/>
                    <a:field name="registered_country_code"/>
                    <a:field name="registered_country_name" autoComplete="true" autoCompleteField="code_name" lovHeight="500" lovService="public.fnd_country_lov" lovWidth="500" required="true" title="SYS_VENDOR_COUNTRY_SELECTION.TITLE">
                        <a:mapping>
                            <a:map from="country_code" to="registered_country_code"/>
                            <a:map from="country_name" to="registered_country_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="registered_province_id"/>
                    <a:field name="registered_province_desc" autoComplete="true" autoCompleteField="province_name" lovHeight="500" lovService="pur.public.fnd_region_province_by_country_lov?country_code=-1" lovWidth="500" readOnly="true" required="true" title="PUR_VENDORS.REGISTERED_PROVINCE_ID">
                        <a:mapping>
                            <a:map from="province_id" to="registered_province_id"/>
                            <a:map from="province_name" to="registered_province_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="registered_city_id"/>
                    <a:field name="registered_city_desc" autoComplete="true" autoCompleteField="city_name" lovHeight="500" lovService="pur.public.fnd_region_city_by_province_lov?province_id=-1" lovWidth="500" readOnly="true" required="true" title="PUR_VENDORS.REGISTERED_CITY_ID">
                        <a:mapping>
                            <a:map from="city_id" to="registered_city_id"/>
                            <a:map from="city_name" to="registered_city_desc"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="legal_representative" required="true"/>
                    <a:field name="tax_id_number" required="true"/>
                    <a:field name="taxpayer_type"/>
                    <a:field name="taxpayer_type_name" displayField="code_value_name" options="pur5610_taxpayer_type_ds" required="true" returnField="taxpayer_type" valueField="code_value"/>
                    <a:field name="business_license_number" required="true"/>
                    <a:field name="business_license_end_date" required="true" validator="business_license_validate"/>
                    <a:field name="business_license_authority" required="true"/>
                    <a:field name="operating_license_end_date" validator="operating_license_validate"/>
                    <a:field name="registered_capital" required="true"/>
                    <a:field name="registered_currency_code"/>
                    <a:field name="registered_currency_name" lovHeight="510" lovLabelWidth="100" lovService="pur.PUR5610.pur_currency_code_lov" lovWidth="650" required="true" title="CURRENCY_SELECTION">
                        <a:mapping>
                            <a:map from="currency_code" to="registered_currency_code"/>
                            <a:map from="currency_name" to="registered_currency_name"/>
                        </a:mapping>
                    </a:field>
                    <a:field name="national_organization_code"/>
                    <a:field name="official_email" required="true" validator="pur5610_email_validator"/>
                    <a:field name="factory_nature"/>
                    <a:field name="factory_nature_name" displayField="code_value_name" options="pur5610_factory_nature_ds" returnField="factory_nature" valueField="code_value"/>
                    <a:field name="iso9001_flag"/>
                    <a:field name="iso9001_flag_display" displayField="code_value_name" options="pur5610_certificate_ds" returnField="iso9001_flag" valueField="code_value"/>
                    <a:field name="iso14000_flag"/>
                    <a:field name="iso14000_flag_display" displayField="code_value_name" options="pur5610_certificate_ds" returnField="iso14000_flag" valueField="code_value"/>
                    <a:field name="vendor_abstract"/>
                    <a:field name="business_scope"/>
                    <a:field name="agent_brand"/>
                    <a:field name="comments"/>
                </a:fields>
                <a:events>
                    <a:event name="update" handler="pur5610_register_vendor_update_handler"/>
                    <a:event name="query" handler="pur5610_query_handler"/>
                    <a:event name="load" handler="pur5610_load_handler"/>
                </a:events>
            </a:dataSet>
        </a:dataSets>
        <div class="head">
            <div class="logo" style="cursor:pointer;">
                <img onclick="window.location.href=&apos;${/request/@context_path}/&apos; " src="../../../images/logo.jpg"/>
            </div>
            <div class="hr_top">
                <hr/>
            </div>
        </div>
        <div id="main" style="padding-top:10px;">
            <div id="progress_form">
                <ul id="progress_bar">
                    <li>
                        <div class="before_finished"><![CDATA[1]]></div>
                        <div class="after_finished"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.ENTER_INVITATION_CODE}]]></div>
                    </li>
                    <li>
                        <div class="before_finished"><![CDATA[2]]></div>
                        <div class="after_finished"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.READ_REG_INSTRUCTIONS}]]></div>
                    </li>
                    <li>
                        <div class="before_finished"><![CDATA[3]]></div>
                        <div class="after"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.ENTER_COMPANY_INFO}]]></div>
                    </li>
                    <li>
                        <div class="before"><![CDATA[4]]></div>
                        <div class="after"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.COMPLETE_BUSINESS_INFO}]]></div>
                    </li>
                    <li>
                        <div class="before"><![CDATA[5]]></div>
                        <div class="after"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.UPLOAD_FILES}]]></div>
                    </li>
                    <li>
                        <div class="before"><![CDATA[6]]></div>
                        <div class="after"/>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.PENDING_APPROVAL}]]></div>
                    </li>
                    <li>
                        <div class="before"><![CDATA[7]]></div>
                        <div><![CDATA[${l:PUR5610_VENDOR_REG.APPROVAL_END}]]></div>
                    </li>
                </ul>
            </div>
            <div class="main_top">
                <span class="main_title"><![CDATA[${l:PUR5610_VENDOR_REG.BASIC_INFO}]]></span>
            </div>
            <div class="main_content">
                <a:vBox className="main_vbox">
                    <a:hBox labelWidth="120">
                        <a:textField name="full_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYSTEM_VENDORS.FULL_NAME" width="706"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:comboBox name="vendor_category_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.VENDOR_CATEGORY"/>
                        <a:comboBox name="vendor_type_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_REGISTER_VENDOR_REJECT_DETAIL.SUPPLIER_CATEGORY"/>
                        <a:textField name="legal_representative" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYS_VENDOR_BASICS.LEGAL_REPRESENTATIVE"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="national_organization_code" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.NATIONAL_ORGANIZATION_CODE" typeCase="UPPER"/>
                        <a:numberField name="d_b_code" allowDecimals="false" allowNegative="false" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.D_B_CODE"/>
                        <a:comboBox name="enterprise_nature_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.ENTERPRISE_NATURE"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:lov name="registered_country_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.REGISTERED_COUNTRY_CODE" readOnly="false"/>
                        <a:lov name="registered_province_desc" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.REGISTERED_PROVINCE_ID" readOnly="false"/>
                        <a:lov name="registered_city_desc" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.REGISTERED_CITY_ID" readOnly="false"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="tax_id_number" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.TAX_ID_NUMBER"/>
                        <a:comboBox name="taxpayer_type_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYSTEM_VENDERS.TAXPAYER_IDENTIFICATION"/>
                        <a:textField name="business_license_number" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.BUSINESS_LICENSE_NUMBER"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:datePicker name="business_license_end_date" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.BUSINESS_LICENSE_END_DATE"/>
                        <a:checkBox name="business_license_type" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.BUSINESS_LICENSE_TYPE" readOnly="false" width="150"/>
                        <a:textField name="business_license_authority" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.BUSINESS_LICENSE_AUTHORITY"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="operating_license_number" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.OPERATING_LICENSE_NUMBER"/>
                        <a:datePicker name="operating_license_end_date" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.OPERATING_LICENSE_END_DATE"/>
                        <a:numberField name="registered_capital" allowDecimals="true" allowFormat="true" bindTarget="pur5610_register_vendor_ds" decimalPrecision="2" prompt="PUR_SYSTEM_VENDERS.REGISTERED_CAPITAL"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:lov name="registered_currency_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.REGISTERED_CURRENCY_CODE"/>
                        <a:textField name="post_code" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDOR_SITES.POST_CODE"/>
                        <a:textField name="zone_code" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.ZONE_CODE"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="fax_no" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.FAX_NO"/>
                        <a:textField name="official_telephone" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYSTEM_VENDERS.OFFICAL_TELEPHONE"/>
                        <a:textField name="customer_service_phone" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.CUSTOMER_SERVICE_PHONE"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="official_email" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.OFFICIAL_EMAIL" width="706"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textField name="website" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.WEBSITE" width="706"/>
                    </a:hBox>
                </a:vBox>
            </div>
            <div class="main_top">
                <span class="main_title"><![CDATA[${l:PUR5610_VENDOR_REG.FINANCIAL_STATUS}]]></span>
            </div>
            <div class="main_content">
                <div style="float:left;margin-left:125px;">
                    <table id="pur5610_finance_table" style="border-collapse:collapse;" width="700">
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.YEAR}]]></td>
                            <td class="td_canot_edit" width="120"/>
                            <td class="td_canot_edit" width="120"/>
                            <td class="td_canot_edit" width="120"/>
                            <td class="td_canot_edit" width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.TOTAL_ASSETS}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.TOTAL_DEBT}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.LIQUID_ASSETS}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.LIQUID_DEBT}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.REVENUE}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                        <tr height="20">
                            <td class="td_canot_edit" width="120"><![CDATA[${l:PUR5610_VENDOR_REG.NET_PROFIT}]]></td>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                            <td width="120"/>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="main_top">
                <span class="main_title"><![CDATA[${l:PUR5610_VENDOR_REG.OTHER_INFO}]]></span>
            </div>
            <div class="main_content">
                <a:vBox className="main_vbox">
                    <a:hBox labelWidth="120">
                        <a:comboBox name="factory_nature_name" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYSTEM_VENDERS.FACTORY_NATURE"/>
                        <a:numberField name="factory_area" allowDecimals="true" bindTarget="pur5610_register_vendor_ds" decimalPrecision="2" prompt="PUR_SYSTEM_VENDERS.FACTORY_AREA"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:comboBox name="iso9001_flag_display" bindTarget="pur5610_register_vendor_ds" prompt="PUR5610_VENDOR_REG.ISO9001"/>
                        <a:comboBox name="iso14000_flag_display" bindTarget="pur5610_register_vendor_ds" prompt="PUR5610_VENDOR_REG.ISO14000"/>
                        <a:textField name="other_certificate" bindTarget="pur5610_register_vendor_ds" prompt="PUR5610_VENDOR_REG.OTHER_AUTHENTICATION"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textArea name="vendor_abstract" bindTarget="pur5610_register_vendor_ds" prompt="PUR_SYSTEM_VENDERS.VENDOR_ABSTRUCT" width="702"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textArea name="business_scope" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.BUSINESS_SCOPE" width="702"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textArea name="agent_brand" bindTarget="pur5610_register_vendor_ds" prompt="PUR_VENDORS.AGENT_BRAND" width="702"/>
                    </a:hBox>
                    <a:hBox labelWidth="120">
                        <a:textArea name="comments" bindTarget="pur5610_register_vendor_ds" prompt="PUR_REGISTER_VENDORS.COMMENTS" width="702"/>
                    </a:hBox>
                </a:vBox>
            </div>
            <div class="skip">
                <a:button click="pur5610_basic_last_page" style="height:20px;float:left;margin-left:550px;margin-right:30px;" text="PROMPT.LAST_STEP" width="60"/>
                <a:button click="pur5610_basic_save" style="height:20px;float:left;margin-right:30px;" text="HAP_SAVE" width="60"/>
                <a:button click="pur5610_basic_next_page" style="height:20px;float:left;" text="PROMPT.NEXT_STEP" width="60"/>
            </div>
            <div class="hr_footer">
                <hr/>
            </div>
            <div class="footer">
                <p><![CDATA[${l:HAND_COMPANY_SITE_INFO}]]></p>
                <p><![CDATA[${l:HAND_COMPANY_CONTACT_INFO}]]></p>
                <p><![CDATA[沪ICP备05019135号 联系我们 © Copyright Hand China Co.,Ltd. Powered by ViewLine]]></p>
            </div>
        </div>
    </a:view>
</a:screen>
