<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: weiqinglong
    $Date: 2017-06-29 20:39:47  
    $Revision: 1.0  
    $Purpose: 云级；系统消息查询，系统消息
-->
<a:screen xmlns:a="http://www.aurora-framework.org/application">
    <a:init-procedure/>
    <a:view>
        <a:link id="sys7030_user_message_detail_link" url="${/request/@context_path}/modules/sys/SYS7030/sys_user_message_details.screen"/>
        <a:link id="sys7030_email_resend_link" model="sys.SYS7030.sys_mailing_list_ht" modelaction="execute"/>
        <style><![CDATA[[
        	.item-grid-wrap{
        	    float:left;
        	}
        ]]></style>
        <script><![CDATA[
            function sys7030_emails_ht_query() {
                $('sys7030_emails_ht_result_ds').query();
            }
            
            function sys7030_emails_query() {
                $('sys7030_emails_result_ds').query();
            }
            
            function sys7030_messages_query() {
                $('sys7030_messages_result_ds').query();
            }
            
            function sys7030_sms_sent_query() {
                $('sys7030_sms_sent_result_ds').query();
            }
            
            function sys7030_app_message_sent_query() {
                $('sys7030_app_message_sent_result_ds').query();
            }
            
            function sys7030_app_message_sent_ht_query() {
                $('sys7030_app_message_sent_ht_result_ds').query();
            }
            
            function sys7030_app_errors_query() {
                $('sys7030_app_errors_result_ds').query();
            }
            
            function on_sys7030_app_errors_query_ds_add(dataSet, record, index) {
                var date = new Date();
                var y = date.getFullYear();
                var m = date.getMonth() + 1;
                if (m < 10) {
                    m = '0' + m;
                }
            
                var d = date.getDate();
                if (d < 10) {
                    d = '0' + d;
                }
                var today = y + '-' + m + '-' + d;
            
                record.set('message_date_from', today);
                record.set('message_date_to', today);
            }
            
            function sys7030_messages_grid_renderer(value, record, name) {
                if (name == 'details' && record.get('push_object_type') == 'SINGLE') {
                    var message_id = record.get('message_id');
                    return '<a href="javascript:sys7030_user_message_detail(' + message_id + ')">接收人明细 </a>';
                }
                return '';
            }
            
            function sys7030_user_message_detail(message_id) {
                new Aurora.Window({
                    id: 'sys7030_user_message_detail_win',
                    title: '接收人明细',
                    url: $('sys7030_user_message_detail_link').getUrl() + '?message_id=' + message_id,
                    fullScreen: false,
                    width: 670,
                    height: 400
                });
            }
            
            function resend_email(mailing_list_id) {
                var record = $('sys7030_emails_ht_result_ds').find('mailing_list_id', mailing_list_id);
                Aurora.showConfirm('${l:PROMPT}', '确定重新发送此邮件吗？', function() {
                    Aurora.Masker.mask(Ext.getBody());
                    Aurora.request({
                        url: $('sys7030_email_resend_link').getUrl(),
                        para: {
                            'notify_record_id': record.get('notify_record_id'),
                            'mail_to': record.get('mail_to'),
                            'mail_cc': record.get('mail_cc'),
                            'subject': record.get('subject'),
                            'body': record.get('body')
                        },
                        success: function() {
                            Aurora.Masker.unmask(Ext.getBody());
                            Aurora.showMessage('${l:PROMPT}', '邮件已重新发送。');
                        },
                        error: function() {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        failure: function() {
                            Aurora.Masker.unmask(Ext.getBody());
                        },
                        scope: this
                    });
                }, null, null, 80);
            }
            
            function sys7030_emails_ht_result_ds_load(dataSet) {
                if (dataSet.getAll().length == 0) {
                    window.document.getElementById('emails_ht_id').innerHTML = '';
                }
            }
            
            function sys7030_emails_ht_result_ds_indexchange(dataSet, record) {
                var html = window.document.getElementById('emails_ht_id');
                var height = document.getElementById('sys7030_emails_ht_grid_wrap').offsetHeight;
                html.style.backgroundColor = '#d0e6f5';
                html.style.height = height + 'px';
                html.style.overflowY = 'auto';
                var text = '<button onclick="resend_email(' + record.get('mailing_list_id') + ')" style="margin-top:15px;background-color: #19a2d5;cursor:pointer;border: 1px solid #19a2d5;color:#fff;margin-left:20px;width:100px;height:50px;font-size:16px;">重新发送</button><p style="font-weight:bold;margin-top:0;padding:30px 0 0 20px;">主题：' + record.get('subject') + '</p><p><t style="font-weight:bold;padding:0 0 0 20px;">收件人：</t><t>' + record.get('mail_to') + '</p><p><t style="font-weight:bold;padding:0 0 0 20px;">时间：</t><t>' + record.get('creation_date_desc') + '</t></p><p style="font-weight:bold;padding:0 20px 0 20px;">正文：</p>' + '<div style="padding:0 20px 0 20px">' + record.get('body') + '</div>';
                html.innerHTML = text;
                html.style.display = 'block';
            }
            
            function sys7030_emails_result_ds_load(dataSet) {
                if (dataSet.getAll().length == 0) {
                    window.document.getElementById('emails_id').innerHTML = '';
                }
            }
            
            function sys7030_emails_result_ds_indexchange(dataSet, record) {
                var html = window.document.getElementById('emails_id');
                var height = document.getElementById('sys7030_emails_grid_wrap').offsetHeight;
                html.style.backgroundColor = '#d0e6f5';
                html.style.height = height + 'px';
                html.style.overflowY = 'auto';
                var note = record.get('note');
                if (note == 'undefined' || note == '' || note == null) {
                    note = '';
                }
                var text = '<p style="font-weight:bold;margin-top:0;padding:30px 0 0 20px;">主题：' + record.get('subject') + '</p><p><t style="font-weight:bold;padding:0 0 0 20px;">收件人：</t><t>' + record.get('mail_to') + '</p><p><t style="font-weight:bold;padding:0 0 0 20px;">时间：</t><t>' + record.get('creation_date_desc') + '</t></p><p style="font-weight:bold;padding:0 20px 0 20px;">正文：</p>' + record.get('body') + '<br/><p><t style="font-weight:bold;padding:0 20px 0 20px;">错误消息：</t><t>' + note + '</t></p>';
                html.innerHTML = text;
                html.style.display = 'block';
            }
        ]]></script>
        <a:dataSets>
            <a:dataSet id="sys7030_push_object_type_ds">
                <a:datas>
                    <a:record code_value="ALL" code_value_name="全部用户"/>
                    <a:record code_value="SINGLE" code_value_name="单一用户"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet id="sys7030_sms_status_ds">
                <a:datas>
                    <a:record code_value="N" code_value_name="未发送"/>
                    <a:record code_value="P" code_value_name="处理中"/>
                    <a:record code_value="E" code_value_name="错误"/>
                    <a:record code_value="Y" code_value_name="已发送"/>
                </a:datas>
            </a:dataSet>
            <a:dataSet id="sys7030_emails_ht_query_ds"/>
            <a:dataSet id="sys7030_emails_ht_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.sys_mailing_list_ht" queryDataSet="sys7030_emails_ht_query_ds" selectable="true">
                <a:events>
                    <a:event name="load" handler="sys7030_emails_ht_result_ds_load"/>
                    <a:event name="indexchange" handler="sys7030_emails_ht_result_ds_indexchange"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="sys7030_emails_query_ds"/>
            <a:dataSet id="sys7030_emails_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.sys_mailing_list" queryDataSet="sys7030_emails_query_ds" selectable="true">
                <a:events>
                    <a:event name="load" handler="sys7030_emails_result_ds_load"/>
                    <a:event name="indexchange" handler="sys7030_emails_result_ds_indexchange"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="sys7030_messages_query_ds" autoCreate="true">
                <a:fields>
                    <a:field name="push_object_type"/>
                    <a:field name="push_object_type_desc" displayField="code_value_name" options="sys7030_push_object_type_ds" returnField="push_object_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="sys7030_messages_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.sys_messages" queryDataSet="sys7030_messages_query_ds" selectable="true">
                <a:fields>
                    <a:field name="read_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="message_content" readOnly="true"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="sys7030_sms_sent_query_ds">
                <a:fields>
                    <a:field name="send_flag"/>
                    <a:field name="send_flag_desc" displayField="code_value_name" options="sys7030_sms_status_ds" returnField="send_flag" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="sys7030_sms_sent_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.sys_sms_send_list" queryDataSet="sys7030_sms_sent_query_ds" selectable="true"/>
            <a:dataSet id="sys7030_app_message_sent_query_ds"/>
            <a:dataSet id="sys7030_app_message_sent_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.app_message_send_list" queryDataSet="sys7030_app_message_sent_query_ds" selectable="true"/>
            <a:dataSet id="sys7030_app_message_sent_ht_query_ds"/>
            <a:dataSet id="sys7030_app_message_sent_ht_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.app_message_send_ht_list" queryDataSet="sys7030_app_message_sent_ht_query_ds" selectable="true">
                <a:fields>
                    <a:field name="read_flag" checkedValue="Y" uncheckedValue="N"/>
                </a:fields>
            </a:dataSet>
            <a:dataSet id="sys7030_app_errors_query_ds">
                <a:fields>
                    <a:field name="message_date_from" required="true"/>
                    <a:field name="message_date_to" required="true"/>
                </a:fields>
                <a:events>
                    <a:event name="add" handler="on_sys7030_app_errors_query_ds_add"/>
                </a:events>
            </a:dataSet>
            <a:dataSet id="sys7030_app_errors_result_ds" autoCount="true" autoPageSize="true" autoQuery="false" model="sys.SYS7030.sys_raise_app_errors" queryDataSet="sys7030_app_errors_query_ds" selectable="true">
                <a:fields>
                    <a:field name="read_flag" checkedValue="Y" uncheckedValue="N"/>
                    <a:field name="message_content" readOnly="true"/>
                    <a:field name="push_object_type"/>
                    <a:field name="push_object_type_desc" displayField="code_value_name" options="sys7030_push_object_type_ds" returnField="push_object_type" valueField="code_value"/>
                </a:fields>
            </a:dataSet>
        </a:dataSets>
        <a:screenBody>
            <a:tabPanel marginWidth="30">
                <a:tabs>
                    <a:tab prompt="邮件已发列表" selected="true" width="120">
                        <a:queryForm bindTarget="sys7030_emails_ht_query_ds" resultTarget="sys7030_emails_ht_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="subject" bindTarget="sys7030_emails_ht_query_ds" prompt="邮件主题">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="body" bindTarget="sys7030_emails_ht_query_ds" prompt="邮件内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="mail_to" bindTarget="sys7030_emails_ht_query_ds" prompt="接收地址">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:datePicker name="creation_date_from" bindTarget="sys7030_emails_ht_query_ds" prompt="发送时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_ht_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="creation_date_to" bindTarget="sys7030_emails_ht_query_ds" prompt="发送时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_ht_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_emails_ht_grid" bindTarget="sys7030_emails_ht_result_ds" marginHeight="160" navBar="true" style="margin-left:10px;float:left;" width="680">
                            <a:columns>
                                <a:column name="subject" prompt="邮件主题" width="200"/>
                                <a:column name="mail_to" prompt="接收地址" width="300"/>
                                <a:column name="creation_date_desc" align="center" prompt="发送时间" width="130"/>
                            </a:columns>
                        </a:grid>
                        <div id="emails_ht_id" style="margin-right:20px;"/>
                    </a:tab>
                    <a:tab prompt="邮件待发列表" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_emails_query_ds" resultTarget="sys7030_emails_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="subject" bindTarget="sys7030_emails_query_ds" prompt="邮件主题">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="body" bindTarget="sys7030_emails_query_ds" prompt="邮件内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="mail_to" bindTarget="sys7030_emails_query_ds" prompt="接收地址">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:datePicker name="creation_date_from" bindTarget="sys7030_emails_query_ds" prompt="发送时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="creation_date_to" bindTarget="sys7030_emails_query_ds" prompt="发送时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_emails_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_emails_grid" bindTarget="sys7030_emails_result_ds" marginHeight="160" navBar="true" style="margin-left:10px;float:left;" width="680">
                            <a:columns>
                                <a:column name="subject" prompt="邮件主题" width="200"/>
                                <a:column name="mail_to" prompt="接收地址" width="300"/>
                                <a:column name="error_times" align="right" prompt="错误次数" width="60"/>
                                <a:column name="note" prompt="错误信息" width="300"/>
                                <a:column name="creation_date_desc" align="center" prompt="发送时间" width="130"/>
                            </a:columns>
                        </a:grid>
                        <div id="emails_id" style="display:none;margin-left:700px;"/>
                    </a:tab>
                    <a:tab prompt="系统消息" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_messages_query_ds" resultTarget="sys7030_messages_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="message_title" bindTarget="sys7030_messages_query_ds" prompt="消息标题">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="message_content" bindTarget="sys7030_messages_query_ds" prompt="消息内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:datePicker name="message_time_from" bindTarget="sys7030_messages_query_ds" prompt="消息时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="message_time_to" bindTarget="sys7030_messages_query_ds" prompt="消息时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:comboBox name="push_object_type_desc" bindTarget="sys7030_messages_query_ds" prompt="接收对象">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:comboBox>
                                    <a:textField name="user_code_name" bindTarget="sys7030_messages_query_ds" emptyText="账号和名称模糊查询" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="user_name" bindTarget="sys7030_messages_query_ds" emptyText="账号精确查询" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="user_desc" bindTarget="sys7030_messages_query_ds" emptyText="名称精确查询" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_messages_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_messages_grid" bindTarget="sys7030_messages_result_ds" marginHeight="160" marginWidth="70" navBar="true" width="1000">
                            <a:columns>
                                <a:column name="message_title" prompt="消息标题" width="100"/>
                                <a:column name="message_content" editor="sys7030_messages_grid_ta" prompt="消息内容" width="300"/>
                                <a:column name="message_time" align="center" prompt="消息时间" width="100"/>
                                <a:column name="push_object_type_desc" align="center" prompt="接收对象" width="80"/>
                                <a:column name="details" align="center" prompt="接收人明细" renderer="sys7030_messages_grid_renderer" width="60"/>
                            </a:columns>
                            <a:editors>
                                <a:textArea id="sys7030_messages_grid_ta" readOnly="true"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="短信列表" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_sms_sent_query_ds" resultTarget="sys7030_sms_sent_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="sms_note" bindTarget="sys7030_sms_sent_query_ds" prompt="短信文本">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="sms_send_to" bindTarget="sys7030_sms_sent_query_ds" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:comboBox name="send_flag_desc" bindTarget="sys7030_sms_sent_query_ds" prompt="状态">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:comboBox>
                                    <a:textField name="error_times" bindTarget="sys7030_sms_sent_query_ds" prompt="错误次数">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:datePicker name="creation_date_from" bindTarget="sys7030_sms_sent_query_ds" prompt="发送时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="creation_date_to" bindTarget="sys7030_sms_sent_query_ds" prompt="发送时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_sms_sent_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_sms_sent_grid" bindTarget="sys7030_sms_sent_result_ds" marginHeight="160" marginWidth="70" navBar="true" width="1000">
                            <a:columns>
                                <a:column name="sms_note" editor="sys7030_sms_sent_grid_ta" prompt="短信文本" width="150"/>
                                <a:column name="sms_send_to" align="center" prompt="接收人" width="100"/>
                                <a:column name="send_flag_desc" align="center" prompt="状态" width="60"/>
                                <a:column name="error_times" align="right" prompt="错误次数" width="60"/>
                                <a:column name="creation_date_desc" align="center" prompt="发送时间" width="100"/>
                            </a:columns>
                            <a:editors>
                                <a:textArea id="sys7030_sms_sent_grid_ta" readOnly="true"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="APP消息待发列表" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_app_message_sent_query_ds" resultTarget="sys7030_app_message_sent_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="title" bindTarget="sys7030_app_message_sent_query_ds" prompt="消息主题">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="content" bindTarget="sys7030_app_message_sent_query_ds" prompt="消息内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="business_group" bindTarget="sys7030_app_message_sent_query_ds" prompt="集团代码">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="business_group_name" bindTarget="sys7030_app_message_sent_query_ds" prompt="集团名称">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:textField name="user_name" bindTarget="sys7030_app_message_sent_query_ds" prompt="接收账号">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="user_desc" bindTarget="sys7030_app_message_sent_query_ds" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:datePicker name="creation_date_from" bindTarget="sys7030_app_message_sent_query_ds" prompt="发送时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="creation_date_to" bindTarget="sys7030_app_message_sent_query_ds" prompt="发送时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_app_message_sent_grid" bindTarget="sys7030_app_message_sent_result_ds" marginHeight="160" marginWidth="70" navBar="true" width="1000">
                            <a:columns>
                                <a:column name="title" editor="sys7030_app_message_sent_grid_ta" prompt="消息主题" width="100"/>
                                <a:column name="content" editor="sys7030_app_message_sent_grid_ta" prompt="消息内容" width="150"/>
                                <a:column name="business_group" align="center" prompt="集团代码" width="80"/>
                                <a:column name="business_group_name" prompt="集团名称" width="200"/>
                                <a:column name="user_name" align="center" prompt="接收账号" width="80"/>
                                <a:column name="user_desc" prompt="接收人" width="80"/>
                                <a:column name="creation_date_desc" align="center" prompt="发送时间" width="100"/>
                            </a:columns>
                            <a:editors>
                                <a:textArea id="sys7030_app_message_sent_grid_ta" readOnly="true"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="APP消息已发列表" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_app_message_sent_ht_query_ds" resultTarget="sys7030_app_message_sent_ht_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="title" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="消息主题">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="content" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="消息内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="business_group" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="集团代码">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="business_group_name" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="集团名称">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:textField name="user_name" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="接收账号">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="user_desc" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="接收人">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:datePicker name="push_date_from" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="接收时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="push_date_to" bindTarget="sys7030_app_message_sent_ht_query_ds" prompt="接收时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_message_sent_ht_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_app_message_sent_ht_grid" bindTarget="sys7030_app_message_sent_ht_result_ds" marginHeight="160" marginWidth="70" navBar="true" width="1000">
                            <a:columns>
                                <a:column name="title" editor="sys7030_app_message_sent_ht_grid_ta" prompt="消息主题" width="100"/>
                                <a:column name="content" editor="sys7030_app_message_sent_ht_grid_ta" prompt="消息内容" width="150"/>
                                <a:column name="business_group" align="center" prompt="集团代码" width="80"/>
                                <a:column name="business_group_name" prompt="集团名称" width="200"/>
                                <a:column name="user_name" align="center" prompt="接收账号" width="80"/>
                                <a:column name="user_desc" prompt="接收人" width="80"/>
                                <a:column name="push_date_desc" align="center" prompt="接收时间" width="100"/>
                                <a:column name="read_flag" prompt="已读" width="80"/>
                            </a:columns>
                            <a:editors>
                                <a:textArea id="sys7030_app_message_sent_ht_grid_ta" readOnly="true"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                    <a:tab prompt="系统错误信息" selected="false" width="120">
                        <a:queryForm bindTarget="sys7030_app_errors_query_ds" resultTarget="sys7030_app_errors_result_ds" style="width:100%;border:none">
                            <a:formToolBar>
                                <a:hBox labelWidth="100">
                                    <a:textField name="message_code" bindTarget="sys7030_app_errors_query_ds" prompt="消息代码">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="message" bindTarget="sys7030_app_errors_query_ds" prompt="消息内容">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:datePicker name="message_date_from" bindTarget="sys7030_app_errors_query_ds" prompt="消息时间从">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:datePicker>
                                    <a:datePicker name="message_date_to" bindTarget="sys7030_app_errors_query_ds" prompt="消息时间至">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:datePicker>
                                </a:hBox>
                            </a:formToolBar>
                            <a:formBody>
                                <a:hBox labelWidth="100">
                                    <a:textField name="package_name" bindTarget="sys7030_app_errors_query_ds" prompt="包名">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:textField>
                                    <a:textField name="procedure_function_name" bindTarget="sys7030_app_errors_query_ds" prompt="过程/方法名">
                                        <a:events>
                                            <a:event name="enterdown" handler="sys7030_app_errors_query"/>
                                        </a:events>
                                    </a:textField>
                                </a:hBox>
                            </a:formBody>
                        </a:queryForm>
                        <a:grid id="sys7030_app_errors_grid" bindTarget="sys7030_app_errors_result_ds" marginHeight="160" marginWidth="70" navBar="true" width="1000">
                            <a:columns>
                                <a:column name="message_code" editor="sys7030_app_errors_grid_ta" prompt="消息代码" width="100"/>
                                <a:column name="message" editor="sys7030_app_errors_grid_ta" prompt="消息内容" width="300"/>
                                <a:column name="message_date" align="center" prompt="消息时间" width="100"/>
                                <a:column name="package_name" prompt="包名" width="100"/>
                                <a:column name="procedure_function_name" prompt="过程/方法名" width="100"/>
                                <a:column name="user_name" prompt="触发用户" width="120"/>
                            </a:columns>
                            <a:editors>
                                <a:textArea id="sys7030_app_errors_grid_ta" readOnly="true"/>
                            </a:editors>
                        </a:grid>
                    </a:tab>
                </a:tabs>
            </a:tabPanel>
        </a:screenBody>
    </a:view>
</a:screen>
