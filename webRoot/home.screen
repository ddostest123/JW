<?xml version="1.0" encoding="UTF-8"?>
<!--
    $Author: pccold  
    $Date: 2016年2月26日 11:13:44  
    $Revision: 1.0  
    $Purpose: 定制首页的入口页面
-->
<a:screen xmlns:msg="aurora.application.features.msg" xmlns:p="uncertain.proc" xmlns:a="http://www.aurora-framework.org/application" xmlns:s="aurora.plugin.script" trace="true">
    <a:init-procedure>
        <s:server-script><![CDATA[
        	importClass(Packages.aurora.service.ServiceInstance);
        	
			var dataArrayString = "[['2C843598B3FC04A2E4C21F8D5ADF49B5','tony_test','2C843598B3FC04A2E4C21F8D5ADF49B5'],['2228D60A4BEC44D7107B5306D7E23E0B','netcore','2228D60A4BEC44D7107B5306D7E23E0B'],['6F726F20F9D6ECA181F74AD0CB1F928A','click','6F726F20F9D6ECA181F74AD0CB1F928A'],['13E369AC7245E12C601EE8E91598E59B','pkuph','13E369AC7245E12C601EE8E91598E59B'],['2A8EF68F512BC7A8C68D74FA4958ACD8','njly','2A8EF68F512BC7A8C68D74FA4958ACD8'],['67C9432212604DF31CA8B80F7E9A4DE6','pechoin','67C9432212604DF31CA8B80F7E9A4DE6'],['80A822B2FBF23666F54827E9BDB5702D','absen','80A822B2FBF23666F54827E9BDB5702D'],['2C843598B3FC04A2E4C21F8D5ADF49B5','mytest','2C843598B3FC04A2E4C21F8D5ADF49B5'],['17D99C933D3E0D4080172EB28016A257','员工之家','17D99C933D3E0D4080172EB28016A257'],['BD7A0240A1B0BB446B75290F222060AB','wuzheng','BD7A0240A1B0BB446B75290F222060AB'],['495C912984A7350B1EA348469053A3C9','gomrotest','495C912984A7350B1EA348469053A3C9'],['19B96431E5EA5D92AE64791C9458B741','zzmetro','19B96431E5EA5D92AE64791C9458B741'],['96145C4999B97BC6577F84A0BFB28B84','chinanhl','96145C4999B97BC6577F84A0BFB28B84'],['EAC52E1C3BF263F818F42B05919A605D','danz','EAC52E1C3BF263F818F42B05919A605D'],['89B1C166C53E7A28935E7C5B61EE0700','tylg','89B1C166C53E7A28935E7C5B61EE0700'],['D283278E13D0BB7620167B998BACDF8E','orinko','D283278E13D0BB7620167B998BACDF8E'],['CBAE7AB6733779CC59A8C0A89648D056','ymtc','CBAE7AB6733779CC59A8C0A89648D056'],['55F3D0B30FBE3E2B699E4159112440D6','solareast','55F3D0B30FBE3E2B699E4159112440D6'],['56F91AE7F3FD7ECA451AD356FD86AF22','morimatsu','56F91AE7F3FD7ECA451AD356FD86AF22'],['158A8F8D55503BC1F0E682AD75245BBE','tn','158A8F8D55503BC1F0E682AD75245BBE'],['9868F741AE7FE433801F7ECBEF4CEC7C','yixin','9868F741AE7FE433801F7ECBEF4CEC7C'],['C80A2F188B8251E2DDE4BD66A5102452','dfam','C80A2F188B8251E2DDE4BD66A5102452'],['6E03F5F82B02D0134576884E1B65289C','taier','6E03F5F82B02D0134576884E1B65289C'],['453C6446CF8D396276920AC046181EF2','shtn','453C6446CF8D396276920AC046181EF2'],['E694AC36299305AEDF84CFA37E8BDD4D','客户订单确认','E694AC36299305AEDF84CFA37E8BDD4D'],['697018601B79BC8C8BF17B4BD062F0C7','chinawanda','697018601B79BC8C8BF17B4BD062F0C7'],['8AF0EB96C7CFF11F043CE24F28E51356','brc','8AF0EB96C7CFF11F043CE24F28E51356'],['7C1522426CDAEEE5BFFA16C40D5B1EB3','woer','7C1522426CDAEEE5BFFA16C40D5B1EB3'],['54E1C9105491260CDE62FF2B32BE1D88','giti','54E1C9105491260CDE62FF2B32BE1D88'],['D1FD7F35B188454E84BC573975EFFD1E','xxdz','D1FD7F35B188454E84BC573975EFFD1E'],['D1FD7F35B188454E84BC573975EFFD1E','test0412','D1FD7F35B188454E84BC573975EFFD1E'],['13DC978C671C46958B51997572C3CC26','yonghui','13DC978C671C46958B51997572C3CC26'],['D2923C7C0421376C49C917B79371AB2E','city','D2923C7C0421376C49C917B79371AB2E'],['33B21C43466B6258E5083A015D11959E','nesi','33B21C43466B6258E5083A015D11959E'],['729B074728844EC0748CE078A5E012E9','wlj','729B074728844EC0748CE078A5E012E9'],['E7392927F38DF9B7D05FB982F73D7014','2017','E7392927F38DF9B7D05FB982F73D7014'],['CC8EE9BDB07EB0E97505A4D42B1E217E','wmz','CC8EE9BDB07EB0E97505A4D42B1E217E'],['42515E6B7DBA70D7EBDD6BF93FE6C6AC','hlbdc','42515E6B7DBA70D7EBDD6BF93FE6C6AC'],['3EEDD29B43E3E087CF59A07C93978718','tgood','3EEDD29B43E3E087CF59A07C93978718'],['6A496FB4C214FA0925D4396AAAD7EE25','prinxchengshan','6A496FB4C214FA0925D4396AAAD7EE25'],['073450033725CDF8A41B56C77394F5AB','haikegroup','073450033725CDF8A41B56C77394F5AB'],['9868F741AE7FE433801F7ECBEF4CEC7C','skp','9868F741AE7FE433801F7ECBEF4CEC7C'],['CC638788116855A09767296E821035FB','skp','CC638788116855A09767296E821035FB'],['33A7A6EC85D0ACA62FFFC5CE96179567','test170703','33A7A6EC85D0ACA62FFFC5CE96179567'],['5F59F8B06C09C50DE0EC5619750C4573','test17070302','5F59F8B06C09C50DE0EC5619750C4573'],['ABA364D8B6A3E022367CB84A595EC26E','sinochemintl','ABA364D8B6A3E022367CB84A595EC26E'],['0C03152DE6BDB718CF79E1FE7B4C9737','creat','0C03152DE6BDB718CF79E1FE7B4C9737'],['55A0071FDD647F8131169BA9F20506A7','sanan','55A0071FDD647F8131169BA9F20506A7'],['2A3E3BB91601BEBB5D22E6C4075B6E7D','wm-motor','2A3E3BB91601BEBB5D22E6C4075B6E7D'],['4A6D1E490CDCAE5DEBFD09C7329AA787','aldex','4A6D1E490CDCAE5DEBFD09C7329AA787'],['2B306C1F4FB2E79CE7616C1FC5DF3FEB','ruxia.yan','2B306C1F4FB2E79CE7616C1FC5DF3FEB'],['808AB14D9458DC0F8EAAEEA6DDE59CE1','mzdp','808AB14D9458DC0F8EAAEEA6DDE59CE1'],['770520C17B642638772F7525DE1A3A26','yihaikerry','770520C17B642638772F7525DE1A3A26'],['F832EF009CBBEB9416F017CEAA30E653','proya','F832EF009CBBEB9416F017CEAA30E653'],['68C537B7F5D4CB603FA07AEE0F6669B5','o-home','68C537B7F5D4CB603FA07AEE0F6669B5'],['CD89899A5E7E711EB0D63964E0511670','genscript','CD89899A5E7E711EB0D63964E0511670'],['0DBDE0D2B2B938114CFDF9462DBCFF61','xiangru','0DBDE0D2B2B938114CFDF9462DBCFF61'],['560C6CEFED1CC13954A34C6E79640B81','eastups','560C6CEFED1CC13954A34C6E79640B81'],['4771D33E769D87BDAB6391FD00B8AF18','sgai','4771D33E769D87BDAB6391FD00B8AF18'],['1AB978000DE0A68E158E41DC4E8675C3','youyou','1AB978000DE0A68E158E41DC4E8675C3'],['D30F02791894D2C1EFE220B54BB051E3','nepcsolar','D30F02791894D2C1EFE220B54BB051E3'],['8CAA9CBDE6E3B8DEC7C3358862F06BCB','kinwong','8CAA9CBDE6E3B8DEC7C3358862F06BCB'],['125D26854BF75E373B953123E0222E30','rrkj','125D26854BF75E373B953123E0222E30'],'{@sld@}']";
        	 var dataArray = eval(dataArrayString);
            
            var l = dataArray.length - 1,
                sld;
            
            var context = $ctx.getData();
            var serviceInstance = ServiceInstance.getInstance(context);
            var request = serviceInstance.getRequest();
            var href = request.getRequestURL();
            var url;
            var lang = $ctx.parameter.lang || 'ZHS';
            if (lang == 'us' || lang == 'US') {
                lang = 'US';
            } else {
                lang = 'ZHS';
            }
            var another_lang;
            if (lang == 'ZHS') {
                another_lang = 'US';
            } else {
                another_lang = 'ZHS';
            }
            for (var i = 0;i < l;i++) {
                sld = (dataArray[i][1] + ".").toString().toLowerCase();
                if (href.indexOf(sld) > -1) {
                    //url = ("customization/" + dataArray[i][0] + "/login.screen").toString();
                    url = ("customization/" + dataArray[i][0] + "/login.screen" + '?lang=' + lang + '&another_lang=' + another_lang).toString();
                }
            };
            url = url || "login.screen";
            
            var config = $config(); //取到config对象
            var screenInclude = CompositeUtil.findChild(config, 'screen-include', 'id', 'contentScreen'); //查找登录按钮
            screenInclude.put('screen', url); //将登录按钮文本改为new text
            $session.writeValue('lang', lang);
            $session.copy();
		]]></s:server-script>
    </a:init-procedure>
    <a:view package="aurora.ui.std" template="default">
        <a:screen-include id="contentScreen" screen="${/parameter/@url}"/>
    </a:view>
</a:screen>
